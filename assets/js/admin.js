!function(e){var t={};function a(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(i,r,function(t){return e[t]}.bind(null,r));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=30)}([function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var i=a(1),r=a(14),n=a(9),o=a(20),s=a(21),l=a(22),c=a(17),u=a(24);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){m(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function p(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),this.params=t||{}}var t,a,d;return t=e,d=[{key:"initialize",value:function(){e.details={name:"",email:"",affiliateId:0,editURL:"",referralURL:"",isPaypalEmail:!1,avatarURL:"",lastPayoutDetails:{},formattedJoinDuration:"",stats:{current:{},allTime:{}},payoutStats:{current:{},allTime:{}},referrals:[],payouts:[],visitors:[],tags:{},coupons:{},commission:{},products:{},loader:{referrals:!0,payouts:!0,products:!0,visitors:!0,profile:!0,"multi-tier":!0,KPI:!0,payoutKPI:!0},multiTierChain:{},ltcCustomers:{},identifier:"",allAvailableTags:{},parentAffiliateData:{},paypalEmailData:{},automaticPayoutData:{},registrationFormData:{},signupDate:"",isRejected:!1,isStripeAccount:!1,payoutMethod:""}}},{key:"triggerLoader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t)if("all"===t){var i=f({},e.details.loader);Object.keys(i).forEach((function(e){return i[e]=a})),e.details.loader=i}else e.details.loader[t]=a}},{key:"isLoading",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!t&&t in e.details.loader&&e.details.loader[t]}},{key:"details",get:function(){return e._details},set:function(t){e._details=t}}],(a=[{key:"reload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"referrals";new e(this.params).fetch(t),u.a.isInitializedSelect2=!1}},{key:"loadSectionData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"referrals";switch(e){case"referrals":new r.a(this.params).fetch();break;case"payouts":new n.a(this.params).fetchKPI(),new n.a(this.params).fetch();break;case"products":new o.a(this.params).fetch();break;case"visitors":new s.a(this.params).fetch();break;case"profile":new l.a(this.params).fetch();break;case"multi-tier":new c.a(this.params).fetch()}}},{key:"fetch",value:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"referrals";if(!afwcDateFunctions.isValidDate([this.params.startDate,this.params.endDate],"-"))return e.triggerLoader("all",!1);var r={dashboard:"afwc_dashboard_controller",cmd:"affiliate_details",security:i.a.getAFWParams("security.dashboard.affiliateDetails")||"",from_date:afwcDateFunctions.getDateTime(this.params.startDate,{dayStart:!0}),to_date:afwcDateFunctions.getDateTime(this.params.endDate,{dayEnd:!0}),affiliate_id:this.params.id||0};i.a.requestHandler({requestData:r,callback:function(e){return t.extractData(e)}}),this.loadSectionData(a),this.fetchKPIDetails()}},{key:"fetchKPIDetails",value:function(){i.a.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"affiliate_kpi_details",security:i.a.getAFWParams("security.dashboard.affiliateKPIData")||"",from_date:afwcDateFunctions.getDateTime(this.params.startDate,{dayStart:!0}),to_date:afwcDateFunctions.getDateTime(this.params.endDate,{dayEnd:!0}),affiliate_id:this.params.id||0},callback:function(t){e.details.stats=t.stats||{current:{},allTime:{}},e.triggerLoader("KPI",!1)}})}},{key:"extractData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.details=f(f({},e.details),{},{name:t.name||"",email:t.email||"",affiliateId:t.affiliate_id||0,editURL:t.edit_url||"",referralURL:t.referral_url||"",isPaypalEmail:t.is_paypal_email||!1,avatarURL:t.avatar_url||"",formattedJoinDuration:t.formatted_join_duration||"",signupDate:t.signup_date||"",isRejected:t.rejected||!1,isStripeAccount:t.is_stripe_account||!1,payoutMethod:t.payout_method||""}),t.pending&&(e.details.pending=t.pending)}}])&&p(t.prototype,a),d&&p(t,d),e}();g.initialize()},function(e,t,a){"use strict";function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],i=!0,r=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){r=!0,n=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw n}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function c(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}a.d(t,"a",(function(){return u}));var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,i=[{key:"requestHandler",value:function(t){var a=new FormData,i=t.requestData||{};for(var r in i)a.append(r,i[r]);m.request({method:t.method||"POST",url:e.getAFWParams("ajaxurl")||"",params:{action:i.dashboard},body:a,withCredentials:t.withCredentials||!1,responseType:t.responseType||"json"}).then((function(e){t.hasOwnProperty("callback")&&t.callback(e)})).catch((function(e){t.hasOwnProperty("error")&&t.error(e)}))}},{key:"formatNumber",value:function(e){return accounting.formatNumber(e,{precision:afwcDashboardParams.precision,thousand:afwcDashboardParams.thousandSeperator,decimal:afwcDashboardParams.decimal})}},{key:"getAFWParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object.keys(t).length?t:afwcDashboardParams||{};if(e.includes(".")){var i=this.getAFWParams(e.slice(0,e.indexOf(".")),a);return this.getAFWParams(e.slice(e.indexOf(".")+1),i)}return""!==e?e in a?a[e]:"":a}},{key:"getCampaignStatus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=e.getAFWParams("campaignStatuses")||{};return""===t?a:t in a?a[t]:""}},{key:"getCommissionPlansStatus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=e.getAFWParams("commissionPlanStatuses")||{};return""===t?a:t in a?a[t]:""}},{key:"geRouteFilterValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?e.split("&").reduce((function(e,t){var a=s(t.split("="),2),i=a[0],r=a[1];return i&&r&&(e[i]=decodeURIComponent(r)),e}),{}):{}}},{key:"buildRouteFilterValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!t||"object"!==o(t))return e;var a=e.split("/filter/"),i=s(a,2),n=i[0],l=i[1],c=this.geRouteFilterValue(l||"")||{};c=r(r({},c),t);var u=Object.entries(c).map((function(e){var t=s(e,2),a=t[0],i=t[1];return"".concat(a,"=").concat(encodeURIComponent(i))})).join("&");return n=n.endsWith("/")?n.slice(0,-1):n,"".concat(n,"/filter/").concat(u)}}],(a=null)&&c(t.prototype,a),i&&c(t,i),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var i=a(5),r=a(1),n=a(0),o=a(15);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var f=function(){function e(){var t,a,i,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,e),e.data={kpi:{},affiliates:(null===(t=e.data)||void 0===t?void 0:t.affiliates)||[],filters:(null===(a=e.data)||void 0===a?void 0:a.filters)||{},q:(null===(i=e.data)||void 0===i?void 0:i.q)||"",currentPage:1,firstcall:!0,loadMore:!0,currentAffiliateID:(null===(r=e.data)||void 0===r?void 0:r.currentAffiliateID)||0,action:"",start_date:n.startDate||afwcDateFunctions.getFullDate(-30),end_date:n.endDate||afwcDateFunctions.getFullDate()},e.fetch(),e.restarted=!1}var t,a,s;return t=e,s=[{key:"reset",value:function(){e.data={currentAffiliateID:0,kpi:{},affiliates:[],filters:{}||{},q:""},e.restarted=!0}},{key:"fetch",value:function(){var t,a,s,c,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!afwcDateFunctions.isValidDate([e.data.start_date,e.data.end_date],"-"))return e.invalidDate=!0,void(e.isKPILoading=!1);e.invalidDate=!1,i.a.showLoader=!0,i.a.msg=__("Loading Affiliates","affiliate-for-woocommerce"),e.data.currentPage="load_more"!=e.data.action?1:e.data.currentPage;var d,f,p,g=(null===(t=e.data)||void 0===t?void 0:t.filters)||{};(null===(a=m)||void 0===a||null===(s=a.route)||void 0===s||null===(c=s.param)||void 0===c?void 0:c.call(s,"id"))&&(g=l(l({},g),{},{affiliate_ids:[null===(d=m)||void 0===d||null===(f=d.route)||void 0===f||null===(p=f.param)||void 0===p?void 0:p.call(f,"id")]}));var h={cmd:"dashboard_data",dashboard:"afwc_dashboard_controller",security:r.a.getAFWParams("security.dashboard.fetchData")||"",from_date:afwcDateFunctions.getDateTime(e.data.start_date,{dayStart:!0}),to_date:afwcDateFunctions.getDateTime(e.data.end_date,{dayEnd:!0}),filters:JSON.stringify(g),q:e.data.q,page:e.data.currentPage};r.a.requestHandler({requestData:h,callback:function(t){var a,i,r;e.extractData(t),"filter_update"===u&&new n.a({id:(null==e||null===(a=e.data)||void 0===a?void 0:a.currentAffiliateID)||0,startDate:(null==e||null===(i=e.data)||void 0===i?void 0:i.start_date)||"",endDate:(null==e||null===(r=e.data)||void 0===r?void 0:r.end_date)||""}).reload((null===o.a||void 0===o.a?void 0:o.a.activeTab)||"")}}),h.cmd="dashboard_kpi_data",h.security=r.a.getAFWParams("security.dashboard.kpiData")||"",e.isKPILoading=!0,r.a.requestHandler({requestData:h,callback:function(t){return e.extractKPIData(t)}})}},{key:"extractKPIData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.data.kpi=t.kpi||{},e.isKPILoading=!1}},{key:"extractData",value:function(t){var a;e.data.affiliates.length>0&&"load_more"==e.data.action?(e.data.affiliates=e.data.affiliates.concat(t.affiliateList),e.data.action=""):e.data.affiliates=t.affiliateList||[],e.data.currentAffiliateID>0&&(a=e.data.affiliates.filter((function(t){return t.affiliate_id==e.data.currentAffiliateID}))[0]),void 0===a&&(e.data.currentAffiliateID=e.data.affiliates.length>0?e.data.affiliates[0].affiliate_id:0),i.a.showLoader=!1}},{key:"exportAffiliates",value:function(t){if(afwcDateFunctions.isValidDate([e.data.start_date,e.data.end_date],"-")){var a={cmd:"export_affiliates",security:r.a.getAFWParams("security.dashboard.exportAffiliates")||"",from_date:afwcDateFunctions.getDateTime(e.data.start_date,{dayStart:!0}),to_date:afwcDateFunctions.getDateTime(e.data.end_date,{dayEnd:!0}),filters:JSON.stringify(e.data.filters),q:e.data.q,action:"afwc_dashboard_controller",type:t},i=new URL(afwcDashboardParams.ajaxurl);for(var n in a)i.searchParams.append(n,a[n]);window.open(i.href)}}},{key:"data",get:function(){return e._data},set:function(t){e._data=t}},{key:"isKPILoading",get:function(){return e._isKPILoading},set:function(t){e._isKPILoading=t}},{key:"invalidDate",get:function(){return e._invalidDate},set:function(t){e._invalidDate=t}}],(a=null)&&d(t.prototype,a),s&&d(t,s),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var i=a(7),r=a(1),n=a(4);function o(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function l(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),this.setCurrentCommission(e.currentCommissionID)}var t,a,s;return t=e,s=[{key:"initialize",value:function(){e.details={id:0,name:"",rules:{},amount:"",type:"",status:"Draft",apply_to:"all",action_for_remaining:"continue",distribution:[]},e.details.no_of_tiers=e.details.distribution.length;var t=afwcDashboardParams.plan_dashboard_data.plan_rule_data,a={};Object.values(t).map((function(e){a=Object.assign(a,e)})),e.allRules=a,e.ruleRow={type:"affiliate",operator:"in",value:""},e.ruleGroup={condition:"AND",rules:[e.ruleRow]},e.idNameMaps={}}},{key:"newCommission",value:function(){e.currentCommissionID=-1,new e}},{key:"saveCommission",value:function(){r.a.requestHandler({requestData:{cmd:"save_commission",commission:JSON.stringify(e.details),security:r.a.getAFWParams("security.commissions.save")||"",dashboard:"afwc_commission_controller"},callback:function(t){if("Success"==t.ACK){var a="";t.last_inserted_id?(e.details.id=t.last_inserted_id,i.a.data.commissions.push(e.details),i.a.data.planOrder.splice(-1,0,t.last_inserted_id),i.a.reOrder(i.a.data.commissions),a=_x("The commission plan created successfully","Notification success message after creating a new commission plan","affiliate-for-woocommerce")):(i.a.data.commissions=i.a.data.commissions.map((function(t){return parseInt(t.id)===parseInt(e.details.id)?e.details:t})),a=_x("The commission plan updated successfully","Notification success message after updating a commission plan","affiliate-for-woocommerce")),n.a.show({status:"success",message:a}),e.currentCommissionID=0}else n.a.show({status:"error",message:_x("Failed to create or update the commission plan","Notification error message for failed commission plan creation or update","affiliate-for-woocommerce")})}})}},{key:"deleteCommission",value:function(){r.a.requestHandler({requestData:{cmd:"delete_commission",commission_id:e.currentCommissionID,security:r.a.getAFWParams("security.commissions.delete")||"",dashboard:"afwc_commission_controller"},callback:function(t){if("Success"==t.ACK){var a=e.details.id;i.a.data.commissions=i.a.data.commissions.filter((function(e){return e.id!=a})),i.a.data.planOrder=i.a.data.planOrder.filter((function(e){return e!=a})),e.currentCommissionID=0,n.a.show({status:"success",message:_x("The commission plan deleted successfully","Notification success message after deleting a commission plan","affiliate-for-woocommerce")})}else n.a.show({status:"error",message:_x("Failed to delete the commission plan","Notification error message for failed commission plan deletion","affiliate-for-woocommerce")})}})}},{key:"details",get:function(){return e._details},set:function(t){e._details=t}}],(a=[{key:"setCurrentCommission",value:function(t){var a={};t>0&&(a=i.a.data.commissions.filter((function(e){return e.id==t}))[0]),e.details={id:a.id||0,name:a.name||"",rules:a.rules||"",amount:isNaN(parseFloat(a.amount))?"":parseFloat(a.amount),type:a.type||"Percentage",status:a.status||"Draft",apply_to:a.apply_to||"all",action_for_remaining:a.action_for_remaining||"continue",no_of_tiers:a.no_of_tiers||1,distribution:a.distribution||[]},t>0&&this.fetchExtraData(e.details.rules)}},{key:"fetchExtraData",value:function(t){var a=t.rules,i={};if(a){if(Object.keys(a).map((function(t,r){var n=a[t].rules;Object.keys(n).map((function(t,a){var r,s=n[t].type||"";if(!s||(null==e||null===(r=e.allRules[s])||void 0===r?void 0:r.options)&&Object.keys(e.allRules[s].options).length>0)return!0;i[s]||(i[s]=[]),i[s]=o(new Set(i[s].concat(n[t].value||"")))}))})),!i||0>=Object.keys(i).length)return e.idNameMaps={};r.a.requestHandler({requestData:{cmd:"fetch_extra_data",security:r.a.getAFWParams("security.commissions.extraData")||"",dashboard:"afwc_commission_controller",data:JSON.stringify(i)},callback:function(t){"Success"==t.ACK&&(e.idNameMaps=t.result)}})}}}])&&l(t.prototype,a),s&&l(t,s),e}();c.initialize()},function(e,t,a){"use strict";function i(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}a.d(t,"a",(function(){return r}));var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize()}var t,a,r;return t=e,r=[{key:"initialize",value:function(){e.reset()}},{key:"reset",value:function(){e.flags={showNotification:0},e.notification={status:"warning",message:"",autoHide:!0,hideDelay:8e3}}},{key:"show",value:function(t){var a=t.status,i=void 0===a?"warning":a,r=t.message,n=void 0===r?"":r,o=t.autoHide,s=void 0===o||o,l=t.hideDelay,c=void 0===l?8e3:l;e.notification={status:i,message:n,autoHide:s,hideDelay:c},e.flags.showNotification=1}},{key:"hide",value:function(){e.reset()}}],(a=null)&&i(t.prototype,a),r&&i(t,r),e}();r.initialize()},function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}a.d(t,"a",(function(){return n}));var n=function(){function e(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.isOverlay=(null==a||null===(t=a.attrs)||void 0===t?void 0:t.overlay)||!1,e.showLoader=e.showLoader||!1,e.msg=e.msg||_x("Loading","default loader message","affiliate-for-woocommerce"),this.css="text-lg"+(this.isOverlay?" text-white":" text-gray-600")}var t,a,n;return t=e,n=[{key:"showLoader",get:function(){return e._showLoader},set:function(t){return e._showLoader=Boolean(t)}},{key:"msg",get:function(){return e._msg},set:function(t){return e._msg=t}}],(a=[{key:"view",value:function(){return m("[",null,this.isOverlay?m("div",{class:"w-full h-full fixed top-0 left-0 bg-gray-900 opacity-50 z-50"}):"",m("div",{class:"fixed w-full flex flex-col left-0 top-0 h-full justify-center text-center items-center space-y-4 z-50"},e.msg?m("div",{class:this.css},e.msg):"",m("div",{class:"text-indigo-600"},m("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-16 h-16",stroke:"currentColor",fill:"none",viewBox:"0 0 57 57"},m("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},m("circle",{cx:"5",cy:"50",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})),m("circle",{cx:"27",cy:"5",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})),m("circle",{cx:"49",cy:"50",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"})))))))}}])&&r(t.prototype,a),n&&r(t,n),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(8),r=a(1);function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),e.setCurrentCampaign(e.currentCampaignID)}var t,a,s;return t=e,s=[{key:"initialize",value:function(){e.details={title:"",targetLink:afwcDashboardParams.home_url,slug:"",campaignId:0,shortDescription:"",body:"",status:"Draft",rules:{},metaData:{},ruleMaps:{}}}},{key:"setCurrentCampaign",value:function(t){var a={};t>0&&(a=i.a.data.campaigns.filter((function(e){return e.campaignId==t}))[0]),e.details={title:a.title||"",targetLink:a.targetLink||afwcDashboardParams.home_url,slug:a.slug||"",campaignId:a.campaignId||0,shortDescription:a.shortDescription||"",body:a.body||"",status:a.status||"Draft",rules:a.rules||{},metaData:a.metaData||{},ruleMaps:{}},afwcDashboardParams.isAdmin&&e.fetchRuleData(e.details.rules)}},{key:"removeCurrentCampaign",value:function(){e.currentCampaignID=0,m.route.set(afwcDashboardParams.isAdmin?"/campaigns":"/")}},{key:"fetchRuleData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===n(t)&&Object.keys(t).length&&r.a.requestHandler({requestData:{cmd:"fetch_rule_data",security:r.a.getAFWParams("security.campaign.fetchRuleData")||"",dashboard:"afwc_campaign_controller",rules:JSON.stringify(t)},callback:function(t){"Success"==t.ACK&&(e.details.ruleMaps=t.result||{})}})}},{key:"details",get:function(){return e._details},set:function(t){e._details=t}}],(a=null)&&o(t.prototype,a),s&&o(t,s),e}();s.initialize()},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a(1),r=a(5);function n(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.data={kpi:{},commissions:[]},this.params=t||{},this.fetch()}var t,a,o;return t=e,o=[{key:"reOrder",value:function(t){void 0===t&&(t=e.data.commissions);var a=[];if(t&&t.length>0&&e.data.planOrder&&e.data.planOrder.length>0)for(var i=function(i){var r=e.data.planOrder[i],n=t.filter((function(e){return e.id==r}))[0];n&&a.push(n)},r=0;r<e.data.planOrder.length;r++)i(r);else a=t;e.data.commissions=a}},{key:"savePlanOrder",value:function(){return r.a.showLoader=!0,new Promise((function(t,a){i.a.requestHandler({requestData:{cmd:"save_plan_order",plan_order:JSON.stringify(e.data.planOrder),security:i.a.getAFWParams("security.commissions.savePlanOrder")||"",dashboard:"afwc_commission_controller"},callback:function(i){"Success"===i.ACK?(e.data.planOrder=i.result||[],e.reOrder(),t(i)):a(i),r.a.showLoader=!1}})}))}},{key:"data",get:function(){return e._data},set:function(t){e._data=t}}],(a=[{key:"fetch",value:function(){r.a.showLoader=!0,r.a.msg=_x("Loading Commission Plans","Loading text for commissions","affiliate-for-woocommerce"),i.a.requestHandler({requestData:{cmd:"fetch_dashboard_data",security:i.a.getAFWParams("security.commissions.fetchData")||"",dashboard:"afwc_commission_controller",commission_status:afwcDashboardParams.commission_status||""},callback:function(t){if("Success"==t.ACK){var a=t.result.commissions||[];e.data.commissions=[],e.data.planOrder=t.result.plan_order||[],e.data.planOrder=Object.keys(e.data.planOrder).map((function(t,a){return parseInt(e.data.planOrder[t])})),e.reOrder(a)}r.a.showLoader=!1}})}}])&&n(t.prototype,a),o&&n(t,o),e}();o.data={commissions:[]}},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a(1),r=a(5);function n(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(t){var a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params=t||{},0===parseInt((null===(a=e.data)||void 0===a||null===(i=a.campaigns)||void 0===i?void 0:i.length)||0)&&this.fetch()}var t,a,o;return t=e,o=[{key:"data",get:function(){return e._data},set:function(t){e._data=t}}],(a=[{key:"fetch",value:function(){e.isLoading=!0,afwcDashboardParams.isAdmin&&(r.a.showLoader=!0,r.a.msg=_x("Loading Campaigns","Loading text for campaigns","affiliate-for-woocommerce")),i.a.requestHandler({requestData:{cmd:"fetch_dashboard_data",security:i.a.getAFWParams("security.campaign.fetchData")||"",dashboard:"afwc_campaign_controller",campaign_status:afwcDashboardParams.campaign_status||""},callback:function(t){"Success"==t.ACK&&(e.data.campaigns=t.result.campaigns||[],afwcDashboardParams.isAdmin&&(e.data.kpi=t.result.kpi||{})),afwcDashboardParams.isAdmin&&(r.a.showLoader=!1),e.isLoading=!1}})}}])&&n(t.prototype,a),o&&n(t,o),e}();o.data={campaigns:[]}},function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var i=a(0),r=a(2),n=a(4),o=a(1);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw n}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function f(e,t,a,i,r,n,o){try{var s=e[n](o),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function p(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,t,a){return t&&p(e.prototype,t),a&&p(e,a),e}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),this.params=t||{}}var t,a;return g(e,null,[{key:"initialize",value:function(){e.flags={loadMore:!0,PayoutProcessed:!1}}}]),g(e,[{key:"fetch",value:function(){var t=this;afwcDateFunctions.isValidDate([this.params.startDate,this.params.endDate],"-")&&(this.dataLoaded=this.params.currentPage&&1<parseInt(this.params.currentPage),this.dataLoaded||i.a.triggerLoader("payouts",!0),o.a.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"payout_details",security:o.a.getAFWParams("security.dashboard.payoutDetails")||"",from_date:afwcDateFunctions.getDateTime(this.params.startDate,{dayStart:!0})||"",to_date:afwcDateFunctions.getDateTime(this.params.endDate,{dayEnd:!0})||"",affiliate_id:this.params.id||0,page:this.params.currentPage||1},callback:function(a){a&&a.data&&a.data.length>0&&(i.a.details.payouts=t.dataLoaded?i.a.details.payouts.concat(a.data):a.data),t.dataLoaded||i.a.triggerLoader("payouts",!1),(null==a?void 0:a.meta)&&(e.flags.loadMore=!!a.meta.load_more)}}))}},{key:"fetchKPI",value:function(){i.a.triggerLoader("payoutKPI",!0),o.a.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"payout_kpi_details",security:o.a.getAFWParams("security.dashboard.payoutKPIData")||"",affiliate_id:this.params.id||0},callback:function(e){var t=e.ACK,a=void 0!==t&&t,r=e.result,n=void 0===r?{}:r;a&&(i.a.details.payoutStats=n),i.a.triggerLoader("payoutKPI",!1)}})}},{key:"processPayout",value:function(){var t=this,a=new FormData,s={cmd:"process_payout",security:o.a.getAFWParams("security.dashboard.processPayout")||"",method:this.params.method,affiliate:JSON.stringify(this.params.affiliate),currency:this.params.currency,selected_referrals:JSON.stringify(this.params.selectedReferrals),date:afwcDateFunctions.getDateTime(this.params.date),note:this.params.note};for(var l in s)a.append(l,s[l]);return new Promise((function(o){m.request({method:"POST",url:ajaxurl,params:{action:"afwc_dashboard_controller"},body:a,withCredentials:!1,responseType:"json"}).then((function(a){if("Success"===a.ACK&&Object.keys(a.last_added_payout_data).length>0){var s=Number(parseFloat(i.a.details.stats.current.unpaid_commissions||0).toFixed(2)),l=Number(parseFloat(r.a.data.kpi.unpaid_commissions||0).toFixed(2)),c=a.last_added_payout_data.hasOwnProperty("amount")?Number(parseFloat(a.last_added_payout_data.amount||0).toFixed(2)):0,u=t.params.selectedReferrals.map((function(e){return e.referral_id||0}));i.a.details.stats.current.unpaid_commissions=s>0?Number(parseFloat(s-c).toFixed(2)):s,r.a.data.kpi.unpaid_commissions=l>0?Number(parseFloat(l-c).toFixed(2)):l,i.a.details.referrals.map((function(e,t){e.referral_id&&u.indexOf(e.referral_id)>-1&&(i.a.details.referrals[t].status="paid")})),i.a.details.stats.current.unpaid_commissions=parseFloat(i.a.details.stats.current.unpaid_commissions).toFixed(2),r.a.data.kpi.unpaid_commissions=parseFloat(r.a.data.kpi.unpaid_commissions).toFixed(2),e.flags.PayoutProcessed=!0,n.a.show({status:"success",message:_x("Payout processed successfully","Notification message for successful payout","affiliate-for-woocommerce")})}else e.flags.PayoutProcessed=!1,n.a.show({status:"error",message:a.error});o(a)}))}))}},{key:"printInvoice",value:(t=regeneratorRuntime.mark((function e(){var t,a,i,r,n,o,s,l,c,d,f,m,p,g,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=h.length>0&&void 0!==h[0]?h[0]:0){e.next=3;break}return e.abrupt("return");case 3:if(d=this.getDataForGenerateInvoice(c)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this.generateInvoice(d);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0="";case 11:if(f=e.t0){e.next=14;break}return e.abrupt("return");case 14:if(m=(null===(t=window)||void 0===t||null===(a=t.open)||void 0===a?void 0:a.call(t,"","","height=600,width=800"))||null){e.next=17;break}return e.abrupt("return");case 17:null===(i=m.document)||void 0===i||null===(r=i.write)||void 0===r||r.call(i,f),null===(n=m.document)||void 0===n||null===(o=n.close)||void 0===o||o.call(n),null===(s=m.focus)||void 0===s||s.call(m),(p=null===(l=m.document)||void 0===l?void 0:l.images)&&p.length>0?function(){var e,t=0,a=u(p);try{for(a.s();!(e=a.n()).done;){var i=e.value;i.onload=i.onerror=function(){var e;++t===p.length&&(null===(e=m.print)||void 0===e||e.call(m))}}}catch(e){a.e(e)}finally{a.f()}}():null===(g=m.print)||void 0===g||g.call(m);case 22:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,a=arguments;return new Promise((function(i,r){var n=t.apply(e,a);function o(e){f(n,i,r,o,s,"next",e)}function s(e){f(n,i,r,o,s,"throw",e)}o(void 0)}))},function(){return a.apply(this,arguments)})},{key:"generateInvoice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t){o.a.requestHandler({requestData:l({dashboard:"afwc_dashboard_controller",cmd:"payout_invoice",security:o.a.getAFWParams("security.dashboard.payoutInvoice")||""},e),responseType:"document",callback:function(e){var a;return t((null==e||null===(a=e.documentElement)||void 0===a?void 0:a.outerHTML)||"")},error:function(e){console.log("Error while generating invoice: ".concat(e)),t("")}})}))}},{key:"getDataForGenerateInvoice",value:function(){var e,t,a,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!(null===i.a||void 0===i.a||null===(e=i.a.details)||void 0===e?void 0:e.payouts)||!r)return null;var n=(null===(t=(a=i.a.details.payouts).find)||void 0===t?void 0:t.call(a,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null===(e=t.payout_id)||void 0===e?void 0:e.toString())===r.toString()})))||null;return n?{payout_id:n.payout_id||0,affiliate_id:i.a.details.affiliateId||0,date_time:n.datetime||"",from_period:n.from_date||"",to_period:n.to_date||"",referral_count:n.referral_count||0,amount:n.amount||0,currency:n.currency||"",method:n.method||"",notes:n.payout_notes||""}:null}}],[{key:"flags",get:function(){return e._flags},set:function(t){e._flags=t}}]),e}();h.initialize()},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a(18),r=a(4);function n(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()}var t,a,o;return t=e,(a=[{key:"showFeedback",value:function(){"success"===r.a.notification.status&&afwcDashboardParams.can_ask_for_feedback&&(i.a.flags.showFeedback=1)}},{key:"initialize",value:function(){this.icons={success:'<svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>',error:'<svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" /></svg>',warning:'<svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>'},this.hideNotificationTimeout=null}},{key:"renderIcon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"warning";return e in this.icons?m.trust(this.icons[e]):""}},{key:"setHideNotificationTimeout",value:function(){var e=this;this.hideNotificationTimeout&&clearTimeout(this.hideNotificationTimeout),this.hideNotificationTimeout=setTimeout((function(){if(r.a.flags.showNotification&&r.a.notification.autoHide){var t=document.getElementsByClassName("afwc-notification-close");t.length>0&&t[0].click(),e.showFeedback()}}),r.a.notification.hideDelay||8e3)}},{key:"hideNotification",value:function(){clearTimeout(this.hideNotificationTimeout),r.a.hide(),this.showFeedback()}},{key:"view",value:function(){var e=this;r.a.flags.showNotification&&this.setHideNotificationTimeout();var t="success"!==r.a.notification.status?"error"===r.a.notification.status?"error":"warning":"success";return m("div",{class:"fixed inset-0 flex items-end justify-center px-4 py-6 pointer-events-none sm:p-6 sm:items-start sm:justify-end",style:"z-index: 200000;"},m("div",{class:"w-full max-w-sm bg-white rounded-lg shadow-lg pointer-events-auto bottom-0 fixed"},m("div",{class:"overflow-hidden rounded-lg shadow-xs text-gray-700"},m("div",{class:("success"!==t?"error"===t?"bg-error":"bg-warning":"bg-success")+" p-4"},m("div",{class:"flex items-center"},m("div",{class:"flex-shrink-0"},this.renderIcon(t)),m("div",{class:"ml-3 flex-1"},m("p",{class:"text-sm leading-5"},r.a.notification.message)),m("div",{class:"flex flex-shrink-0 ml-4"},m("button",{type:"button",class:"afwc-notification-close inline-flex p-1 rounded-md hover:bg-gray-700 focus:outline-none transition duration-150 ease-in-out",onclick:function(){e.hideNotification()}},m("svg",{class:"h-6 w-6 hover:text-white",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})))))))))}}])&&n(t.prototype,a),o&&n(t,o),e}()},function(e,t,a){"use strict";function i(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function n(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}a.d(t,"a",(function(){return o}));var o=function(){function e(t){var a=t.attrs,i=void 0===a?{}:a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initParams(i)}var t,a,r;return t=e,(a=[{key:"initParams",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.params={id:(null==t?void 0:t.id)||0,startDate:(null==t?void 0:t.startDate)||"",endDate:(null==t?void 0:t.endDate)||"",currentPage:1,filters:(null==t?void 0:t.filters)||{}},null==this||null===(e=this.onParamInit)||void 0===e||e.call(this)}},{key:"doInit",value:function(){var e;null===(e=this.loadData)||void 0===e||e.call(this)}},{key:"doUpdate",value:function(e){var t=e.attrs,a=void 0===t?{}:t;(null==a?void 0:a.id)===this.params.id&&(null==a?void 0:a.startDate)===this.params.startDate&&(null==a?void 0:a.endDate)===this.params.endDate&&JSON.stringify((null==a?void 0:a.filters)||{})===JSON.stringify(this.params.filters||{})||this.initParams(a)}},{key:"loadMore",value:function(){var e;this.params.currentPage++,null===(e=this.loadData)||void 0===e||e.call(this)}},{key:"showPlaceholder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return m("[",null,m("div",{class:"afw-placeholder m-2 h-8"}),m("div",{class:"flex"},parseInt(e)>0?i(Array(parseInt(e))).map((function(){return m("div",{class:"afw-placeholder m-2 h-8 w-1/4"})})):""),m("div",{class:"flex"},parseInt(e)>0?i(Array(parseInt(e))).map((function(){return m("div",{class:"afw-placeholder m-2 h-8 w-1/4"})})):""))}}])&&n(t.prototype,a),r&&n(t,r),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var i=a(8),r=a(6),n=a(1),o=a(4),s=a(5);function l(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,c;return t=e,c=[{key:"newCampaign",value:function(){r.a.currentCampaignID=-1,new r.a}},{key:"destroyCampaignDetails",value:function(){i.a.data={campaigns:[]}}},{key:"saveCampaign",value:function(){n.a.requestHandler({requestData:{cmd:"save_campaign",campaign:JSON.stringify(r.a.details),security:n.a.getAFWParams("security.campaign.save")||"",dashboard:"afwc_campaign_controller"},callback:function(e){var t;"Success"==e.ACK?(t=e.last_inserted_id?_x("Campaign created successfully","Notification message for successful campaign creation","affiliate-for-woocommerce"):_x("Campaign updated successfully","Notification message for successful campaign update","affiliate-for-woocommerce"),e.data&&(i.a.data.campaigns=e.data||[]),o.a.show({status:"success",message:t}),r.a.removeCurrentCampaign()):o.a.show({status:"error",message:_x("Failed to create or update campaign","Notification message for failed campaign creation or update","affiliate-for-woocommerce")})}})}},{key:"deleteCampaign",value:function(){n.a.requestHandler({requestData:{cmd:"delete_campaign",campaign_id:r.a.currentCampaignID,security:n.a.getAFWParams("security.campaign.delete")||"",dashboard:"afwc_campaign_controller"},callback:function(e){if("Success"==e.ACK){var t=r.a.details.campaignId;i.a.data.campaigns=i.a.data.campaigns.filter((function(e){return e.campaignId!=t})),r.a.removeCurrentCampaign(),o.a.show({status:"success",message:_x("Campaign deleted successfully","Notification message for successful campaign deletion","affiliate-for-woocommerce")})}else o.a.show({status:"error",message:_x("Failed to delete campaign","Notification message for failed campaign deletion","affiliate-for-woocommerce")})}})}},{key:"regenerateSampleCampaigns",value:function(){s.a.showLoader=!0,s.a.msg=_x("Generating Sample Campaigns","re-generating sample campaigns loader message","affiliate-for-woocommerce"),n.a.requestHandler({requestData:{cmd:"regenerate_sample_campaigns",security:n.a.getAFWParams("security.campaign.createSampleCampaigns")||"",dashboard:"afwc_campaign_controller"},callback:function(e){"Success"==e.ACK?(e.data&&(i.a.data.campaigns=e.data||[]),o.a.show({status:"success",message:_x("Sample campaigns created successfully","Notification message for successful sample campaigns creation","affiliate-for-woocommerce")})):o.a.show({status:"error",message:_x("Failed to create sample campaigns","Notification message for failed sample campaigns creation","affiliate-for-woocommerce")}),window.scrollTo({top:0,behavior:"smooth"}),s.a.showLoader=!1}})}}],(a=null)&&l(t.prototype,a),c&&l(t,c),e}()},function(e,t,a){"use strict";function i(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}a.d(t,"a",(function(){return r}));var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,r;return t=e,r=[{key:"affiliateDisplayLink",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";try{var r="",n=afwcDashboardParams.isPrettyReferralEnabled||"no",o=afwcDashboardParams.pname;return i=i||("admin"==a?"{affiliate_id}":afwcDashboardParams.affiliate_id),r=-1==(e=e.replace(/\/$/,"")).indexOf("?")?e+("yes"==n?"/"+o+"/"+i:"/?"+o+"="+i):"yes"==n?e.substring(0,e.indexOf("?")).replace(/\/$/,"")+"/"+o+"/"+i+"/?"+e.substring(e.indexOf("?")+1):e+"&"+o+"="+i,r+=""!=t?(-1==r.indexOf("?")?"/?":"&")+"utm_campaign="+t:""}catch(e){console.log("In GlobalFunctions for affiliate links:: ",e)}}},{key:"doCopy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{if(e.length>0){var t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),navigator&&navigator.clipboard&&navigator.clipboard.writeText(t.value),document.body.removeChild(t)}}catch(e){console.log("In GlobalFunctions to copy:: ",e)}}}],(a=null)&&i(t.prototype,a),r&&i(t,r),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(0),r=a(2),n=a(1);function o(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),this.params=t||{}}var t,a,s;return t=e,s=[{key:"initialize",value:function(){e.flags={loadMore:!0,clearSelections:!1,moreReferralLoaded:!1}}},{key:"flags",get:function(){return e._flags},set:function(t){e._flags=t}}],(a=[{key:"fetch",value:function(){var t,a,o=this;if(afwcDateFunctions.isValidDate([this.params.startDate,this.params.endDate],"-")){if(0===i.a.details.affiliateId&&(null==this||null===(t=this.params)||void 0===t?void 0:t.id)){var s=Number(this.params.id);isNaN(s)||0===s||(i.a.details.affiliateId=s)}this.dataLoaded=this.params.currentPage&&1<parseInt(this.params.currentPage),this.dataLoaded||i.a.triggerLoader("referrals",!0),n.a.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"order_details",security:n.a.getAFWParams("security.dashboard.orderDetails")||"",from_date:afwcDateFunctions.getDateTime(this.params.startDate,{dayStart:!0})||"",to_date:afwcDateFunctions.getDateTime(this.params.endDate,{dayEnd:!0})||"",affiliate_id:this.params.id||0,page:this.params.currentPage||1,filters:JSON.stringify((null===r.a||void 0===r.a||null===(a=r.a.data)||void 0===a?void 0:a.filters)||{})||""},callback:function(t){t&&t.data&&t.data.length>0?(e.flags.moreReferralLoaded=!0,i.a.details.referrals=o.dataLoaded?i.a.details.referrals.concat(t.data):t.data):e.flags.moreReferralLoaded=!1,o.dataLoaded||i.a.triggerLoader("referrals",!1),e.flags.loadMore=t&&t.meta&&!0===t.meta.load_more}})}}},{key:"updateCommissionStatus",value:function(){var t=this,a=new FormData,o={cmd:"update_commission_status",security:n.a.getAFWParams("security.dashboard.updateCommissionStatus")||"",referral_ids:JSON.stringify(this.params.ids),affiliate_id:r.a.data.currentAffiliateID,status:this.params.status};for(var s in o)a.append(s,o[s]);return new Promise((function(n,o){m.request({method:"POST",url:ajaxurl,params:{action:"afwc_dashboard_controller"},body:a,withCredentials:!1,responseType:"json"}).then((function(a){if("Success"===a.ACK){var s=Number(parseFloat(i.a.details.stats.current.unpaid_commissions||0).toFixed(2)),l=Number(parseFloat(i.a.details.stats.current.earned_commissions||0).toFixed(2)),c=Number(parseFloat(r.a.data.kpi.unpaid_commissions||0).toFixed(2)),u=0;i.a.details.referrals.forEach((function(e,a){-1!==t.params.ids.indexOf(e.referral_id)&&(u=Number(parseFloat(i.a.details.referrals[a].commission||0).toFixed(2)),"unpaid"===t.params.status&&"unpaid"!==i.a.details.referrals[a].status?(i.a.details.stats.current.unpaid_commissions=Number(parseFloat(s+u).toFixed(2)),r.a.data.kpi.unpaid_commissions=Number(parseFloat(c+u).toFixed(2))):"unpaid"!==t.params.status&&"unpaid"===i.a.details.referrals[a].status&&(i.a.details.stats.current.unpaid_commissions=s>0?Number(parseFloat(s-u).toFixed(2)):s,r.a.data.kpi.unpaid_commissions=c>0?Number(parseFloat(c-u).toFixed(2)):c),"rejected"===t.params.status&&"rejected"!==i.a.details.referrals[a].status?i.a.details.stats.current.earned_commissions=l>0?Number(parseFloat(l-u).toFixed(2)):l:"rejected"!==t.params.status&&"rejected"===i.a.details.referrals[a].status&&(i.a.details.stats.current.earned_commissions=Number(parseFloat(l+u).toFixed(2))),l=i.a.details.stats.current.earned_commissions,s=i.a.details.stats.current.unpaid_commissions,i.a.details.referrals[a].status=t.params.status)})),i.a.details.stats.current.unpaid_commissions=parseFloat(i.a.details.stats.current.unpaid_commissions).toFixed(2),r.a.data.kpi.unpaid_commissions=parseFloat(r.a.data.kpi.unpaid_commissions).toFixed(2),i.a.details.stats.current.earned_commissions=parseFloat(i.a.details.stats.current.earned_commissions||0).toFixed(2),e.flags.clearSelections=!0,n(a)}else o(a)}))}))}}])&&o(t.prototype,a),s&&o(t,s),e}();s.initialize()},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a(0),r=a(1);function n(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.activeTab="referrals";var t="flex flex-row whitespace-no-wrap px-4 py-4 block cursor-pointer font-medium text-base text-gray-500 leading-none border-x-0 border-t-0 border-b-2 border-transparent hover:text-indigo-800 focus:outline-none focus:shadow-none focus:border-indigo-400 focus:text-indigo-800 focus:border-transparent";this.activeTabCSS=t+" text-indigo-600 border-indigo-400",this.inactiveTabCSS=t+" border-transparent"}var t,a,o;return t=e,o=[{key:"activeTab",get:function(){return e._activeTab},set:function(t){e._activeTab=t}}],(a=[{key:"view",value:function(){return i.a.details.pending?"":m("div",{class:"-mx-6 border-b border-t"},m("nav",{class:"-mb-px flex flex-center mx-6"},m("a",{class:"referrals"===e.activeTab?this.activeTabCSS:this.inactiveTabCSS,onclick:function(){e.activeTab="referrals"}},m("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 22"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})),m("span",null,_x("Referrals","Admin - tab title","affiliate-for-woocommerce"))),m("a",{class:"payouts"===e.activeTab?this.activeTabCSS:this.inactiveTabCSS,onclick:function(){e.activeTab="payouts"}},m("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 22"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})),m("span",null,_x("Payouts","Admin - tab title","affiliate-for-woocommerce"))),m("a",{class:"products"===e.activeTab?this.activeTabCSS:this.inactiveTabCSS,onclick:function(){e.activeTab="products"}},m("svg",{class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 22","stroke-width":"2",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})),m("span",null,_x("Products","Admin - tab title","affiliate-for-woocommerce"))),m("a",{class:"visitors"===e.activeTab?this.activeTabCSS:this.inactiveTabCSS,onclick:function(){e.activeTab="visitors"}},m("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 22",xmlns:"http://www.w3.org/2000/svg"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zM12 2.25V4.5m5.834.166l-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243l-1.59-1.59"})),m("span",null,_x("Visitors","Admin - tab title","affiliate-for-woocommerce"))),m("a",{class:"profile"===e.activeTab?this.activeTabCSS:this.inactiveTabCSS,onclick:function(){e.activeTab="profile"}},m("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 22"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})),m("span",null,_x("Profile","Admin - tab title","affiliate-for-woocommerce"))),r.a.getAFWParams("isMultiTierEnabled")?m("a",{class:"multi-tier"===e.activeTab?this.activeTabCSS:this.inactiveTabCSS,onclick:function(){e.activeTab="multi-tier"}},m("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 22",xmlns:"http://www.w3.org/2000/svg"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})),m("span",null,_x("Multi-Tier","Admin - tab title","affiliate-for-woocommerce"))):""))}}])&&n(t.prototype,a),o&&n(t,o),e}();o.activeTab="referrals"},function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var i=a(12),r=a(3),n=a(2),o=a(1);function s(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){d(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function f(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"setFilters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this.startDate=document.getElementById("start-date").value,this.endDate=document.getElementById("end-date").value,"reset"==e)return n.a.data.filters={},n.a.data.q="",document.getElementById("afwc-search-field").value="",void n.a.fetch("filter_update");var a=u({},n.a.data.filters);for(var i in a)Array.isArray(a[i])&&(a[i]=s(a[i]));a[e]||(a[e]=[]),a[e].indexOf(t)>-1?(a[e]=a[e].filter((function(e){return e!==t})),a[e].length||delete a[e]):a[e].push(t),n.a.data.filters=a,n.a.data.firstcall&&n.a.data.affiliates.length<=0&&"date_filter"!==e||(n.a.data.firstcall=!1,n.a.data.start_date=this.startDate,n.a.data.end_date=this.endDate,n.a.fetch("filter_update"))}},{key:"isFiltersActive",value:function(){var e,t;return!(!(null===n.a||void 0===n.a||null===(e=n.a.data)||void 0===e?void 0:e.filters)||!Object.keys(n.a.data.filters).length)||!!(null===n.a||void 0===n.a||null===(t=n.a.data)||void 0===t?void 0:t.q)}},{key:"view",value:function(){var e=this,t=this.isFiltersActive(),a=o.a.getAFWParams("afwc_filters.commission_status")||{};return m("div",{id:"afwc-search-panel",style:"max-width:fit-content",class:"hidden absolute w-screen px-2 mt-1 transform -translate-x-1/2 left-7/12 sm:px-0 lg:max-w-xl"},m("div",{class:"rounded-lg shadow-lg"},m("div",{class:"overflow-hidden rounded-lg shadow-xs"},m("div",{class:"relative z-20 p-5 bg-white"},m("div",{class:"flex items-center p-3 -m-3 space-x-2"},m("div",{class:"flex items-center justify-center flex-shrink-0 w-10 h-10 text-indigo-600 rounded-md",title:_x("Affiliate status","searchbox icon title","affiliate-for-woocommerce")},m("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},m("path",{d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"}))),m("div",{class:"flex items-center text-xs font-medium text-yellow-800"},Object.keys(afwcDashboardParams.afwc_filters.affiliate_status).length>0?Object.keys(afwcDashboardParams.afwc_filters.affiliate_status).map((function(t,a){var i,r;return m("a",{class:"m-1 px-3 py-0.5 rounded-full cursor-pointer bg-yellow-50 hover:bg-yellow-300 "+((null===n.a||void 0===n.a||null===(i=n.a.data)||void 0===i||null===(r=i.filters)||void 0===r?void 0:r.affiliate_status)&&-1!=n.a.data.filters.affiliate_status.indexOf(t)?"border-yellow-800 border-solid border bg-yellow-300":""),"data-filter":t,onclick:function(t){t.preventDefault(),setTimeout((function(){document.getElementById("afwc-search-field").focus()}),5e3),e.setFilters("affiliate_status",t.target.getAttribute("data-filter"))}},afwcDashboardParams.afwc_filters.affiliate_status[t])})):"")),m("div",{class:"flex items-center p-3 -m-3 space-x-2"},m("div",{class:"flex items-center justify-center flex-shrink-0 w-10 h-10 text-indigo-600 rounded-md",title:_x("Commission status","searchbox icon title","affiliate-for-woocommerce")},m("svg",{class:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"},m("path",{d:"M19 7h-3V6a3 3 0 0 0-3-3h-2a3 3 0 0 0-3 3v1H5a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3zm-9-1a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v1h-4zm-6 4a1 1 0 0 1 1-1h1a2 2 0 0 1-2 2zm1 9a1 1 0 0 1-1-1v-1a2 2 0 0 1 2 2zm15-1a1 1 0 0 1-1 1h-1a2 2 0 0 1 2-2zm0-3a4 4 0 0 0-4 4H8a4 4 0 0 0-4-4v-2a4 4 0 0 0 4-4h8a4 4 0 0 0 4 4zm0-4a2 2 0 0 1-2-2h1a1 1 0 0 1 1 1zm-8 0a3 3 0 1 0 3 3 3 3 0 0 0-3-3zm0 4a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"}))),m("div",{class:"flex items-center text-xs font-medium text-green-800"},Object.keys(a).length>0?Object.keys(a).map((function(t,i){var r,o;return m("a",{class:"m-1 px-3 py-0.5 rounded-full cursor-pointer bg-green-50 hover:bg-green-300 "+((null===n.a||void 0===n.a||null===(r=n.a.data)||void 0===r||null===(o=r.filters)||void 0===o?void 0:o.commission_status)&&-1!==n.a.data.filters.commission_status.indexOf(t)?"border-green-800 border-solid border bg-green-300":""),"data-filter":t,onclick:function(t){t.preventDefault(),e.setFilters("commission_status",t.target.getAttribute("data-filter"))}},a[t])})):"")),m("div",{class:"flex items-center p-3 -m-3 space-x-2"},m("div",{class:"flex items-center justify-center flex-shrink-0 w-10 h-10 text-indigo-600 rounded-md",title:_x("Affiliate tags","searchbox icon title","affiliate-for-woocommerce")},m("svg",{class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6h.008v.008H6V6Z"}))),m("div",{class:"flex flex-wrap items-center text-xs font-medium text-blue-800"},Object.keys(afwcDashboardParams.afwc_filters.tags).length>0?Object.keys(afwcDashboardParams.afwc_filters.tags).map((function(t,a){var i,r;return m("a",{class:"m-1 px-3 py-0.5 rounded-full cursor-pointer bg-blue-50 hover:bg-blue-300 "+((null===n.a||void 0===n.a||null===(i=n.a.data)||void 0===i||null===(r=i.filters)||void 0===r?void 0:r.tags)&&-1!=n.a.data.filters.tags.indexOf(t)?"border-blue-800 border-solid border bg-blue-300":""),"data-filter":t,onclick:function(t){t.preventDefault(),e.setFilters("tags",t.target.getAttribute("data-filter"))}},afwcDashboardParams.afwc_filters.tags[t])})):""))),m("div",{class:"py-5 pl-7 pr-4 bg-gray-50"},m("div",{class:"flex items-center space-x-3"},m("div",{class:"w-4/5"},m("p",{class:"text-sm font-medium text-gray-900"},__("Search & Filter","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},__("Click on a label to filter. Type in the search box to search.","affiliate-for-woocommerce"))),m("div",{class:(t?"cursor-pointer ":"cursor-not-allowed opacity-50 ")+"text-xs border border-gray rounded-md px-2 py-0.5"},m("a",{class:t?"":"pointer-events-none",onclick:function(t){t.preventDefault(),e.setFilters("reset","")}},_x("Reset Filters","Affiliates dashboard search box filter reset button text","affiliate-for-woocommerce"))))))))}}])&&f(t.prototype,a),i&&f(t,i),e}(),g=a(5),h=a(18);function v(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return y(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function b(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"closeFeedback",value:function(){h.a.data.update_action="close",h.a.updateFeedback()}},{key:"addReview",value:function(){h.a.data.update_action="review",h.a.updateFeedback()}},{key:"view",value:function(){var e=this;return m("div",{class:"fixed inset-0 ml-36\tflex pointer-events-none items-end justify-start px-4 py-6 sm:p-6 sm:items-start sm:justify-start "+(0===h.a.flags.showFeedback?"hidden":""),style:"z-index: 200000;"},m("div",{class:"w-full max-w-sm bg-white rounded-lg shadow-lg bottom-1 fixed pointer-events-auto"},m("div",{class:"overflow-hidden rounded-lg shadow-xs text-white"},m("div",{class:"bg-gray-800 p-4"},m("div",{class:"flex items-center justify-center"},v(Array(parseInt(5))).map((function(){return m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"0",stroke:"currentColor",class:"w-8 h-8"},m("path",{"stroke-linecap":"round",fill:"#f0c930","stroke-linejoin":"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"}))}))),m("div",{class:"flex items-center py-2"},m("div",{class:"ml-2 flex-1"},m("p",{class:"text-base leading-5"},_x("Liked","Question asking if the user liked the plugin","affiliate-for-woocommerce")," ",m("span",{class:"text-white-900 font-bold"}," Affiliate for WooCommerce "),_x("plugin?","Question asking if the user liked the plugin","affiliate-for-woocommerce")),m("p",{class:"text-base leading-5 mt-3"},_x("Please leave a","Request the user to leave a review","affiliate-for-woocommerce")," ",m("span",{class:"font-semibold"},_x("5-star","Request asking the user to rate the plugin with 5 star","affiliate-for-woocommerce"))," ",_x("rating","Request asking the user to rate the plugin","affiliate-for-woocommerce")," ",m("a",{class:"cursor-pointer underline text-white-900 font-bold",onclick:function(){e.addReview()}},_x("here","Link to the review section for the plugin","affiliate-for-woocommerce"))," ",sprintf(_x("to motivate us! A big thanks from the %s team!","Thank you message from the plugin developer","affiliate-for-woocommerce"),"StoreApps"))),m("div",null,m("button",{type:"button",class:"afwc-feedback-close absolute top-0 right-0 inline-flex p-1 m-1 opacity-50 rounded-md hover:bg-gray-700 hover:opacity-100 focus:outline-none transition duration-150 ease-in-out",onclick:function(){e.closeFeedback()}},m("svg",{class:"h-6 w-6 text-white",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})))))))))}}])&&b(t.prototype,a),i&&b(t,i),e}(),x=a(19);function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],i=!0,r=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){r=!0,n=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw n}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function P(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timeout=null}var t,a,s;return t=e,(a=[{key:"refreshRoute",value:function(){var e,t,a;if(!afwcDateFunctions.isValidDate([n.a.data.start_date,n.a.data.end_date],"-"))return n.a.invalidDate=!0;n.a.invalidDate=!1;var i=(null===(e=m)||void 0===e||null===(t=e.route)||void 0===t||null===(a=t.get)||void 0===a?void 0:a.call(t))||"",r=o.a.buildRouteFilterValue(i,{"from-date":n.a.data.start_date,"to-date":n.a.data.end_date});i!==r&&(m.route.set(r),g.a.showLoader=!0,n.a.isKPILoading=!0)}},{key:"setSearchTerm",value:function(e){clearTimeout(this.timeout),n.a.data.start_date=document.getElementById("start-date").value,n.a.data.end_date=document.getElementById("end-date").value,n.a.data.q=e,""===e&&n.a.fetch(),e.length<3||n.a.data.firstcall&&n.a.data.affiliates.length<=0||(g.a.showLoader=!0,n.a.data.firstcall=!1,this.timeout=setTimeout((function(){n.a.fetch()}),4e3))}},{key:"smartDatesHandler",value:function(e){this.smartDatesDisplayHandler();var t=afwcDateFunctions.getDate(e);n.a.data.start_date=t.startDate||n.a.data.start_date,n.a.data.end_date=t.endDate||n.a.data.end_date,this.refreshRoute()}},{key:"smartDatesDisplayHandler",value:function(e){this.class="hidden",this.dropdownId="afwc-smart-dates-dropdown-list",document.getElementById(this.dropdownId).classList.contains(this.class)?!e&&document.getElementById(this.dropdownId).classList.remove(this.class):document.getElementById(this.dropdownId).classList.add(this.class)}},{key:"defaultDatePickerHandler",value:function(e){try{e.target.showPicker()}catch(e){console.warn("Cannot trigger date picker")}}},{key:"getDateFilters",value:function(){return[{today:_x("Today","smart dates option for today","affiliate-for-woocommerce"),yesterday:_x("Yesterday","smart dates option for yesterday","affiliate-for-woocommerce")},{this_week:_x("This Week","smart dates option for this week","affiliate-for-woocommerce"),last_week:_x("Last Week","smart dates option for last week","affiliate-for-woocommerce"),last_4_weeks:_x("Last 4 Weeks","smart dates option for last 4 weeks","affiliate-for-woocommerce")},{this_month:_x("This Month","smart dates option for this month","affiliate-for-woocommerce"),last_month:_x("Last Month","smart dates option for last month","affiliate-for-woocommerce"),"3_months":_x("3 Months","smart dates option for 3 months","affiliate-for-woocommerce"),"6_months":_x("6 Months","smart dates option for 6 months","affiliate-for-woocommerce")},{this_year:_x("This Year","smart dates option for this year","affiliate-for-woocommerce"),last_year:_x("Last Year","smart dates option for last year","affiliate-for-woocommerce")}]}},{key:"view",value:function(e){var t=this,a=this.getDateFilters()||[];return m("[",null,m("div",{class:"bg-gray-800"},m("nav",{class:"max-w-7xl mx-auto px-4 xl:px-8 py-2 lg:py-2"},m("div",{class:"flex flex-col lg:items-center lg:flex-row lg:justify-between"},m("div",{class:"flex items-center"},m("div",{class:"flex-shrink-0"},m("h2",{class:"text-2xl font-bold leading-7 text-gray-100 sm:text-3xl sm:leading-9"},__("Affiliates","affiliate-for-woocommerce"))),m("div",{class:""},m("div",{class:"ml-10 lg:ml-6 xl:ml-10 flex items-baseline"},m("a",{href:"#",class:"px-3 py-2 rounded-md text-md mr-2 font-medium text-white focus:outline-none focus:text-white focus:bg-gray-700 "+(m.route.get().startsWith("/dashboard")?" bg-gray-900":""),onclick:function(e){e.preventDefault(),n.a.reset(),m.route.set("/")}},_x("Dashboard","Navigation menu title for main dashboard in admin dashboard","affiliate-for-woocommerce")),m("a",{href:"#",class:"px-3 py-2 rounded-md text-md mr-2 font-medium text-white focus:outline-none focus:text-white focus:bg-gray-700 "+("/campaigns"===m.route.get()?" bg-gray-900":""),onclick:function(e){e.preventDefault(),i.a.destroyCampaignDetails(),m.route.set("/campaigns")}},_x("Campaigns","Navigation menu title for campaigns in admin dashboard","affiliate-for-woocommerce")),m("a",{href:"#",class:"px-3 py-2 rounded-md text-md font-medium text-white focus:outline-none focus:text-white focus:bg-gray-700 "+("/plans"===m.route.get()?" bg-gray-900":""),onclick:function(e){m.route.set("/plans"),e.preventDefault()}},_x("Plans","Navigation menu title for plans in admin dashboard","affiliate-for-woocommerce")),m("a",{href:"#",class:"px-3 py-2 rounded-md text-md font-medium text-white focus:outline-none focus:text-white focus:bg-gray-700 "+("/pending-payouts"===m.route.get()?" bg-gray-900":""),onclick:function(e){m.route.set("/pending-payouts"),e.preventDefault()}},_x("Pending Payouts","Navigation menu title for Payouts in admin dashboard","affiliate-for-woocommerce"))))),m("div",{class:"flex items-center text-right mt-2 lg:mt-0"},"/campaigns"===m.route.get()?m("div",{class:"flex items-center mt-2 text-right lg:mt-0"},m("div",{class:"mr-4"},m("span",{class:"rounded-md shadow-sm"},m("button",{type:"button",class:"inline-flex justify-center w-full px-4 py-1 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-500 focus:outline-none focus:shadow-outline-indigo",onclick:function(){i.a.newCampaign()}},m("svg",{class:"w-5 h-5 mr-2",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24","stroke-width":"2"},m("path",{d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})),__("Add a Campaign","affiliate-for-woocommerce"))))):"","/plans"===m.route.get()?m("div",{class:"flex items-center mt-2 text-right lg:mt-0"},m("div",{class:"mr-4"},m("span",{class:"rounded-md shadow-sm"},m("button",{type:"button",class:"inline-flex justify-center w-full px-4 py-1 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-500 focus:outline-none focus:shadow-outline-indigo",onclick:function(){r.a.newCommission()}},m("svg",{class:"w-5 h-5 mr-2",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24","stroke-width":"2"},m("path",{d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})),__("Add a Plan","affiliate-for-woocommerce"))))):"",m.route.get().startsWith("/dashboard")?m("div",{class:"flex items-center px-1 text-sm text-gray-400 lg:mx-2 xl:mx-2"},m("div",{class:"flex py-1 lg:ml-0 bg-gray-900 lg:mx-2 xl:mx-3 rounded-md"},m("div",{class:"relative w-full"},m("div",{class:"absolute inset-y-0 left-0 flex items-center pointer-events-none"},m("svg",{class:"w-5 h-5 ml-1",fill:"currentColor",viewBox:"0 0 20 20"},m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"}))),m("input",{onfocusin:function(){document.getElementById("afwc-search-panel").classList.remove("hidden")},oninput:function(e){t.setSearchTerm(e.target.value)},id:"afwc-search-field",class:"py-1 pr-3 text-xs bg-transparent border-transparent form-input pl-7 focus:bg-white focus:border-gray-200",placeholder:_x("Search & Filter","placeholder for search & filter","affiliate-for-woocommerce")}))),m("div",{class:"afwc-date-filter flex items-center bg-white text-gray-700 text-sm lg:mx-2 xl:mx-3 border-2 rounded-md"+(n.a.invalidDate?" border-red-400":" border-gray-400")},m("div",{class:"flex items-center"},m("div",null,m("input",{id:"start-date",type:"date",min:"2000-01-01",max:"9999-12-31",value:n.a.data.start_date,class:"form-input w-20 sm:leading-5 pt-2 pb-1 px-1 text-xs bg-transparent border-transparent focus:outline-none focus:shadow-none cursor-pointer",placeholder:_x("start date","placeholder","affiliate-for-woocommerce"),onchange:function(e){n.a.data.start_date=e.target.value||"",t.refreshRoute()},onfocusin:function(e){t.defaultDatePickerHandler(e),t.smartDatesDisplayHandler(!0)}})),m("div",{class:"px-1 sm:leading-5 pointer-events-none text-gray-400"},__("to","affiliate-for-woocommerce")),m("div",null,m("input",{id:"end-date",type:"date",min:"2000-01-01",max:"9999-12-31",value:n.a.data.end_date,class:"form-input w-20 sm:leading-5 pt-2 pb-1 px-1 text-xs bg-transparent border-transparent focus:outline-none focus:shadow-none cursor-pointer",placeholder:_x("end date","placeholder","affiliate-for-woocommerce"),onchange:function(e){n.a.data.end_date=e.target.value||"",t.refreshRoute()},onfocusin:function(e){t.defaultDatePickerHandler(e),t.smartDatesDisplayHandler(!0)}})),m("div",{class:"border-l border-gray-300"},m("svg",{id:"afwc-smart-dates-dropdown-icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 px-1 text-gray-500 cursor-pointer focus:outline-none cursor-pointer",onclick:function(){t.smartDatesDisplayHandler()}},m("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})),m("ul",{id:"afwc-smart-dates-dropdown-list",class:"afwSmartDatesDropdown absolute text-left bg-white border border-gray-200 rounded-lg shadow-lg py-2 mt-1 cursor-pointer hidden"},Array.isArray(a)&&a.map((function(e,i){return m("div",{key:i},Object.entries(e).map((function(e,a){var i=_(e,2),r=i[0],n=i[1];return m("li",{onclick:function(){return t.smartDatesHandler(r)},key:a},m("span",null,n))})),i<a.length-1&&m("li",{class:"separator my-2 h-px bg-gray-200"}))}))))))):"",m("div",{class:"flex items-center ml-4 lg:ml-2"},m("a",{href:afwcDashboardParams.docLink||afwcDashboardParams.afwDocLink,target:"_blank",title:_x("Docs","Title for doc link","affiliate-for-woocommerce"),class:"p-1 ml-3 border-transparent text-gray-400 rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 transition duration-150 ease-in-out"},m("svg",{class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"}))),m("a",{href:afwcDashboardParams.afwManageTagsLink,target:"_blank",title:_x("Manage affiliate tags","Title for manage affiliate tag page link","affiliate-for-woocommerce"),class:"p-1 ml-3 border-transparent text-gray-400 rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 transition duration-150 ease-in-out"},m("svg",{class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6h.008v.008H6V6Z"}))),m("a",{href:afwcDashboardParams.settingsLink,target:"_blank",title:__("Settings","affiliate-for-woocommerce"),class:"ml-3 p-1 border-transparent text-gray-400 rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 transition duration-150 ease-in-out"},m("svg",{class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))))))),m(p,null),g.a.showLoader?m(g.a,null):null,m(w,null)),(afwcDashboardParams.show_admin_notice||afwcDashboardParams.show_admin_notice_for_dates)&&afwcDashboardParams.is_action_scheduler_exists?m(x.a,null):null)}}])&&P(t.prototype,a),s&&P(t,s),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a(1);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.params=t||{},this.affiliateID=this.params.id||0,e.details={},e.flags={loading:!1}}var t,a,o;return t=e,o=[{key:"details",get:function(){return e._details},set:function(t){e._details=t}},{key:"flags",get:function(){return e._flags},set:function(t){e._flags=t}}],(a=[{key:"fetch",value:function(){this.affiliateID&&(e.flags.loading=!0,i.a.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"affiliate_chain_data",security:i.a.getAFWParams("security.dashboard.multiTierData")||"",affiliate_id:this.affiliateID},callback:function(t){if("Success"===t.ACK){var a=t.data||{};Object.entries(a).length>0&&(e.details=a.multiTierChain||{})}e.flags.loading=!1}}))}}])&&n(t.prototype,a),o&&n(t,o),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a(1);function r(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize()}var t,a,n;return t=e,n=[{key:"initialize",value:function(){e.flags={showFeedback:0},e.data={update_action:""}}},{key:"updateFeedback",value:function(){i.a.requestHandler({requestData:{cmd:"update_feedback",security:i.a.getAFWParams("security.dashboard.updateFeedback")||"",dashboard:"afwc_dashboard_controller",update_action:e.data.update_action||""},callback:function(t){"Success"==t.ACK&&(e.flags.showFeedback=0,afwcDashboardParams.can_ask_for_feedback=0,"review"===e.data.update_action&&window.open(afwcDashboardParams.review_link))}})}}],(a=null)&&r(t.prototype,a),n&&r(t,n),e}();n.initialize()},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a(1);function r(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=function(){function e(t){var a;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.showLoader=!1,this.progress=0,this.interval=0,this.isProcessRunning=parseInt(i.a.getAFWParams("is_process_running"))>0,this.isDashboardNotice=t.attrs.dashboardNotice||!1,this.type=(null==t||null===(a=t.attrs)||void 0===a?void 0:a.type)||"","setting_deprecated"===this.type){var r=i.a.getAFWParams("subscriptionNotice")||"";r&&"string"==typeof r&&(this.msg=r,this.actionText=_x("Dismiss","Text to dismiss the notice","affiliate-for-woocommerce"),this.event=this.dismissRecurringCommissionPlan)}else if("plan_updated"===this.type){var n=i.a.getAFWParams("planUpdateNotice")||"";n&&"string"==typeof n&&(this.title=_x("📣 Big update:","Title for the plan updated notice","affiliate-for-woocommerce"),this.msg=n,this.actionText=_x("Review plans","Link to open plan dashboard","affiliate-for-woocommerce"),this.dismissText=_x("Dismiss","Text to dismiss the notice","affiliate-for-woocommerce"),this.event=function(){return m.route.set("/plans")},this.dismissEvent=this.dismissPlanUpdate)}else!0===this.isDashboardNotice?i.a.getAFWParams("show_masspay_deprecated_notice")&&(this.msg=_x("If you have already switched to the new PayPal Payout API,","ask to check whether switched to the PayPal Payout API","affiliate-for-woocommerce"),this.actionText=_x("run migration.","Link text for PayPal Payout migration","affiliate-for-woocommerce"),this.event=this.checkPayoutMethod):!0===this.isProcessRunning?(this.msg=__("Migration process is running:","affiliate-for-woocommerce"),this.startProgressTracking()):(this.msg=this.msg?this.msg:__("[Important] Affiliate for WooCommerce requires a database migration. To start, please click ","affiliate-for-woocommerce"),this.actionText=__("Run Migration.","affiliate-for-woocommerce"),this.event=this.runMigration)}var t,a,n;return t=e,(a=[{key:"dismissRecurringCommissionPlan",value:function(){var e=this;m.request({method:"POST",url:i.a.getAFWParams("ajaxurl")||"",params:{action:"afwc_dismiss_recurring_setting_deprecated_notice",security:i.a.getAFWParams("security.commissions.dismissRecurringSettingDeprecatedNotice")||""},responseType:"json"}).then((function(){return e.hideNotice()}))}},{key:"dismissPlanUpdate",value:function(){var e=this;m.request({method:"POST",url:i.a.getAFWParams("ajaxurl")||"",params:{action:"afwc_dismiss_plan_update_notice",security:i.a.getAFWParams("security.dashboard.dismissPlanUpdateNotice")||""},responseType:"json"}).then((function(){return e.hideNotice()}))}},{key:"runMigration",value:function(e){var t=this;this.isProcessRunning?e.preventDefault():(this.progress=0,this.isProcessRunning=!0,this.msg=__("Migration process is running:","affiliate-for-woocommerce"),m.request({method:"POST",url:ajaxurl,params:{action:"afwc_run_migration"},withCredentials:!1,responseType:"json"}).then((function(e){t.startProgressTracking()})))}},{key:"checkPayoutMethod",value:function(){var e=this;m.request({method:"POST",url:i.a.getAFWParams("ajaxurl")||"",params:{action:"afwc_update_payout_method",security:i.a.getAFWParams("security.dashboard.updatePayoutMethod")||""},responseType:"json"}).then((function(){return e.hideNotice()}))}},{key:"hideNotice",value:function(){this.msg=!1}},{key:"startProgressTracking",value:function(){var e=this;this.interval=setInterval((function(){return"All"!==e.progress&&e.checkProgress()}),1e4)}},{key:"checkProgress",value:function(){var e=this;m.request({method:"POST",url:ajaxurl,params:{action:"afwc_check_migration_process"},responseType:"json"}).then((function(t){e.progress=t.afwc_order_migration_status||0,"All"===e.progress&&(e.msg=__("Migration done successfully.","affiliate-for-woocommerce"),setTimeout((function(){e.hideNotice(),m.redraw()}),5e3))}))}},{key:"view",value:function(){var e=this;return this.msg?m("div",{id:"afwc-migration-notice",class:"m-5 w-auto bg-white px-6 py-4 border-l-4 border-blue-700\t"},this.title?m("[",null,m("p",{class:"text-base font-medium text-gray-600"},this.title),m("p",{class:"pb-4"})):"",!0===this.isDashboardNotice?m("[",null,m("p",{class:"text-sm font-medium text-gray-600"},_x("[PayPal Payouts] PayPal have deprecated MassPay API and it will be removed soon. So we recommend you switch to a new Payout API for smoother commission payouts.","PayPal Payout migration notice","affiliate-for-woocommerce")),m("p",{class:"text-sm font-medium text-gray-600"},_x("Refer to","refer to the provided doc","affiliate-for-woocommerce"),m("a",{class:"cursor-pointer px-1 text-sm font-medium leading-6 text-indigo-600 hover:text-indigo-800",target:"_blank",href:afwcDashboardParams.afwDocLink+"how-to-payout-commissions-in-affiliate-for-woocommerce/"},_x("this doc","link text for the doc","affiliate-for-woocommerce")),_x("for more details.","text for more details regarding PayPal API migration","affiliate-for-woocommerce"))):"",m("span",{class:"text-sm font-medium text-gray-600 "},this.msg||""),"plan_updated"===this.type?m("[",null,m("p",{class:"text-sm font-medium text-gray-600 "},_x("Please review your commission plans and place a test order to verify everything is working as expected.","Notice text for affiliate commission rule calculation update","affiliate-for-woocommerce")),m("p",{class:"pt-4"},m("button",{type:"button",class:"justify-center px-4 pt-1 pb-2 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-500 focus:outline-none focus:shadow-outline-indigo",onclick:function(t){return e.event.call(e)}},this.actionText),m("a",{class:"cursor-pointer px-4 text-sm font-medium leading-6 text-gray-600 hover:text-gray-800",onclick:function(){return e.dismissEvent.call(e)}},this.dismissText))):m("[",null,m("a",{class:(this.isProcessRunning?"cursor-not-allowed text-indigo-500 hidden ":"")+" cursor-pointer px-1 text-sm font-medium leading-6 text-indigo-600 hover:text-indigo-800 ",onclick:function(t){e.event.call(e,t)}},this.actionText),m("span",{id:"afwc-progress",class:(this.isProcessRunning?"":"invisible")+" text-sm font-medium text-gray-600 pl-2"}," ",this.progress?this.progress+__(" tasks completed","affiliate-for-woocommerce"):__(" tasks starting","affiliate-for-woocommerce")))):""}}])&&r(t.prototype,a),n&&r(t,n),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a(0),r=a(1);function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),e.initialize(),this.params=t||{}}return s(e,null,[{key:"initialize",value:function(){e.flags={loadMore:!0}}}]),s(e,[{key:"fetch",value:function(){var t=this;afwcDateFunctions.isValidDate([this.params.startDate,this.params.endDate],"-")&&(this.dataLoaded=this.params.currentPage&&1<parseInt(this.params.currentPage),this.dataLoaded||i.a.triggerLoader("products",!0),r.a.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"products",security:r.a.getAFWParams("security.dashboard.productsDetails")||"",from_date:afwcDateFunctions.getDateTime(this.params.startDate,{dayStart:!0})||"",to_date:afwcDateFunctions.getDateTime(this.params.endDate,{dayEnd:!0})||"",affiliate_id:this.params.id||0,page:this.params.currentPage||1},callback:function(a){a&&a.data&&Object.keys(a.data).length>0&&(i.a.details.products=t.dataLoaded?i.a.details.products.concat(a.data):a.data),t.dataLoaded||i.a.triggerLoader("products",!1),e.flags.loadMore=a&&a.meta&&!0===a.meta.load_more}}))}}],[{key:"flags",get:function(){return e._flags},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e._flags=t}}]),e}();l.initialize()},function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a(0),r=a(1);function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),e.initialize(),this.params=t||{}}return s(e,null,[{key:"initialize",value:function(){e.flags={loadMore:!0}}}]),s(e,[{key:"fetch",value:function(){var t=this;afwcDateFunctions.isValidDate([this.params.startDate,this.params.endDate],"-")&&(this.dataLoaded=this.params.currentPage&&1<parseInt(this.params.currentPage),this.dataLoaded||i.a.triggerLoader("visitors",!0),r.a.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"visitor_details",security:r.a.getAFWParams("security.dashboard.visitorDetails")||"",from_date:afwcDateFunctions.getDateTime(this.params.startDate,{dayStart:!0})||"",to_date:afwcDateFunctions.getDateTime(this.params.endDate,{dayEnd:!0})||"",affiliate_id:this.params.id||0,page:this.params.currentPage||1},callback:function(a){a&&a.data&&a.data.length>0&&(i.a.details.visitors=t.dataLoaded?i.a.details.visitors.concat(a.data):a.data),t.dataLoaded||i.a.triggerLoader("visitors",!1),e.flags.loadMore=a&&a.meta&&!0===a.meta.load_more}}))}}],[{key:"flags",get:function(){return e._flags},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e._flags=t}}]),e}();l.initialize()},function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a(0),r=a(1),n=a(4);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.params=t||{}}var t,a,l;return t=e,(a=[{key:"fetch",value:function(){i.a.triggerLoader("profile",!0),r.a.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"profile_data",security:r.a.getAFWParams("security.dashboard.profileData")||"",affiliate_id:this.params.id||0},callback:function(e){if("Success"===e.ACK){var t=e.data||{};Object.entries(t).length>0&&(i.a.details.customUrlIdentifierData=t.custom_url_identifier_data||{},i.a.details.identifier=t.identifier||"",i.a.details.isReferralCouponEnabled=t.is_referral_coupon_enabled||"",i.a.details.coupons=t.coupons||{},i.a.details.allAvailableTags=t.all_available_tags||{},i.a.details.tags=t.tags||{},i.a.details.parentAffiliateData=t.parent_affiliate_data||"",i.a.details.isLandingPageEnabled=t.is_landing_page_enabled||"no",i.a.details.landingPages=t.landing_pages||{},i.a.details.isLTCEnabled=t.is_ltc_enabled||"no",i.a.details.isLTCEnabledForAffiliate=t.is_ltc_enabled_for_affiliate||!1,i.a.details.ltcCustomers=t.ltc_customers||{},i.a.details.paypalEmailData=t.paypal_email_data||{},i.a.details.automaticPayoutData=t.automatic_payout_data||{},i.a.details.registrationFormData=t.registration_form_data||{},i.a.details.payoutMethodTitle=t.payout_method_title||"")}i.a.triggerLoader("profile",!1)}})}},{key:"unlinkCustomersLTC",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&(n.a.hide(),i.a.details.ltcCustomers[e].isProcessing=!0,r.a.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"unlink_ltc_customers",security:r.a.getAFWParams("security.dashboard.unlinkLTCCustomers")||"",affiliate_id:this.params.id||0,customer:e},callback:function(t){var a="Success"===t.ACK;a&&e in i.a.details.ltcCustomers?delete i.a.details.ltcCustomers[e]:i.a.details.ltcCustomers[e].isProcessing=!1,n.a.show({status:a?"success":"error",message:a?_x("Customer unlinked successfully","Success message for removal of linked lifetime commission customer","affiliate-for-woocommerce"):t.msg||_x("Customer can't be unlinked","Error message for failing of the unlinking the customer for lifetime commissions","affiliate-for-woocommerce")})}}))}},{key:"linkCustomersLTC",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e){n.a.hide();var t=e.id||e.email;t&&r.a.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"link_ltc_customers",security:r.a.getAFWParams("security.dashboard.linkLTCCustomers")||"",affiliate_id:this.params.id||0,customer:t},callback:function(a){var r="Success"===a.ACK;r&&(i.a.details.ltcCustomers[t]=e),n.a.show({status:r?"success":"error",message:r?_x("Customer linked successfully","Success message after linking the customer for lifetime commissions","affiliate-for-woocommerce"):a.msg||_x("Customer can't be linked","Error message for failing of linking the customer for lifetime commissions","affiliate-for-woocommerce")})}})}}}])&&s(t.prototype,a),l&&s(t,l),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return qe}));var i=a(16),r=a(2);function n(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"showNumberPlaceholder",value:function(){return m("div",{class:"afw-placeholder h-8 w-8"})}},{key:"showTextPlaceholder",value:function(){return m("div",{class:"afw-placeholder h-4 w-16"})}},{key:"view",value:function(){return m("header",{class:"bg-white shadow"},m("div",{class:"max-w-7xl mx-auto py-8 sm:px-3 xl:px-8"},m("section",{class:"md:flex md:items-center md:justify-between"},m("div",{class:"flex sm:items-top"},m("div",{class:"font-bold leading-tight text-gray-900"},m("p",{class:"text-5xl leading-none font-bold text-indigo-700 flex items-center "},r.a.isKPILoading?this.showNumberPlaceholder():m("[",null,m("span",{class:"text-2xl font-normal mr-1"},afwcDashboardParams.currencySymbol||"")," ",r.a.data.kpi.net_affiliates_sales||0," ",m("span",{class:"text-2xl font-medium ml-1"}))),m("p",{class:"mt-1 leading-tight font-medium text-gray-500"},r.a.isKPILoading?this.showTextPlaceholder():sprintf(_x("%1$s%% of Total Revenue","Affiliates KPI label: Total Revenue","affiliate-for-woocommerce"),r.a.data.kpi.percent_of_total_sales||0)))),m("div",{class:"flex sm:items-center text-gray-400"},m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},r.a.isKPILoading?this.showNumberPlaceholder():r.a.data.kpi.affiliates_count||0),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},r.a.isKPILoading?this.showTextPlaceholder():_x("Affiliates","Affiliates KPI label: Number of affiliate","affiliate-for-woocommerce"))),m("svg",{class:"fill-current w-3 h-3 mx-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},r.a.isKPILoading?this.showNumberPlaceholder():r.a.data.kpi.visitors_count||0),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},r.a.isKPILoading?this.showTextPlaceholder():_x("Visitors","Affiliates KPI label: Visitors","affiliate-for-woocommerce"))),m("svg",{class:"fill-current w-3 h-3 mx-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},r.a.isKPILoading?this.showNumberPlaceholder():r.a.data.kpi.all_customers_count||0),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},r.a.isKPILoading?this.showTextPlaceholder():_x("Customers","Affiliates KPI label: Customers","affiliate-for-woocommerce"))),m("svg",{class:"fill-current w-3 h-3 mx-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},r.a.isKPILoading?this.showNumberPlaceholder():"".concat(r.a.data.kpi.conversion_rate||0,"%")),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},r.a.isKPILoading?this.showTextPlaceholder():_x("Conversion Rate","Affiliates KPI label: Conversion Rate","affiliate-for-woocommerce")))))))}}])&&n(t.prototype,a),i&&n(t,i),e}();function s(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"view",value:function(){return m("div",{class:"my-3 mx-3 py-2 rounded-md"},m("div",{class:"flex items-center"},m("div",{class:"flex-shrink-0 flex items-center justify-center h-6 w-6 rounded-full bg-teal-50 text-teal-500"},m("svg",{class:"h-4 w-4",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))),m("h3",{class:"ml-1 text-base leading-6 font-medium text-teal-500"},__("Pending Payouts","affiliate-for-woocommerce"))),m("div",{class:"mt-2"},m("p",{class:"text-sm leading-5 text-gray-400"},r.a.data.kpi.unpaid_affiliates," ",1===parseInt(r.a.data.kpi.unpaid_affiliates)?__("affiliate","affiliate-for-woocommerce"):__("affiliates","affiliate-for-woocommerce")," ",__("needs to be paid total commission of","affiliate-for-woocommerce")," ",afwcDashboardParams.currencySymbol,r.a.data.kpi.unpaid_commissions,".")))}}])&&s(t.prototype,a),i&&s(t,i),e}();function c(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"loadAffiliates",value:function(){r.a.data.currentPage=parseInt(r.a.data.currentPage)+1,r.a.data.action="load_more",r.a.fetch()}},{key:"view",value:function(){var e=this;return m("nav",{class:"py-3 text-gray-500 max-h-screen overflow-auto"},m("ul",null,r.a.data.affiliates.map((function(e,t){return m("li",{class:(0===t?"rounded-tl-lg ":r.a.data.affiliates.length-1===t?"rounded-bl-lg ":"")+"border-b border-gray-200"+(e.pending?" bg-red-100":" bg-gray-50")+" overflow-hidden",onclick:function(){r.a.data.currentAffiliateID=e.affiliate_id}},m("a",{class:"block py-3 focus:outline-none transition duration-150 ease-in-out cursor-pointer"+(e.pending?" hover:bg-red-50 focus:bg-red-50":" hover:bg-white focus:bg-white")+(r.a.data.currentAffiliateID==e.affiliate_id?e.pending?" bg-red-50 outline-none":" bg-white outline-none":"")},m("div",{class:"flex items-center pl-4 py-2"},m("div",{class:(r.a.data.currentAffiliateID===e.affiliate_id?"text-gray-700 ":"")+"font-medium pr-4 flex-1 sm:truncate"},e.name),m("div",{class:"text-gray-500 text-sm leading-none numeric"},afwcDashboardParams.currencySymbol,e.earned_commissions),m("div",{class:"mx-2"},m("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},m("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"}))))))}))),r.a.data.loadMore&&r.a.data.affiliates.length>0&&r.a.data.affiliates.length%afwcDashboardParams.affiliate_list_limit==0?m("div",{class:"my-3"},m("div",{class:"pb-2 text-center border-b border-gray-200 text-center"},m("a",{class:"py-2 px-4 text-sm font-medium text-indigo-400 uppercase cursor-pointer",onclick:function(){e.loadAffiliates()}},__("Load More","affiliate-for-woocommerce")))):"")}}])&&c(t.prototype,a),i&&c(t,i),e}(),d=a(0),f=a(13);function p(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.isOrdersTab=!0,this.tabCss="whitespace-no-wrap py-4 px-1 border-b-2 font-medium text-sm text-gray-400 leading-5 focus:outline-none focus:text-indigo-800 focus:shadow-none focus:border-indigo-700"}var t,a,i;return t=e,i=[{key:"isOrdersTab",get:function(){return e._isOrdersTab},set:function(t){e._isOrdersTab=t}}],(a=[{key:"view",value:function(){return m("header",{class:"flex justify-between border-b border-gray-200 -mx-6 px-6"},m("div",{class:"flex-shrink-0 p-1 border-2 border-transparent self-center mb-2"},d.a.details.avatarURL?m("img",{class:"rounded-full",src:d.a.details.avatarURL,alt:_x("Affiliate profile image","affiliate profile image","affiliate-for-woocommerce"),height:"60",width:"60"}):""),m("div",{class:"flex-1 ml-3 mb-2"},m("div",{class:"flex items-center gap-4"},m("h3",{class:"text-l block font-bold leading-6 text-gray-900 sm:py-2 sm:text-3xl sm:leading-6 sm:truncate"},d.a.details.name),m("span",{class:d.a.details.pending?"invisible ":"visible hidden xl:inline-flex px-2 text-xs leading-5 font-semibold rounded-full bg-teal-100 text-teal-500"},_x("Net Unpaid Commission","Admin - KPI label for affiliate's net unpaid commission","affiliate-for-woocommerce"),": ",afwcDashboardParams.currencySymbol,d.a.details.stats.current.unpaid_commissions||"0.00")),d.a.details.signupDate?m("div",{class:"flex items-center pt-1 text-gray-600 text-xs gap-1"},m("span",null,_x("Since:","Admin - signup date label","affiliate-for-woocommerce")),m("span",null,d.a.details.signupDate)):"",d.a.details.referralURL?m("div",{class:"flex items-center py-1 text-gray-600 text-xs gap-1"},m("span",null,_x("Referral Link:","Admin - Referral link label","affiliate-for-woocommerce")),m("span",{"data-bs-toggle":"tooltip",title:_x("Click to copy","Admin - tooltip title for copying referral link","affiliate-for-woocommerce"),onclick:function(e){f.a.doCopy(d.a.details.referralURL||"")},class:"cursor-pointer"},m("code",null,d.a.details.referralURL))):""),m("div",{class:"flex items-center gap-3 mb-2"},m("a",{href:"mailto:"+d.a.details.email,target:"_blank",title:"Email Affiliate",class:"p-1 border-2 border-transparent text-gray-400 rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 transition duration-150 ease-in-out"},m("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",class:"w-6 h-6"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"}))),m("a",{href:d.a.details.editURL,target:"_blank",title:"Manage Affiliate",class:"p-1 border-2 border-transparent text-gray-400 rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 transition duration-150 ease-in-out"},m("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})))))}}])&&p(t.prototype,a),i&&p(t,i),e}();function h(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function v(e,t,a){return t&&h(e.prototype,t),a&&h(e,a),e}g.isOrdersTab=!0;var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()}return v(e,[{key:"initialize",value:function(){this.revenue=d.a.details.stats.current.net_affiliates_sales||"0.00",this.commission=String(d.a.details.stats.current.earned_commissions||"0.00"),this.gross_commission=String(d.a.details.stats.current.gross_commissions||"0.00")}}]),v(e,[{key:"showNumberPlaceholder",value:function(){return m("div",{class:"afw-placeholder h-4 w-8"})}},{key:"showTextPlaceholder",value:function(){return m("div",{class:"afw-placeholder h-4 w-16"})}},{key:"view",value:function(){return this.initialize(),m("section",{class:"flex flex-col lg:flex-row lg:items-center lg:justify-between text-sm my-6 text-gray-800"},m("div",{class:"flex items-center justify-between"},m("div",{class:"mr-3"},m("p",{class:"text-2xl leading-none font-medium"},d.a.isLoading("KPI")?this.showNumberPlaceholder():d.a.details.stats.current.visitors_count||0),m("p",{class:"mt-1 leading-6 text-gray-400"},d.a.isLoading("KPI")?this.showTextPlaceholder():_x("Visitors","Affiliate KPI label: Visitors","affiliate-for-woocommerce"))),m("svg",{class:"text-gray-300 fill-current w-3 h-3 mx-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:"ml-3"},m("p",{class:"text-2xl leading-none font-medium"},d.a.isLoading("KPI")?this.showNumberPlaceholder():d.a.details.stats.current.customers_count||0),m("p",{class:"mt-1 leading-6 text-gray-400"},d.a.isLoading("KPI")?this.showTextPlaceholder():_x("Customers","Affiliate KPI label: Customers","affiliate-for-woocommerce"))),m("svg",{class:"text-gray-300 fill-current w-3 h-3 mx-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:"ml-3"},m("p",{class:"text-2xl leading-none font-medium"},d.a.isLoading("KPI")?this.showNumberPlaceholder():"".concat(d.a.details.stats.current.conversion_rate||0,"%")),m("p",{class:"mt-1 leading-6 text-gray-400"},d.a.isLoading("KPI")?this.showTextPlaceholder():_x("Conversion","Affiliate KPI label: Conversion","affiliate-for-woocommerce")))),m("div",{class:"flex items-center justify-between mt-6 lg:mt-0"},m("div",{class:"flex sm:items-center"},m("div",{class:""},m("p",{class:"text-2xl leading-none font-medium flex items-center"},d.a.isLoading("KPI")?this.showNumberPlaceholder():m("[",null,m("span",{class:"text-sm font-normal text-gray-600 mr-1"},afwcDashboardParams.currencySymbol||"")," ",this.revenue.split(".")[0]," ",m("span",{class:"text-sm"},".",this.revenue.split(".")[1]))),m("p",{class:"mt-1 leading-6 text-gray-400"},d.a.isLoading("KPI")?this.showTextPlaceholder():_x("Revenue","Affiliate KPI label: Revenue","affiliate-for-woocommerce")))),m("svg",{class:"text-gray-300 fill-current w-3 h-3 mx-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-medium flex items-center"},d.a.isLoading("KPI")?this.showNumberPlaceholder():m("[",null,m("span",{class:"text-sm font-normal text-gray-600 mr-1"},afwcDashboardParams.currencySymbol||"")," ",this.gross_commission.split(".")[0]," ",m("span",{class:"text-sm"},".",this.gross_commission.split(".")[1]))),m("p",{class:"mt-1 leading-6 text-gray-400"},d.a.isLoading("KPI")?this.showTextPlaceholder():_x("Gross Commission","Affiliate KPI label: Gross Commission","affiliate-for-woocommerce"))),m("svg",{class:"text-gray-300 fill-current w-3 h-3 mx-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-medium flex items-center"},d.a.isLoading("KPI")?this.showNumberPlaceholder():m("[",null,m("span",{class:"text-sm font-normal text-gray-600 mr-1"},afwcDashboardParams.currencySymbol||"")," ",this.commission.split(".")[0]," ",m("span",{class:"text-sm"},".",this.commission.split(".")[1]))),m("p",{class:"mt-1 leading-6 text-gray-400"},d.a.isLoading("KPI")?this.showTextPlaceholder():_x("Net Commission","Affiliate KPI label: Net Commission","affiliate-for-woocommerce")))))}}]),e}(),b=a(15),w=a(1);function x(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize()}var t,a,i;return t=e,i=[{key:"initialize",value:function(){e.selectedRecords={ids:{},commission:0,unpaidCommission:0,selectAll:!1,payoutCurrencySymbol:"",payoutCurrencyCode:"",IsMultiCurrencyDetected:!1}}},{key:"isMultiCurrencySelected",value:function(){var t="";return!!e.selectedRecords.ids&&Boolean(Object.keys(e.selectedRecords.ids).find((function(a){var i=e.selectedRecords.ids[a].currency||"";return(t=t||i)!==i})))}},{key:"handleRowSelection",value:function(t,a){t=Array.isArray(t)?t:[t],e.selectedRecords.selectAll=!!(t.length>1&&a),t.map((function(t){e.selectedRecords.ids.hasOwnProperty(t.referral_id)&&!a?delete e.selectedRecords.ids[t.referral_id]:!1===e.selectedRecords.ids.hasOwnProperty(t.referral_id)&&a&&(e.selectedRecords.ids[t.referral_id]={commission:Number(parseFloat(t.commission).toFixed(2)),orderId:t.order_id||0,pendingPayout:"unpaid"===t.status,date:t.datetime,status:t.status,currency:t.currency||"",currencyCode:t.currencyCode||""})})),e.calculateCommissions()}},{key:"calculateCommissions",value:function(){var t=0,a=0;Object.keys(e.selectedRecords.ids).map((function(i){var r=e.selectedRecords.ids[i],n=r.commission,o=r.status;n&&(t="rejected"!==o?Number(parseFloat(t+n).toFixed(2)):t,a="unpaid"===o?Number(parseFloat(a+n).toFixed(2)):a)})),e.selectedRecords.commission=parseFloat(t).toFixed(2),e.selectedRecords.unpaidCommission=parseFloat(a).toFixed(2),Object.keys(e.selectedRecords.ids).length>0&&(e.selectedRecords.payoutCurrencySymbol=Object.values(e.selectedRecords.ids)[0].currency||"",e.selectedRecords.payoutCurrencyCode=Object.values(e.selectedRecords.ids)[0].currencyCode||""),e.selectedRecords.IsMultiCurrencyDetected=e.isMultiCurrencySelected()}},{key:"selectedRecords",get:function(){return e._selectedRecords},set:function(t){e._selectedRecords=t}}],(a=[{key:"printCommissionStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=w.a.getAFWParams("commissionStatuses")||{};return e in t?t[e]:""}},{key:"view",value:function(){var t=this;return d.a.details.referrals&&d.a.details.referrals.length>0?m("table",{class:"min-w-full"},m("thead",null,m("tr",null,m("th",{class:"pl-6 pr-0 py-3 border-b border-gray-200 bg-gray-50 w-6 flex-0"},m("input",{id:"select[0]",checked:e.selectedRecords.selectAll,type:"checkbox",class:"form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out",onclick:function(t){e.handleRowSelection(d.a.details.referrals,t.target.checked)}})),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Date","Column header for referral table","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Order","Column header for referral table","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Commission","Column header for referral table","affiliate-for-woocommerce")),m("th",{class:"hidden xl:table-cell px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Customer","Column header for referral table","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Campaign","Column header for referral table","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase text-right"},_x("Medium","Column header for referral table","affiliate-for-woocommerce")))),m("tbody",{class:"bg-white"},d.a.details.referrals.map((function(a){return m("tr",null,m("td",{class:"pl-6 pr-0 py-4 whitespace-no-wrap border-b border-gray-200 text-sm leading-5 text-gray-800 w-6 flex-0"},m("input",{id:"select[".concat(a.referral_id||"","]"),checked:e.selectedRecords.ids.hasOwnProperty(a.referral_id),type:"checkbox",class:"form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out",onclick:function(t){e.handleRowSelection(a,t.target.checked)}})),m("td",{class:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-sm leading-5 text-gray-500"},m("time",{datetime:a.datetime},a.datetime)),m("td",{class:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-sm leading-5 text-gray-800"},m("div",{class:"flex items-center"},m("a",{href:a.order_url,target:"_blank",class:"text-indigo-600 hover:text-indigo-900 focus:outline-none focus:underline numeric"},"#",a.order_id),m("span",{class:"ml-3 text-gray-600"},a.order_status),m("span",{class:"hidden xl:inline-block ml-3"},a.currency,w.a.formatNumber(a.order_total)))),m("td",{class:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-sm leading-5 text-gray-500"},m("div",{class:"flex items-center content-center"},m("span",{class:("rejected"===a.status?"line-through ":"")+"font-medium"},a.currency,w.a.formatNumber(a.commission)),m("span",{class:("rejected"===a.status?"text-red-400":"unpaid"===a.status?"text-teal-400":"text-gray-400")+" ml-3"},t.printCommissionStatus(a.status)),a.days_remaining_for_refund>0?m("span",{title:sprintf(_x("Refund period: Payout ready after %d days","title text for refund period remaining for referral","affiliate-for-woocommerce"),a.days_remaining_for_refund),class:"cursor-pointer text-red-400 ml-2"},m("svg",{class:"h-2 w-2",viewBox:"0 0 6 6",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},m("circle",{cx:"3",cy:"3",r:"3"}))):"")),m("td",{class:"hidden xl:table-cell px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-sm leading-5 text-gray-500 truncate"},a.customer_orders_url?m("a",{href:a.customer_orders_url,target:"_blank",class:"text-indigo-600 hover:text-indigo-900 focus:outline-none focus:underline numeric"},a.billing_name):m("span",null,a.billing_name)),m("td",{class:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-sm leading-5 text-gray-400 text-center"},parseInt(a.campaign_id||0)?a.campaign_title?m("a",{href:w.a.getAFWParams("dashboardLink")+"#!/campaigns/".concat(a.campaign_id),class:"text-indigo-600 hover:text-indigo-900 focus:outline-none focus:underline numeric",title:a.campaign_title,target:"_blank"},"#",a.campaign_id):m("span",{title:_x("Deleted","Deleted campaign ID in referral table","affiliate-for-woocommerce")},"#".concat(a.campaign_id)):"-"),m("td",{class:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-xs uppercase leading-5 text-gray-500 text-right"},a.referral_type))})))):m("p",{class:"py-8 text-sm text-center text-gray-500"},_x("Referrals are unavailable for this date range or filter. Adjust either dates or filter then retry.","empty referral message","affiliate-for-woocommerce"))}}])&&x(t.prototype,a),i&&x(t,i),e}();_.initialize();var k=a(14),P=a(9),S=a(5);function O(e,t,a,i,r,n,o){try{var s=e[n](o),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function A(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function D(e,t,a){return t&&A(e.prototype,t),a&&A(e,a),e}var C=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initializeFlags(),this.initialize(t.attrs)}var t,a;return D(e,[{key:"initialize",value:function(e){this.commission=e.commission||"0.00",this.name=e.name||"",this.defaultDate=(new Date).toISOString().slice(0,10),this.recordDate=this.defaultDate}}],[{key:"initializeFlags",value:function(){e.flags={show:!1,disablePayout:!1},e.payoutMethod="",e.maybeSetPayoutMethod()}}]),D(e,[{key:"onupdate",value:function(e){this.initialize(e.attrs)}},{key:"getPayoutMethods",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={paypal:{title:_x("PayPal: Pay & Record","Admin - Payout method title","affiliate-for-woocommerce"),desc:_x("Automatically pay via PayPal and record payout.","Payout method description for method - PayPal pay & record","affiliate-for-woocommerce"),disabled:!d.a.details.isPaypalEmail},"paypal-manual":{title:_x("PayPal: Record Only","Admin - Payout method title","affiliate-for-woocommerce"),desc:_x("Record a manual payout done via PayPal. This method does not send money.","Payout method description for method - PayPal: record only","affiliate-for-woocommerce")},other:{title:_x("Other","Admin - Payout method title","affiliate-for-woocommerce"),desc:_x("Record a manual payout done via any method. This method does not send money.","Payout method description for method - other","affiliate-for-woocommerce")},stripe:{title:_x("Stripe: Pay & Record","Admin - Payout method title","affiliate-for-woocommerce"),desc:_x("Pay via Stripe and record payout.","Payout method description for method - Stripe: pay & record","affiliate-for-woocommerce"),disabled:!d.a.details.isStripeAccount}};return"string"==typeof e&&e.length>0?e in t&&t[e]||"":t}},{key:"processPayout",value:(t=regeneratorRuntime.mark((function t(a){var i,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),i=[],r=[],Object.keys(_.selectedRecords.ids).map((function(e){_.selectedRecords.ids[e]&&_.selectedRecords.ids[e].pendingPayout&&(parseFloat(_.selectedRecords.ids[e].commission),r.push(e),i.push({affiliate_id:d.a.details.affiliateId||0,referral_id:e,order_id:_.selectedRecords.ids[e].orderId||0,commission:_.selectedRecords.ids[e].commission||0,date:_.selectedRecords.ids[e].date||""}))})),n={affiliate:{id:d.a.details.affiliateId},selectedReferrals:i,selectedReferralIds:r,method:e.payoutMethod,currency:_.selectedRecords.payoutCurrencyCode||"",date:"date"===a.target[1].type?a.target[1].value:"",note:"textarea"===a.target[1].type?a.target[1].value:a.target[2].value},e.flags.disablePayout=!0,S.a.showLoader=!0,S.a.msg=_x("Processing","payout processing loader message","affiliate-for-woocommerce"),t.next=9,new P.a(n).processPayout();case 9:e.flags.disablePayout=!1,S.a.showLoader=!1;case 11:case"end":return t.stop()}}),t)})),a=function(){var e=this,a=arguments;return new Promise((function(i,r){var n=t.apply(e,a);function o(e){O(n,i,r,o,s,"next",e)}function s(e){O(n,i,r,o,s,"throw",e)}o(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"closePayoutModel",value:function(){confirm(_x("Are you sure you want to cancel? Any changes made will be lost.","confirmation message at payout model close","affiliate-for-woocommerce"))&&e.initializeFlags()}},{key:"view",value:function(t){var a=this;return P.a.flags.PayoutProcessed&&(e.initializeFlags(),this.initialize(t.attrs),P.a.flags.PayoutProcessed=!1),e.flags.show?m("div",{class:"modal fixed w-full h-full top-0 left-0 sm:flex sm:items-center sm:justify-center"},m("div",{class:"modal-overlay absolute w-full h-full top-0 left-0 bg-gray-800 opacity-50"}),m("div",{"x-show":"open",class:"bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:max-w-2xl"},m("form",{class:"px-6 py-6 m-auto shadow rounded-lg bg-white border",onsubmit:this.processPayout},m("div",null,m("h3",{class:"text-lg leading-6 font-medium text-gray-900"},__("Pay","affiliate-for-woocommerce")," ",m("strong",null,_.selectedRecords.payoutCurrencySymbol||"",w.a.formatNumber(this.commission))," to ",m("strong",null,this.name))),m("div",{class:"mt-6 sm:mt-5"},m("div",{class:"mt-4 sm:mt-3"},m("div",{class:"mt-4 sm:mt-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:pt-5"},m("label",{for:"method",class:"block text-sm font-medium leading-5 text-gray-500 sm:mt-px sm:pt-2"},_x("Payout Method","Label to select payout method for commission","affiliate-for-woocommerce")),m("div",{class:"mt-1 sm:mt-0 sm:col-span-2"},m("div",{class:"max-w-xs rounded-md shadow-sm"},m("select",{id:"method",class:"block form-select w-full transition duration-150 ease-in-out sm:text-sm sm:leading-5",onchange:function(t){e.payoutMethod=t.target.value}},Object.keys(this.getPayoutMethods()).map((function(t){return m("option",{value:t||"",disabled:a.getPayoutMethods()[t].disabled||!1,selected:t===e.payoutMethod},a.getPayoutMethods()[t].title||t)})))),this.getPayoutMethods(e.payoutMethod)&&this.getPayoutMethods(e.payoutMethod).desc?m("p",{class:"mt-1 max-w-2xl w-64 text-xs leading-5 text-gray-500"},this.getPayoutMethods(e.payoutMethod).desc):"")),"paypal"!==e.payoutMethod&&"stripe"!==e.payoutMethod?m("div",{class:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:pt-5"},m("label",{for:"date",class:"block text-sm font-medium leading-5 text-gray-500 sm:mt-px sm:pt-2"},__("Record Date","affiliate-for-woocommerce")),m("div",{class:"mt-1 sm:mt-0 sm:col-span-2"},m("div",{class:"max-w-xs rounded-md shadow-sm"},m("input",{type:"date",value:this.recordDate||this.defaultDate,class:"form-input w-full sm:leading-5 py-1 text-xs bg-transparent focus:bg-white focus:border-gray-200",onchange:function(e){a.recordDate=e.target.value||a.defaultDate},placeholder:_x("Select payout date","placeholder: payout date","affiliate-for-woocommerce")})))):"",m("div",{class:"mt-4 sm:mt-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:pt-5"},m("label",{for:"notes",class:"block text-sm font-medium leading-5 text-gray-500 sm:mt-px sm:pt-2"},__("Notes","affiliate-for-woocommerce")),m("div",{class:"mt-1 sm:mt-0 sm:col-span-2"},m("div",{class:"max-w-xs rounded-md shadow-sm"},m("textarea",{id:"notes",rows:"3",class:"form-textarea block w-full transition duration-150 ease-in-out sm:text-sm sm:leading-5 p-2"})))),m("div",{class:"mt-8 border-t border-gray-200 pt-5"},m("div",{class:"flex justify-end"},m("span",{class:"inline-flex rounded-md shadow-sm"},m("button",{type:"button",class:"py-2 px-4 border border-gray-300 rounded-md text-sm leading-5 font-medium text-gray-500 hover:text-gray-700 focus:outline-none focus:border-indigo-300 focus:shadow-outline-indigo active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out ".concat(e.flags.disablePayout?"opacity-50 cursor-not-allowed":""),disabled:e.flags.disablePayout||!1,onclick:this.closePayoutModel},__("Cancel","affiliate-for-woocommerce"))),m("span",{class:"ml-3 inline-flex rounded-md shadow-sm"},m("button",{type:"submit",class:"inline-flex justify-center py-2 px-6 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out ".concat(e.flags.disablePayout?"opacity-50 cursor-not-allowed":""),disabled:e.flags.disablePayout||!1},__("Send","affiliate-for-woocommerce")))))))))):""}}],[{key:"maybeSetPayoutMethod",value:function(){"paypal"===d.a.details.payoutMethod&&(e.payoutMethod=d.a.details.isPaypalEmail?d.a.details.payoutMethod:"paypal-manual"),"stripe"===d.a.details.payoutMethod&&(e.payoutMethod=d.a.details.isStripeAccount?d.a.details.payoutMethod:"other")}},{key:"flags",get:function(){return e._flags},set:function(t){e._flags=t}},{key:"payoutMethod",get:function(){return e._payoutMethod?e._payoutMethod:(e.maybeSetPayoutMethod(),e._payoutMethod||"other")},set:function(t){e._payoutMethod=t}}]),e}(),j=a(4),M=a(11);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t,a,i,r,n,o){try{var s=e[n](o),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,i=z(e);if(t){var r=z(this).constructor;a=Reflect.construct(i,arguments,r)}else a=i.apply(this,arguments);return N(this,a)}}function N(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(s,e);var t,a,i,r,n,o=R(s);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return F(this,s),o.call(this,e)}return t=s,(a=[{key:"oninit",value:function(){var e,t;(null===d.a||void 0===d.a||null===(e=d.a.details)||void 0===e||null===(t=e.stats)||void 0===t?void 0:t.current)&&Object.values(d.a.details.stats.current).length>0&&this.doInit()}},{key:"onParamInit",value:function(){this.params.batchAction="paid"}},{key:"onupdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.doUpdate(e)}},{key:"loadData",value:function(){new k.a(null==this?void 0:this.params).fetch()}},{key:"updateCommissionStatus",value:(r=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object.keys(_.selectedRecords.ids).length>0)){e.next=9;break}return S.a.showLoader=!0,S.a.msg=_x("Updating commission status","loader message while updating commission status","affiliate-for-woocommerce"),e.next=5,new k.a({ids:Object.keys(_.selectedRecords.ids),status:this.params.batchAction||""}).updateCommissionStatus();case 5:S.a.showLoader=!1,j.a.show({status:"success",message:_x("Commission status updated successfully","success message after updating commission status","affiliate-for-woocommerce")}),e.next=10;break;case 9:j.a.show({status:"warning",message:_x("Please select a referral","warning message when no referral is selected for commission status update","affiliate-for-woocommerce")});case 10:case"end":return e.stop()}}),e,this)})),n=function(){var e=this,t=arguments;return new Promise((function(a,i){var n=r.apply(e,t);function o(e){T(n,a,i,o,s,"next",e)}function s(e){T(n,a,i,o,s,"throw",e)}o(void 0)}))},function(){return n.apply(this,arguments)})},{key:"getCommissionStatusActions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={paid:_x("Mark as Paid","action name to mark commission as paid","affiliate-for-woocommerce"),unpaid:_x("Mark as Unpaid","action name to mark commission as unpaid","affiliate-for-woocommerce"),rejected:_x("Mark as Rejected","action name to mark commission as rejected","affiliate-for-woocommerce")};return e?e in t?t[e]:"":t}},{key:"showCommissionActionsPlaceholder",value:function(){return m("div",{class:"afw-placeholder m-2 mb-4 h-8"})}},{key:"commissionActions",value:function(){var e,t=this,a=_.selectedRecords.unpaidCommission>0&&!_.selectedRecords.IsMultiCurrencyDetected,i=Number(w.a.getAFWParams("minimumCommissionPayout")||0),r=_.selectedRecords.payoutCurrencySymbol||afwcDashboardParams.currencySymbol||"";return d.a.details.referrals&&d.a.details.referrals.length>0?m("[",null,m(C,{commission:_.selectedRecords.unpaidCommission,name:d.a.details.name||""}),m("div",{class:"flex items-center pb-3"},m("div",{class:"ml-3"},m("div",{class:a?"":"opacity-50 cursor-not-allowed"},m("a",{class:"px-2 text-sm font-medium leading-6 text-indigo-600 hover:text-indigo-800 cursor-pointer",onclick:function(){return C.flags.show=a}},_.selectedRecords.IsMultiCurrencyDetected?_x("Payout is not allowed for multiple currency","multi currency not allowed message","affiliate-for-woocommerce"):_x("Send Payout:","Commissions payout title","affiliate-for-woocommerce")+" "+r+(_.selectedRecords.IsMultiCurrencyDetected?0:w.a.formatNumber(_.selectedRecords.unpaidCommission||0))),a&&i>0&&Number(null==_||null===(e=_.selectedRecords)||void 0===e?void 0:e.unpaidCommission)<i?m("p",{class:"px-2 text-xs text-gray-500"},sprintf(_x("(below minimum commission of %s)","minimum commission message","affiliate-for-woocommerce"),r+w.a.formatNumber(i))):"")),m("h4",{class:"flex-1 text-lg text-gray-700"}),m("span",{class:"text-gray-400 mr-4 text-sm"},sprintf(_nx("%s record","%s records",Object.keys(_.selectedRecords.ids).length||0,"number of selected records","affiliate-for-woocommerce"),Object.keys(_.selectedRecords.ids).length)||0,_.selectedRecords.IsMultiCurrencyDetected?"":", "+r+(_.selectedRecords.commission||0)+" "+_x("commission","text for commission amount","affiliate-for-woocommerce")),m("select",{"aria-label":_x("Batch Actions","commission batch action","affiliate-for-woocommerce"),class:"form-select h-full py-2 pl-2 bg-transparent text-gray-500 sm:text-sm sm:leading-5 disabled:opacity-75",onchange:function(e){return t.params.batchAction=e.target.value||""}},Object.keys(this.getCommissionStatusActions()).map((function(e){return m("option",{value:e,selected:e===t.params.batchAction?"selected":""},t.getCommissionStatusActions(e)||"")}))),m("div",{class:"rounded-md shadow-sm ml-4"},m("button",{type:"submit",class:(Object.keys(_.selectedRecords.ids).length>0?"":"opacity-50 cursor-not-allowed ")+"flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-gray-600 hover:bg-gray-500 focus:outline-none focus:border-gray-700 focus:shadow-outline-gray active:bg-gray-700 transition duration-150 ease-in-out disabled:opacity-75",onclick:function(){return t.updateCommissionStatus()}},_x("Update","update button title for commission status","affiliate-for-woocommerce"))))):""}},{key:"view",value:function(){var e=this;return k.a.flags.moreReferralLoaded&&_.selectedRecords.selectAll&&_.handleRowSelection(d.a.details.referrals,!0),k.a.flags.clearSelections&&(_.initialize(),k.a.flags.clearSelections=!1),P.a.flags.PayoutProcessed&&_.initialize(),m("section",{class:"my-5 overflow-x-auto"},d.a.isLoading("referrals")?this.showCommissionActionsPlaceholder():this.commissionActions(),m("section",null,d.a.isLoading("referrals")?this.showPlaceholder():m(_,null)),k.a.flags.loadMore&&d.a.details.referrals.length>0&&0==d.a.details.referrals.length%parseInt(w.a.getAFWParams("dashboard_data_batch_limit")||0)?m("div",{class:"my-3"},m("div",{class:"pb-2 text-right border-b border-gray-200 text-center"},m("a",{class:"py-2 px-4 text-sm font-medium text-indigo-400 uppercase cursor-pointer",onclick:function(){return null==e?void 0:e.loadMore()}},_x("Load More","load more link for referrals","affiliate-for-woocommerce")))):"")}}])&&I(t.prototype,a),i&&I(t,i),s}(M.a);function W(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"initParam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attrs,a=void 0===t?{}:t;this.printInvoice=(null==a?void 0:a.printInvoice)||function(){}}},{key:"oncreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.initParam(e)}},{key:"onupdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.initParam(e)}},{key:"view",value:function(){var e=this;return d.a.details.payouts&&Object.entries(d.a.details.payouts).length>0?m("table",{class:"min-w-full"},m("thead",null,m("tr",null,m("th",{class:"px-5 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Date","Payout table header for date column","affiliate-for-woocommerce")),m("th",{class:"px-5 py-3 border-b border-gray-200 bg-gray-50 text-right text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Amount","Payout table header for amount column","affiliate-for-woocommerce")),m("th",{class:"px-5 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Method","Payout table header for payout method column","affiliate-for-woocommerce")),m("th",{class:"px-5 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase text-right"},_x("Notes","Payout table header for payout notes column","affiliate-for-woocommerce")),w.a.getAFWParams("isPayoutInvoiceEnabled")?m("th",{class:"px-5 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase text-right"},_x("Invoice","Payout table header for invoice column","affiliate-for-woocommerce")):"")),m("tbody",{class:"bg-white"},d.a.details.payouts.map((function(t){return m("tr",null,m("td",{class:"px-5 py-3 whitespace-no-wrap border-b border-gray-200 text-sm leading-5 text-gray-500"},m("time",{datetime:t.datetime||""},t.datetime||"")),m("td",{class:"px-5 py-3 whitespace-no-wrap border-b border-gray-200 text-sm leading-5 font-medium text-gray-900"},m("div",{class:"flex items-center flex-row-reverse"},m("span",{class:"numeric text-gray-600"},t.currency||""," ",w.a.formatNumber(t.amount||0)),m("span",{class:(t.hasOwnProperty("referral_count")&&t.hasOwnProperty("from_date")&&t.hasOwnProperty("to_date")?"visible ":"invisible ")+"hidden xl:inline mx-3 text-gray-400 text-xs"},"for ",sprintf(_nx("%s referral","%s referrals",parseInt(t.referral_count||0),"number of referrals","affiliate-for-woocommerce"),t.referral_count||"-")," from ",t.from_date||"-"," to ",t.to_date||"-"))),m("td",{class:"px-5 py-3 whitespace-no-wrap border-b border-gray-200 text-sm leading-5 text-gray-500"},t.method&&w.a.getAFWParams("payoutMethods")?w.a.getAFWParams("payoutMethods")[t.method]||t.method:""),m("td",{class:"px-5 py-3 whitespace-no-wrap border-b border-gray-200 text-xs leading-5 text-gray-500"},t.payout_notes||""),w.a.getAFWParams("isPayoutInvoiceEnabled")?m("td",{class:"px-5 py-3 whitespace-no-wrap border-b border-gray-200 text-xs leading-5 text-gray-500 text-center"},m("a",{class:"cursor-pointer flex justify-center",onclick:function(){return e.printInvoice(t.payout_id||0)},title:_x("Print","title for printing the invoice icon","affiliate-for-woocommerce")},m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",class:"w-5 h-5 stroke-1 transition-all duration-200 ease-in-out hover:stroke-2 hover:text-indigo-500"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"})))):"")})))):m("p",{class:"py-8 text-sm text-center text-gray-500"},_x("Payout details are unavailable for this date range. Adjust the dates and retry.","empty payout message","affiliate-for-woocommerce"))}}])&&W(t.prototype,a),i&&W(t,i),e}();function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],i=!0,r=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){r=!0,n=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw n}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function K(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var U=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()}var t,a,i;return t=e,(a=[{key:"initialize",value:function(){var e,t,a,i,r,n,o,s,l;this.commissions=(null===d.a||void 0===d.a||null===(e=d.a.details)||void 0===e||null===(t=e.payoutStats)||void 0===t||null===(a=t.allTime)||void 0===a?void 0:a.earned_commissions)||"",this.paidCommissions=(null===d.a||void 0===d.a||null===(i=d.a.details)||void 0===i||null===(r=i.payoutStats)||void 0===r||null===(n=r.allTime)||void 0===n?void 0:n.paid_commissions)||"",this.unpaidCommissions=(null===d.a||void 0===d.a||null===(o=d.a.details)||void 0===o||null===(s=o.payoutStats)||void 0===s||null===(l=s.allTime)||void 0===l?void 0:l.unpaid_commissions)||""}},{key:"showNumberPlaceholder",value:function(){return m("div",{class:"afw-placeholder mx-2 h-4 w-16"})}},{key:"showTextPlaceholder",value:function(){return m("div",{class:"afw-placeholder mx-2 h-4 w-20"})}},{key:"showValue",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(d.a.isLoading("payoutKPI"))return this.showNumberPlaceholder();t=String(t)||"";var a=w.a.getAFWParams("decimal")||".",i=(null===(e=t)||void 0===e?void 0:e.split(a))||[],r=H(i,2),n=r[0],o=void 0===n?"00":n,s=r[1],l=void 0===s?"00":s;return m("[",null,m("span",{class:"text-sm font-normal text-gray-600 mr-1"},w.a.getAFWParams("currencySymbol")||""),o," ",m("span",{class:"text-sm"},a+l))}},{key:"showLabel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return d.a.isLoading("payoutKPI")?this.showTextPlaceholder():e}},{key:"view",value:function(){return this.initialize(),m("section",{class:"flex items-center justify-between text-sm text-gray-800"},m("div",{class:"flex-1 flex items-center justify-between"},m("div",{class:"mr-3"},m("div",{class:"text-2xl leading-none font-medium flex items-center"},this.showValue(this.commissions||"")),m("div",{class:"mt-1 leading-6 text-gray-400"},this.showLabel(_x("Commission (All Time)","label for all time commission","affiliate-for-woocommerce")))),m("div",{class:"ml-3"},m("div",{class:"text-2xl leading-none font-medium flex items-center"},this.showValue(this.paidCommissions||"")),m("div",{class:"mt-1 leading-6 text-gray-400"},this.showLabel(_x("Paid (All Time)","label for all time paid commissions","affiliate-for-woocommerce")))),m("div",{class:"ml-3"},m("div",{class:"text-2xl leading-none font-medium flex items-center"},this.showValue(this.unpaidCommissions||"")),m("div",{class:"mt-1 leading-6 text-gray-400"},this.showLabel(_x("Unpaid (All Time)","label for all time unpaid commissions","affiliate-for-woocommerce"))))))}}])&&K(t.prototype,a),i&&K(t,i),e}();function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,i=X(e);if(t){var r=X(this).constructor;a=Reflect.construct(i,arguments,r)}else a=i.apply(this,arguments);return $(this,a)}}function $(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(n,e);var t,a,i,r=Z(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Q(this,n),r.call(this,e)}return t=n,(a=[{key:"oninit",value:function(){this.doInit()}},{key:"onupdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.doUpdate(e)}},{key:"loadData",value:function(){new P.a(null==this?void 0:this.params).fetchKPI(),new P.a(null==this?void 0:this.params).fetch()}},{key:"printInvoice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(new P.a).printInvoice(e)}},{key:"view",value:function(){var e=this;return m("section",{class:"my-5 overflow-x-auto"},m(U,null),m("section",{class:"my-6"},d.a.isLoading("payouts")?this.showPlaceholder():m(q,{printInvoice:this.printInvoice}),P.a.flags.loadMore&&d.a.details.payouts.length>0&&0==d.a.details.payouts.length%parseInt(w.a.getAFWParams("dashboard_data_batch_limit")||0)?m("div",{class:"my-3"},m("div",{class:"pb-2 text-right border-b border-gray-200 text-center"},m("a",{class:"py-2 px-4 text-sm font-medium text-indigo-400 uppercase cursor-pointer",onclick:function(){e.loadMore()}},_x("Load More","Load more link for payouts","affiliate-for-woocommerce")))):""))}}])&&J(t.prototype,a),i&&J(t,i),n}(M.a);function te(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ae=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"view",value:function(){return d.a.details.products&&Object.keys(d.a.details.products).length>0?m("table",{class:"min-w-full"},m("thead",null,m("tr",null,m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Product","Product table row title for product name","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-right text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Quantity","Product table row title for quantity","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-right text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Sales","Product table row title for sales","affiliate-for-woocommerce")))),m("tbody",{class:"bg-white"},Object.keys(d.a.details.products).length>0&&Object.keys(d.a.details.products).length>0?Object.keys(d.a.details.products).map((function(e){return m("tr",null,m("td",{class:"px-6 py-3 text-sm font-medium leading-5 text-gray-600 whitespace-no-wrap border-b border-gray-200"},m("a",{href:d.a.details.products[e].edit_product_url||"",target:"_blank",class:"text-indigo-600 hover:text-indigo-900 focus:outline-none focus:underline numeric"},d.a.details.products[e].product||"")),m("td",{class:"px-6 py-3 text-sm font-medium text-right leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 numeric"},d.a.details.products[e].quantity||0),m("td",{class:"px-6 py-3 text-sm leading-5 text-right text-gray-500 whitespace-no-wrap border-b border-gray-200 numeric"},afwcDashboardParams.currencySymbol,d.a.details.products[e].sales||0))})):"")):m("p",{class:"py-8 text-sm text-center text-gray-500"},_x("Products are unavailable for this date range. Adjust the dates and retry.","empty product message","affiliate-for-woocommerce"))}}])&&te(t.prototype,a),i&&te(t,i),e}(),ie=a(20);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,i=ue(e);if(t){var r=ue(this).constructor;a=Reflect.construct(i,arguments,r)}else a=i.apply(this,arguments);return ce(this,a)}}function ce(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(n,e);var t,a,i,r=le(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ne(this,n),r.call(this,e)}return t=n,(a=[{key:"oninit",value:function(){this.doInit()}},{key:"onupdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.doUpdate(e)}},{key:"loadData",value:function(){new ie.a(null==this?void 0:this.params).fetch()}},{key:"view",value:function(){var e,t,a,i,r,n=this;return m("section",{class:"my-5 overflow-x-auto"},m("section",{class:"my-6"},d.a.isLoading("products")?this.showPlaceholder():m(ae,null),(null===ie.a||void 0===ie.a||null===(e=ie.a.flags)||void 0===e?void 0:e.loadMore)&&parseInt(null===d.a||void 0===d.a||null===(t=d.a.details)||void 0===t||null===(a=t.products)||void 0===a?void 0:a.length)>0&&0==parseInt(null===d.a||void 0===d.a||null===(i=d.a.details)||void 0===i||null===(r=i.products)||void 0===r?void 0:r.length)%parseInt(w.a.getAFWParams("dashboard_data_batch_limit")||0)?m("div",{class:"my-3"},m("div",{class:"pb-2 text-right border-b border-gray-200 text-center"},m("a",{class:"py-2 px-4 text-sm font-medium text-indigo-400 uppercase cursor-pointer",onclick:function(){n.loadMore()}},_x("Load More","Load more link for products report","affiliate-for-woocommerce")))):""))}}])&&oe(t.prototype,a),i&&oe(t,i),n}(M.a),fe=a(26),me=a.n(fe);function pe(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ge=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"extractUA",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return{};var t=me.a.parse(e),a=t.platform,i=void 0===a?{}:a,r=t.browser,n=void 0===r?{}:r,o=t.os,s=void 0===o?{}:o;return{deviceType:(null==i?void 0:i.type)||"desktop",browser:(null==n?void 0:n.name)||"",os:(null==s?void 0:s.name)||""}}},{key:"header",value:function(){var e;return(null===d.a||void 0===d.a||null===(e=d.a.details)||void 0===e?void 0:e.visitors)&&Object.values(d.a.details.visitors).length?m("thead",null,m("tr",null,m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Datetime","Visitor table row title for datetime","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Medium","Visitor table row title for medium","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Referring URl","Visitor table row title for referring URL","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-center text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Converted","Visitor table row title to know if a hit is converted","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("User agent","Visitor table row title for user agent","affiliate-for-woocommerce")))):""}},{key:"deviceIcon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return e;switch(e){case"mobile":return m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 1.5H8.25A2.25 2.25 0 006 3.75v16.5a2.25 2.25 0 002.25 2.25h7.5A2.25 2.25 0 0018 20.25V3.75a2.25 2.25 0 00-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"}),m("title",null,_x("Mobile","Icon title for mobile","affiliate-for-woocommerce")));case"tablet":return m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5h3m-6.75 2.25h10.5a2.25 2.25 0 002.25-2.25v-15a2.25 2.25 0 00-2.25-2.25H6.75A2.25 2.25 0 004.5 4.5v15a2.25 2.25 0 002.25 2.25z"}),m("title",null,_x("Tablet","Icon title for tablet","affiliate-for-woocommerce")));case"desktop":return m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"}),m("title",null,_x("Desktop","Icon title for desktop","affiliate-for-woocommerce")));default:return e}}},{key:"view",value:function(){var e,t,a=this;return(null===d.a||void 0===d.a||null===(e=d.a.details)||void 0===e?void 0:e.visitors)&&Object.keys(null===d.a||void 0===d.a||null===(t=d.a.details)||void 0===t?void 0:t.visitors).length>0?m("table",{class:"min-w-full"},this.header(),m("tbody",{class:"bg-white"},d.a.details.visitors.map((function(e){var t=e.user_agent?a.extractUA(e.user_agent):{},i=t.deviceType,r=void 0===i?"":i,n=t.browser,o=void 0===n?"":n,s=t.os,l=void 0===s?"":s;return m("tr",{key:e.id||""},m("td",{class:"px-6 py-3 border-b border-gray-200 text-sm leading-5 text-gray-500"},e.datetime?e.datetime.split(/\s+/).map((function(e,t){return m("div",{class:"whitespace-no-wrap"},m("time",{key:t,datetime:e},e))})):"-"),m("td",{class:"px-6 py-3 border-b border-gray-200 text-sm leading-5 text-gray-500"},e.medium||"-"),m("td",{class:"px-6 py-3 border-b border-gray-200 text-sm leading-5 text-gray-500 max-w-xs break-all"},e.referring_url?m("a",{class:"cursor-pointer text-indigo-600 hover:underline",href:e.referring_url},e.referring_url):"-"),m("td",{class:"px-6 py-3 border-b border-gray-200 text-sm leading-5 text-gray-500 text-center"},m("div",{class:"flex justify-center text-center"},e.is_converted?m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 text-green-600"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})):m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 text-red-600"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})))),m("td",{class:"px-6 py-3 border-b border-gray-200 text-sm leading-5 text-gray-500 max-w-xs break-all"},m("ul",{class:"list-none space-y-0"},m("li",{class:"flex flex-row items-center space-x-2 mb-0"},m("span",null,_x("Device:","Device type label in visitor dashboard","affiliate-for-woocommerce")),m("span",null,r?a.deviceIcon(r):"-")),m("li",{class:"flex flex-row items-center space-x-2"},m("span",null,_x("Browser:","Browser name label in visitor dashboard","affiliate-for-woocommerce")),m("span",{class:"whitespace-no-wrap"},o||"-")),m("li",{class:"flex flex-row items-center space-x-2"},m("span",null,_x("OS:","OS name label in  visitor dashboard","affiliate-for-woocommerce")),m("span",{class:"whitespace-no-wrap"},l||"-")),m("li",{class:"flex flex-row items-center space-x-2"},m("span",{class:"whitespace-no-wrap"},_x("IP:","IP address label in visitor dashboard","affiliate-for-woocommerce")),m("span",null,e.ip||"-")))))})))):m("p",{class:"py-8 text-sm text-center text-gray-500"},_x("Visitors are unavailable for this date range. Adjust the dates and retry.","empty visitor message","affiliate-for-woocommerce"))}}])&&pe(t.prototype,a),i&&pe(t,i),e}(),he=a(21);function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,i=ke(e);if(t){var r=ke(this).constructor;a=Reflect.construct(i,arguments,r)}else a=i.apply(this,arguments);return _e(this,a)}}function _e(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(n,e);var t,a,i,r=xe(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ye(this,n),r.call(this,e)}return t=n,(a=[{key:"oninit",value:function(){this.doInit()}},{key:"onupdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.doUpdate(e)}},{key:"loadData",value:function(){new he.a(null==this?void 0:this.params).fetch()}},{key:"view",value:function(){var e,t,a,i,r,n=this;return m("section",{class:"my-5 overflow-x-auto"},m("section",{class:"my-6"},d.a.isLoading("visitors")?this.showPlaceholder():m(ge,null),(null===he.a||void 0===he.a||null===(e=he.a.flags)||void 0===e?void 0:e.loadMore)&&parseInt(null===d.a||void 0===d.a||null===(t=d.a.details)||void 0===t||null===(a=t.visitors)||void 0===a?void 0:a.length)>0&&0==parseInt(null===d.a||void 0===d.a||null===(i=d.a.details)||void 0===i||null===(r=i.visitors)||void 0===r?void 0:r.length)%parseInt(w.a.getAFWParams("dashboard_data_batch_limit")||0)?m("div",{class:"my-3"},m("div",{class:"pb-2 text-right border-b border-gray-200 text-center"},m("a",{class:"py-2 px-4 text-sm font-medium text-indigo-400 uppercase cursor-pointer",onclick:function(){n.loadMore()}},_x("Load More","Load more link for visitors report","affiliate-for-woocommerce")))):""))}}])&&be(t.prototype,a),i&&be(t,i),n}(M.a),Se=a(24),Oe=a(17);function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ce=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ae(this,e),this.initParams(t),this.nodeCss="inline-block p-2 text-sm border-solid border-gray-200 text-gray-500 w-40 border hover:text-gray-900 rounded-lg",this.placeholderNodeCss="inline-block text-sm border-solid border-gray-200 text-gray-500 w-40 border rounded-lg afw-placeholder m-2 h-8",this.multiTierWrapperCss="multi-tier-tree flex items-center justify-center"}var t,a,i;return t=e,(a=[{key:"oninit",value:function(){new Oe.a(this.params).fetch()}},{key:"initParams",value:function(e){var t;this.params={id:(null==e||null===(t=e.attrs)||void 0===t?void 0:t.id)||0}}},{key:"showPlaceholder",value:function(){return m("div",{class:this.multiTierWrapperCss||""},this.buildList([{id:1,children:[{id:2,children:[]},{id:3,children:[]},{id:4,children:[]}]}],!0,!0))}},{key:"buildList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m("ul",{class:"py-5 relative transition-all"},t.map((function(t){return m("li",{class:"float-left pt-5 pb-0 text-center list-none relative px-5 transition-all"},m("span",{class:i?e.placeholderNodeCss:a?e.nodeCss+("pending"===t.status?" bg-red-100":" bg-warning-light"):""},t.name||""),t.children&&t.children.length>0?e.buildList(t.children,a,i):"")})))}},{key:"emptyText",value:function(){return m("p",{class:"py-8 text-sm text-center text-gray-500"},_x("No children found. View/set parent affiliate from affiliate's profile.","empty chain message","affiliate-for-woocommerce"))}},{key:"view",value:function(e){return this.initParams(e),m("div",{class:"afwc-multi-tier-tree"},m("section",{class:"my-5 overflow-x-auto"},Oe.a.flags.loading?this.showPlaceholder():Oe.a.details&&Object.entries(Oe.a.details).length>0?m("div",{class:this.multiTierWrapperCss||""},this.buildList(Oe.a.details,!0)):this.emptyText()))}}])&&De(t.prototype,a),i&&De(t,i),e}();function je(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Me=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:t.attrs.id||0,startDate:t.attrs.startDate||"",endDate:t.attrs.endDate||"",activeTab:b.a.activeTab||"referrals"}}var t,a,i;return t=e,(a=[{key:"refreshModel",value:function(e){var t=this.params.id,a=this.params.startDate,i=this.params.endDate;this.params=Object.assign(this.params,e.attrs),t==e.attrs.id&&a==e.attrs.startDate&&i==e.attrs.endDate||(this.model=new d.a(this.params).reload(b.a.activeTab||"referrals")),this.params.activeTab=b.a.activeTab||"referrals"}},{key:"oncreate",value:function(){this.model=new d.a(this.params).fetch()}},{key:"view",value:function(e){var t;return this.refreshModel(e),m("section",{class:(d.a.details.pending?"border-t-4 border-red-100 ":"")+"px-6 py-6 sm:w-4/5 rounded-lg bg-white shadow"},d.a.details.pending?m("article",{class:"h-3/6 w-full"},m(g,null),m("article",{class:"h-3/6 w-full sm:flex sm:items-center sm:justify-center"},m("a",{href:d.a.details.editURL,target:"_blank",class:"inline-flex justify-center py-4 px-6 border border-transparent text-lg leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out"},__("Review & Approve Affiliate","affiliate-for-woocommerce")))):m("article",{class:"w-full"},m(g,null),m(y,null),m(b.a,null),"referrals"===this.params.activeTab?m(B,{id:this.params.id,startDate:this.params.startDate,endDate:this.params.endDate,filters:(null===r.a||void 0===r.a||null===(t=r.a.data)||void 0===t?void 0:t.filters)||{}}):"","payouts"===this.params.activeTab?m(ee,{id:this.params.id,startDate:this.params.startDate,endDate:this.params.endDate}):"","products"===this.params.activeTab?m(de,{id:this.params.id,startDate:this.params.startDate,endDate:this.params.endDate}):"","visitors"===this.params.activeTab?m(Pe,{id:this.params.id,startDate:this.params.startDate,endDate:this.params.endDate}):"","profile"===this.params.activeTab?m(Se.a,{id:this.params.id}):"","multi-tier"===this.params.activeTab?m(Ce,{id:this.params.id}):""))}}])&&je(t.prototype,a),i&&je(t,i),e}();function Le(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Te(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Fe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="standard"}var t,a,i;return t=e,(a=[{key:"showOptions",value:function(e){var t=document.getElementById("afwc-export-option");"none"===t.style.display?t.style.display="block":t.style.display="none"}},{key:"exportAffiliates",value:function(e){this.type=e,r.a.exportAffiliates(this.type),document.getElementById("afwc-export-option").style.display="none"}},{key:"view",value:function(e){var t=this;return m("div",{class:"relative"},m("button",{type:"button",id:"afwc-export-btn",onclick:function(e){t.showOptions(e)},class:"w-2/3 rounded-md shadow-sm cursor-pointer relative w-3/5 rounded-md border bg-white pl-3 pr-10 py-2 text-left focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition ease-in-out duration-150 sm:text-sm sm:leading-5"},m("div",{class:"flex items-center space-x-3"},m("span",{class:"font-normal flex truncate"},m("span",{class:"flex items-center pl-2 mr-2 pointer-events-none"},m("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},m("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"}))),__("Export","affiliate-for-woocommerce"))),m("span",{class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},m("svg",{class:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor"},m("path",{d:"M7 7l3-3 3 3m0 6l-3 3-3-3","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})))),m("div",{id:"afwc-export-option",class:"absolute mt-1 w-3/5 rounded-md bg-white shadow-lg",style:"display: none;"},m("ul",{tabindex:"-1",role:"listbox",class:"max-h-56 rounded-md py-1 text-base leading-6 shadow-xs overflow-auto focus:outline-none sm:text-sm sm:leading-5"},m("li",Le({id:"listbox-item-0","data-type":"standard",onclick:function(e){t.exportAffiliates(e.target.getAttribute("data-type"))},class:"{ 'text-white bg-indigo-600': selected === 0, 'text-gray-900': !(selected === 0) }"},"class","cursor-pointer select-none relative py-2 pl-3 pr-9 text-gray-900"),__("Standard CSV","affiliate-for-woocommerce")),m("li",Le({id:"listbox-item-0","data-type":"mass_payment",onclick:function(e){t.exportAffiliates(e.target.getAttribute("data-type"))},class:"{ 'text-white bg-indigo-600': selected === 0, 'text-gray-900': !(selected === 0) }"},"class","cursor-pointer select-none relative py-2 pl-3 pr-9 text-gray-900"),__("Mass Payout CSV","affiliate-for-woocommerce")))))}}])&&Te(t.prototype,a),i&&Te(t,i),e}();function Ie(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ee(e,t,a){return t&&Ie(e.prototype,t),a&&Ie(e,a),e}var Re=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize(t.attrs)}return Ee(e,[{key:"initialize",value:function(e){this.startDate=e.startDate||"",this.endDate=e.endDate||""}}]),Ee(e,[{key:"view",value:function(e){return this.initialize(e.attrs),m("main",{class:"max-w-7xl mx-auto my-8 py-6 sm:px-3 xl:px-8 sm:flex sm:items-top"},m("section",{class:"sm:w-1/5"},m(l,null),m(Fe,null),m(u,null)),m(Me,{id:r.a.data.currentAffiliateID,startDate:this.startDate,endDate:this.endDate}))}}]),e}(),Ne=a(10),ze=a(19);function Be(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function We(e,t,a){return t&&Be(e.prototype,t),a&&Be(e,a),e}var qe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize(t.attrs)}return We(e,[{key:"initialize",value:function(){var e,t,a,i,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.urlParams=n||{};var o=w.a.geRouteFilterValue(n.filterValue||"")||{};this.params={affiliateID:n.id||0,startDate:o["from-date"]?null===(e=afwcDateFunctions)||void 0===e||null===(t=e.formatDate)||void 0===t?void 0:t.call(e,new Date(o["from-date"]+"T00:00:00")):afwcDateFunctions.getFullDate(-30),endDate:o["to-date"]?null===(a=afwcDateFunctions)||void 0===a||null===(i=a.formatDate)||void 0===i?void 0:i.call(a,new Date(o["to-date"]+"T00:00:00")):afwcDateFunctions.getFullDate()},new r.a(this.params)}}]),We(e,[{key:"onupdate",value:function(e){(this.urlParams!=e.attrs&&Object.keys(e.attrs).length||r.a.restarted)&&this.initialize(e.attrs);var t=document.getElementById("afwc-search-panel"),a=document.getElementById("afwc-export-option"),i=document.getElementById("afwc-smart-dates-dropdown-list");document.onclick=function(e){t&&"afwc-search-field"!=e.target.id&&!e.target.closest("#afwc-search-panel")&&t.classList.add("hidden"),!a||"afwc-export-btn"==e.target.id||e.target.closest("#afwc-export-option")||e.target.closest("#afwc-export-btn")||"none"!==a.style.display&&(a.style.display="none"),i&&"afwc-smart-dates-dropdown-icon"!=e.target.id&&"afwc-smart-dates-dropdown-list"!=e.target.id&&!e.target.closest("li")&&i.classList.add("hidden")}}},{key:"view",value:function(){return m("[",null,m(i.a,{startDate:r.a.data.start_date,endDate:r.a.data.end_date}),S.a.showLoader||0!==r.a.data.affiliates.length?r.a.data.affiliates.length>0||Object.keys(r.a.data.kpi).length>0?m("[",null,m(o,null),m(ze.a,{dashboardNotice:!0}),m(ze.a,{type:"plan_updated"}),m(Re,{startDate:r.a.data.start_date,endDate:r.a.data.end_date})):"":m("header",{class:"bg-white shadow"},m("div",{class:"max-w-7xl mx-auto py-40 sm:px-3 xl:px-8 text-gray-500"},m("p",{class:"text-xl font-medium leading-8 text-center"},_x("No affiliates yet.","message when there are no affiliates.","affiliate-for-woocommerce")),m("div",{class:"text-lg mx-auto leading-8 max-w-sm mt-6 space-y-4"},m("p",null,_x('Go to "Settings" and select some user roles to automatically make them affiliates.',"instruction to make affiliates through settings.","affiliate-for-woocommerce")),m("p",null,_x("Or edit your affiliate registration form (link available in Settings) and link it from your site.","instruction to edit affiliate registration form.","affiliate-for-woocommerce")),m("p",null,_x("Or go to an individual user's profile in WordPress and make them an affiliate.","instruction to make a user an affiliate via profile.","affiliate-for-woocommerce"))))),j.a.flags.showNotification?m(Ne.a,null):null)}}]),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var i=a(0),r=a(1),n=a(22),o=a(13),s=a(5),l=a(4);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function g(e,t,a,i,r,n,o){try{var s=e[n](o),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function h(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:t.attrs.id||0},this.initializeProfileData(),this.preventWithoutSaveLeave()}var t,a,p;return t=e,p=[{key:"setProfileDetailsFlags",value:function(t,a){e.flags[t]=a,"editingIdentifier"!==t&&(e.flags.hasChanges=!0),e.flags.hasChanges=Object.keys(e.flags).some((function(t){return"hasChanges"!==t&&"editingIdentifier"!==t&&!1!==e.flags[t]}))}}],(a=[{key:"oninit",value:function(){new n.a(this.params).fetch()}},{key:"onupdate",value:function(e){var t,a;this.initializeTextInputs(),this.initializeSelect2(),Number((null==e||null===(t=e.attrs)||void 0===t?void 0:t.id)||"")!==Number((null===i.a||void 0===i.a||null===(a=i.a.details)||void 0===a?void 0:a.affiliateId)||"")&&(this.initializeProfileData(),this.preventWithoutSaveLeave()),this.manageDateFilterClick()}},{key:"initializeProfileData",value:function(){e.data={identifier:null,affiliateTags:[],parentAffiliate:null,paypalEmail:null},e.flags={hasChanges:!1,editingIdentifier:!1,identifierEdited:!1,tagsEdited:!1,parentAffiliateEdited:!1,paypalEmailEdited:!1}}},{key:"preventWithoutSaveLeave",value:function(){var t=this,a=!1,i=!1,r=!1,n=_x("Are you sure you want to leave? Unsaved changes will be lost.","confirmation message before leaving unsaved profile tab","affiliate-for-woocommerce"),o=function(i){if(e.flags.hasChanges&&document.querySelector(".afwc-profile-tab")&&!r&&!a){var o=i.target.closest("a");if(o&&!document.querySelector(".afwc-profile-tab").contains(i.target)){if(i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation(),a=!0,!confirm(n))return a=!1,!1;a=!1,r=!0,e.flags.hasChanges=!1,t.manageDateFilterClick(),setTimeout((function(){o.click()}),10)}}};i||(document.addEventListener("mousedown",o),window.onbeforeunload=function(t){e.flags.hasChanges&&document.querySelector(".afwc-profile-tab")&&!r&&!a&&(t.preventDefault(),t.returnValue="")},i=!0)}},{key:"manageDateFilterClick",value:function(){var t=document.querySelector(".afwc-date-filter");if(t){var a=e.flags.hasChanges,i=t.firstElementChild;t.classList.toggle("cursor-not-allowed",a),t.setAttribute("title",a?_x("You cannot change dates as the affiliate profile has unsaved changes.","title text for disabled date filter due to unsaved changes on profile","affiliate-for-woocommerce"):""),i&&i.classList.toggle("pointer-events-none",a)}}},{key:"toggleAccordion",value:function(e){if(null==e?void 0:e.target){var t=e.target.getAttribute("aria-controls"),a=document.getElementById(t);if(a){var i;e.target.classList.add("pointer-events-none"),setTimeout((function(){return e.target.classList.remove("pointer-events-none")}),300),a.classList.contains("section-closed")?(a.classList.remove("section-closed","opacity-0"),a.classList.add("section-opened","opacity-100"),a.style.maxHeight="".concat(a.scrollHeight,"px"),setTimeout((function(){return a.style.maxHeight=""}),300)):(i=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.style.maxHeight="".concat(a.scrollHeight,"px"),e.next=3,new Promise((function(e){return setTimeout(e,1)}));case 3:a.classList.remove("section-opened","opacity-100"),a.classList.add("section-closed","opacity-0"),a.style.maxHeight="0";case 6:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(a,r){var n=i.apply(e,t);function o(e){g(n,a,r,o,s,"next",e)}function s(e){g(n,a,r,o,s,"throw",e)}o(void 0)}))})();var r=e.target.querySelector("svg");r&&r.classList.toggle("rotate-180")}}}},{key:"initializeTextInputs",value:function(){var t,a;document.querySelector(".afwc-identifier-input")&&(e.data.identifier=(null===(t=document.querySelector(".afwc-identifier-input"))||void 0===t?void 0:t.value)||""),document.querySelector(".afwc-paypal-email-input")&&(e.data.paypalEmail=(null===(a=document.querySelector(".afwc-paypal-email-input"))||void 0===a?void 0:a.value)||"")}},{key:"initializeSelect2",value:function(){for(var e=0,t=[".afwc-tag-search",".afwc-parent-affiliate-search",".afwc-customer-search"];e<t.length;e++){var a=t[e],i=document.querySelector(a);if(i&&!(null==i?void 0:i.classList.contains("select2-hidden-accessible")))switch(a){case".afwc-tag-search":this.loadTagSearchSelect2(a);break;case".afwc-parent-affiliate-search":this.loadParentSearchSelect2(a);break;case".afwc-customer-search":this.loadLTCSearchSelect2(a)}}document.addEventListener("focusout",(function(e){var t=e.target;t.classList.contains("select2-search__field")&&(t.closest(".afwc-tag-search-container")||t.closest(".afwc-ltc-search-container"))&&(t.style.paddingLeft="5px")}))}},{key:"loadTagSearchSelect2",value:function(t){var a=jQuery(t),i={placeholder:a.attr("placeholder")||"",minimumInputLength:1,escapeMarkup:function(e){return e},tags:!0,ajax:{url:r.a.getAFWParams("ajaxurl")||"",dataType:"json",delay:1e3,data:function(e){return{term:e.term||"",action:"afwc_dashboard_controller",cmd:"search_affiliate_tags",security:r.a.getAFWParams("security.dashboard.searchAffiliateTags")||""}},processResults:function(e){var t=[];return e&&jQuery.each(e,(function(e,a){t.push({id:e,text:a})})),{results:t}},cache:!0}};a.select2(i),e.data.affiliateTags=a.val(),a.on("change.select2",(function(){e.data.affiliateTags=jQuery(this).val(),e.setProfileDetailsFlags("tagsEdited",!0),m.redraw()}))}},{key:"loadParentSearchSelect2",value:function(t){var a=jQuery(t),n={placeholder:a.attr("placeholder")||"",minimumInputLength:3,escapeMarkup:function(e){return e},ajax:{url:r.a.getAFWParams("ajaxurl")||"",dataType:"json",delay:1e3,data:function(e){return{term:e.term,action:"afwc_dashboard_controller",cmd:"search_for_parent_affiliate",security:r.a.getAFWParams("security.dashboard.searchForParentAffiliate")||"",user_id:i.a.details.affiliateId}},processResults:function(e){var t=[];return e&&jQuery.each(e,(function(e,a){t.push({id:e,text:a})})),{results:t}},cache:!0}};a.select2(n),e.data.parentAffiliate=a.val(),a.on("change.select2",(function(){e.data.parentAffiliate=jQuery(this).val(),e.setProfileDetailsFlags("parentAffiliateEdited",!0),m.redraw()}))}},{key:"loadLTCSearchSelect2",value:function(e){var t=this,a=jQuery(e),n={placeholder:a.attr("placeholder")||"",dropdownParent:jQuery(e).parent(),minimumInputLength:3,escapeMarkup:function(e){return e},ajax:{url:r.a.getAFWParams("ajaxurl")||"",dataType:"json",delay:1e3,data:function(e){return{term:e.term||"",action:"afwc_dashboard_controller",cmd:"search_ltc_customers",security:r.a.getAFWParams("security.dashboard.searchLTCCustomers")||""}},processResults:function(e){var t=[];if(e&&"Success"===e.ACK){var a=e.data||{};jQuery.each(a,(function(e,a){t.push({id:a.id||a.email||"",text:a.text||"",email:a.email||"",name:a.name||""})}))}return{results:t}},cache:!0}};a.select2(n),a.on("select2:select",(function(e){var i=e.params.data;a.val([]).trigger("change"),t.linkCustomersLTC(i)})),a.on("select2:selecting",(function(e){var t=e.params.args.data||{};parseInt(t.id)===parseInt(i.a.details.affiliateId)&&(confirm(_x("Are you sure you want to link the same affiliate as a lifetime customer?","self linking alert","affiliate-for-woocommerce"))||e.preventDefault())}))}},{key:"unlinkCustomersLTC",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";new n.a({id:i.a.details.affiliateId}).unlinkCustomersLTC(e)}},{key:"linkCustomersLTC",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};new n.a({id:i.a.details.affiliateId}).linkCustomersLTC(e)}},{key:"showPlaceholder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return parseInt(e)>0?m("[",null,f(Array(parseInt(e))).map((function(){return m("div",{class:"flex"},m("div",{class:"afw-placeholder m-2 h-8 w-1/4"}),m("div",{class:"afw-placeholder m-2 h-8 w-3/4"}))}))):""}},{key:"renderIdentifierComponent",value:function(){var t,a,r,n,o,s,l;return e.data.identifier=null===e.data.identifier||void 0===e.data.identifier?i.a.details.identifier:e.data.identifier,m("[",null,m("div",{class:"flex items-center gap-2"},!(null==e||null===(t=e.flags)||void 0===t?void 0:t.editingIdentifier)&&m("[",null,m("span",null,(null===i.a||void 0===i.a||null===(a=i.a.details)||void 0===a?void 0:a.identifier)||""),m("a",{title:_x("Edit identifier","Admin - title for affiliate identifier edit icon","affiliate-for-woocommerce"),class:"text-gray-400 hover:text-gray-500 transition duration-150 ease-in-out cursor-pointer",onclick:function(){return e.setProfileDetailsFlags("editingIdentifier",!0)}},m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})))),(null==e||null===(r=e.flags)||void 0===r?void 0:r.editingIdentifier)&&m("[",null,m("input",{type:"text",class:"afwc-identifier-input rounded-md border border-gray-400 leading-6 px-2 py-1 text-sm text-gray-600 focus:border-gray-800 shadow-none",placeholder:_x("Enter affiliate identifier","placeholder for Affiliate identifier field","affiliate-for-woocommerce"),value:e.data.identifier,oninput:function(t){var a;e.data.identifier=(null==t||null===(a=t.target)||void 0===a?void 0:a.value)||"",e.setProfileDetailsFlags("identifierEdited",!0)}}),m("a",{title:_x("Cancel","Admin - title for edit affiliate identifier cancel icon","affiliate-for-woocommerce"),class:"text-gray-400 hover:text-gray-500 transition duration-150 ease-in-out cursor-pointer",onclick:function(){e.setProfileDetailsFlags("editingIdentifier",!1),e.setProfileDetailsFlags("identifierEdited",!1),e.data.identifier=i.a.details.identifier}},m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"}))))),!(null===i.a||void 0===i.a||null===(n=i.a.details)||void 0===n||null===(o=n.customUrlIdentifierData)||void 0===o?void 0:o.is_enabled)&&m("div",{class:"text-xs flex flex-col bg-warning p-2 mt-1"},m("span",null,_x("The affiliate cannot use this identifier as the ","Admin - Profile warning for personalizing affiliate identifier can not use","affiliate-for-woocommerce"),m("a",{href:null===i.a||void 0===i.a||null===(s=i.a.details)||void 0===s||null===(l=s.customUrlIdentifierData)||void 0===l?void 0:l.setting_link,target:"_blank",class:"text-indigo-600 hover:text-indigo-900 focus:outline-none focus:underline"},_x("Personalize affiliate identifier","Admin - setting name for personalizing affiliate identifier at profile warning","affiliate-for-woocommerce")),_x(" setting is disabled. ","Admin - Profile warning for personalizing affiliate identifier setting is disabled","affiliate-for-woocommerce")),m("span",null,_x("Enable the setting to allow the affiliate to use this identifier in the referral URL.","Admin - Profile warning for allow setting to personalizing affiliate identifier","affiliate-for-woocommerce"))))}},{key:"couponsListComponent",value:function(){var e,t;return(null===i.a||void 0===i.a||null===(e=i.a.details)||void 0===e?void 0:e.coupons)&&"object"===d(null===i.a||void 0===i.a||null===(t=i.a.details)||void 0===t?void 0:t.coupons)&&Object.keys(i.a.details.coupons).length>0?m("ul",{class:"grid grid-cols-3 w-full gap-y-1"},Object.values(i.a.details.coupons).map((function(e){return m("li",{class:"flex items-center m-0 text-xs text-left text-gray-500 gap-2"},"string"==typeof e?m("span",{class:"m-1 px-2 py-0.5 font-mono"},e):m("[",null,m("span",{"data-bs-toggle":"tooltip",title:_x("Click to copy","Admin - tooltip title for copying referral link","affiliate-for-woocommerce"),onclick:function(t){o.a.doCopy(e.coupon_code||"")},class:"cursor-pointer"},m("code",null,e.coupon_code||"")),m("a",{href:e.coupon_edit_url||"",target:"_blank",title:_x("Edit page","Admin - title for landing page edit icon","affiliate-for-woocommerce"),class:"text-gray-400 hover:text-gray-500 transition duration-150 ease-in-out cursor-pointer"},m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})))))}))):_x("No coupons assigned","empty coupon message","affiliate-for-woocommerce")}},{key:"searchAndAssignTagsComponent",value:function(){var e,t,a,r=i.a.details.tags,n=(null===i.a||void 0===i.a||null===(e=i.a.details)||void 0===e?void 0:e.allAvailableTags)&&"object"===d(null===i.a||void 0===i.a||null===(t=i.a.details)||void 0===t?void 0:t.allAvailableTags)?i.a.details.allAvailableTags:r;return m("div",{class:"afwc-tag-search-container flex-1 w-full"},m("select",{id:"afwc_tag_search",name:"afwc_user_tags",class:"afwc-tag-search wc-enhanced-select w-full py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent form-select block",placeholder:i.a.details.isRejected?_x("Tag assign input is disabled for the rejected affiliate","placeholder of disabling affiliate tag search field","affiliate-for-woocommerce"):_x("Search tags","placeholder for searching the affiliate tag","affiliate-for-woocommerce"),multiple:"multiple",style:"width: 100%",disabled:null===i.a||void 0===i.a||null===(a=i.a.details)||void 0===a?void 0:a.isRejected},Object.keys(n).map((function(e){return m("option",{key:e,value:e,selected:r[e]?"selected":""},n[e])}))))}},{key:"searchAndAssignParentAffiliateComponent",value:function(){var e,t,a,r,n;return m("div",{class:"afwc-parent-affiliate-search-container flex-1 w-full"},m("select",{id:"afwc_parent_affiliate_search",name:"afwc_parent_id",class:"afwc-parent-affiliate-search wc-enhanced-select w-full py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent form-select block",placeholder:i.a.details.isRejected?_x("Parent affiliate input is disabled for the rejected affiliate","placeholder of disabling parent affiliate search field","affiliate-for-woocommerce"):_x("Search for a parent affiliate","Placeholder for parent affiliate search input","affiliate-for-woocommerce"),style:"width: 100%","data-allow-clear":"true",disabled:null===i.a||void 0===i.a||null===(e=i.a.details)||void 0===e?void 0:e.isRejected},""!==(null===i.a||void 0===i.a||null===(t=i.a.details)||void 0===t||null===(a=t.parentAffiliateData)||void 0===a?void 0:a.id)&&""!==(null===i.a||void 0===i.a||null===(r=i.a.details)||void 0===r||null===(n=r.parentAffiliateData)||void 0===n?void 0:n.text)?m("option",{value:i.a.details.parentAffiliateData.id,selected:"selected"},i.a.details.parentAffiliateData.text):""),m("p",{class:"mt-1 text-xs text-left text-gray-600"},_x("The commission will be distributed to this parent affiliate on a multi-tier commission plan.","Description for the parent affiliate field in affiliate profile","affiliate-for-woocommerce")))}},{key:"landingPagesListComponent",value:function(){return Object.keys(i.a.details.landingPages).length>0?m("ul",{class:"grid grid-cols-1 w-full gap-y-1"},Object.values(i.a.details.landingPages).map((function(e){return m("li",{class:"flex items-center m-0 text-xs text-left text-gray-500 gap-2"},m("span",{"data-bs-toggle":"tooltip",title:_x("Click to copy","Admin - tooltip title for copying referral link","affiliate-for-woocommerce"),onclick:function(t){o.a.doCopy(e.public_link||"")},class:"cursor-pointer"},m("code",null,e.public_link||"")),m("a",{href:e.edit_link||"",target:"_blank",title:_x("Edit page","Admin - title for landing page edit icon","affiliate-for-woocommerce"),class:"text-gray-400 hover:text-gray-500 transition duration-150 ease-in-out cursor-pointer"},m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))))}))):_x("No landing page assigned","empty landing page message","affiliate-for-woocommerce")}},{key:"searchLTCCustomerComponent",value:function(){return m("div",{class:"afwc-ltc-search-container flex-1 w-full"},m("select",{id:"afwc_customer_search",class:"afwc-customer-search wc-enhanced-select w-full py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent form-select block",placeholder:i.a.details.isLTCEnabledForAffiliate?_x("Search and Link customer","placeholder for searching the customer","affiliate-for-woocommerce"):_x("Lifetime commission is disabled for the affiliate","placeholder of disabling the customer search","affiliate-for-woocommerce"),multiple:"multiple",style:"width: 100%",disabled:!i.a.details.isLTCEnabledForAffiliate}))}},{key:"LTCCustomersListComponent",value:function(){var e=this;return m("div",{class:"w-full overflow-auto max-h-44 my-4"},m("div",{class:"grid grid-cols-2 w-full gap-4"},Object.values(i.a.details.ltcCustomers).map((function(t){return m("div",{class:"p-2 h-12 border border-gray-200 flex items-center justify-between ".concat(t.isProcessing?"opacity-50":"")},m("div",null,m("p",{class:"font-medium"},t.name||t.email||""),t.name?m("p",{class:"text-gray-500"},t.email||""):""),m("div",{class:"flex flex-col text-xs items-end"},m("a",{class:"text-red-500 underline cursor-pointer",onclick:function(){return e.unlinkCustomersLTC(t.id||t.email)}},m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})))))}))))}},{key:"paypalEmailInputComponent",value:function(){var t,a;return e.data.paypalEmail=null===e.data.paypalEmail||void 0===e.data.paypalEmail?(null===i.a||void 0===i.a||null===(t=i.a.details)||void 0===t||null===(a=t.paypalEmailData)||void 0===a?void 0:a.paypal_email)||"":e.data.paypalEmail,m("[",null,m("input",{type:"email",class:"afwc-paypal-email-input w-full rounded-md border border-gray-400 leading-6 px-2 py-1 text-sm text-gray-600 focus:border-gray-800 shadow-none",placeholder:_x("Enter PayPal email address where affiliate will receive commission","placeholder for PayPal email address field","affiliate-for-woocommerce"),value:e.data.paypalEmail,oninput:function(t){e.data.paypalEmail=t.target.value,e.setProfileDetailsFlags("paypalEmailEdited",!0)}}),m("p",{class:"mt-1 text-xs text-left text-gray-600"},_x("This affiliate will receive their commission on the above PayPal email address.","description for PayPal email field","affiliate-for-woocommerce")))}},{key:"anchorTagComponent",value:function(e){return e.toString().split(",").map((function(e){return m("[",null,m("a",{href:e.trim(),target:"_blank",class:"text-indigo-600 hover:text-indigo-900 focus:outline-none focus:underline"},e.trim()),m("br",null))}))}},{key:"processProfileSave",value:function(t){var a,n,d,f;t.preventDefault();var m=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.data);i.a.details.identifier!==e.data.identifier||(null==e||null===(a=e.flags)||void 0===a?void 0:a.editingIdentifier)||delete m.identifier,(null==e||null===(n=e.flags)||void 0===n?void 0:n.tagsEdited)||delete m.affiliateTags,(null==e||null===(d=e.flags)||void 0===d?void 0:d.parentAffiliateEdited)||delete m.parentAffiliate,(null==e||null===(f=e.flags)||void 0===f?void 0:f.paypalEmailEdited)||delete m.paypalEmail,Object.keys(m).forEach((function(e){return null===m[e]&&(m[e]="")})),s.a.showLoader=!0,s.a.msg=_x("Updating","loading text for profile tab save button","affiliate-for-woocommerce"),r.a.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"update_affiliate_profile",security:r.a.getAFWParams("security.dashboard.saveAffiliateProfileChanges")||"",affiliate_id:i.a.details.affiliateId||0,profile_data:JSON.stringify(m)},callback:function(t){var a,n,c,u;t.success?(l.a.show({status:"success",message:_x("Affiliate profile updated successfully.","message after profile update successfully","affiliate-for-woocommerce")}),i.a.details.identifier=null==e||null===(a=e.data)||void 0===a?void 0:a.identifier,(null===i.a||void 0===i.a||null===(n=i.a.details)||void 0===n||null===(c=n.customUrlIdentifierData)||void 0===c?void 0:c.is_enabled)&&e.data.identifier&&(null==e||null===(u=e.flags)||void 0===u?void 0:u.editingIdentifier)&&(i.a.details.referralURL=o.a.affiliateDisplayLink(r.a.getAFWParams("home_url"),"","",i.a.details.identifier)),Object.keys(e.flags).forEach((function(t){return e.flags[t]=!1}))):l.a.show({status:"error",message:t.data.toString()}),s.a.showLoader=!1}})}},{key:"view",value:function(){var t,a,n,s,l,c,u,f,p,g,h,v,y,b,w,x,_,k,P,S,O,A,D,C,j=this;return m("section",{class:"afwc-profile-tab my-5 overflow-x-auto"},i.a.isLoading("profile")?this.showPlaceholder():m("div",{class:"overflow-auto"},m("div",{class:"flex flex-col justify-center bg-slate-50 overflow-hidden"},m("div",{class:"w-full mx-auto"},m("form",{id:"afwc_profile_tab_form",onsubmit:this.processProfileSave},m("div",{class:"flex items-center justify-end mb-3"},m("div",{class:(e.flags.hasChanges?"":"cursor-not-allowed ")+"rounded-md shadow-sm mx-4"},m("button",{type:"submit",class:(e.flags.hasChanges?"":"opacity-50 pointer-events-none ")+"flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-gray-600 hover:bg-gray-500 focus:outline-none focus:border-gray-700 focus:shadow-outline-gray active:bg-gray-700 transition duration-150 ease-in-out disabled:opacity-75"},_x("Update","update button text for profile tab","affiliate-for-woocommerce")))),m("div",{class:"divide-y divide-slate-200"},m("div",null,m("h2",{class:"bg-gray-50 leading-6 cursor-pointer"},m("a",{class:"flex items-center justify-between w-full text-left font-semibold py-2 px-4 text-base","aria-controls":"profile-section-1",onclick:this.toggleAccordion},m("span",{class:"pointer-events-none"},_x("Referral Details","profile tab's referral details accordion title","affiliate-for-woocommerce")),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"pointer-events-none h-6 w-6 transform origin-center transition duration-300 ease-out rotate-180"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})))),m("div",{id:"profile-section-1",class:"section-opened grid text-sm text-slate-600 overflow-hidden transition-all duration-300 ease-in-out opacity-100"},m("table",{class:"overflow-hidden"},m("tbody",null,(null===i.a||void 0===i.a||null===(t=i.a.details)||void 0===t?void 0:t.referralURL)?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4"},_x("Referral Link","Admin - Referral link label","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},m("div",{class:"text-xs"},m("span",{class:"cursor-pointer","data-bs-toggle":"tooltip",title:_x("Click to copy","Admin - tooltip title for copying referral link","affiliate-for-woocommerce"),onclick:function(e){o.a.doCopy(i.a.details.referralURL||"")}},m("code",null,i.a.details.referralURL))))):"",(null===i.a||void 0===i.a||null===(a=i.a.details)||void 0===a?void 0:a.identifier)?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("Affiliate Identifier","Admin - Affiliate identifier label","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},this.renderIdentifierComponent())):"","yes"===i.a.details.isReferralCouponEnabled?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("Referral Coupons","Admin - Referral coupons label","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},this.couponsListComponent())):"",m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("Tags","Admin - Affiliate tags label","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500 flex flex-wrap max-w-screen-sm"},(null===i.a||void 0===i.a||null===(n=i.a.details)||void 0===n?void 0:n.tags)&&"object"===d(null===i.a||void 0===i.a||null===(s=i.a.details)||void 0===s?void 0:s.tags)?this.searchAndAssignTagsComponent():_x("No tags assigned","empty tags message","affiliate-for-woocommerce"))),r.a.getAFWParams("isMultiTierEnabled")?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("Parent Affiliate","Admin - Parent affiliate label","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500 flex flex-wrap max-w-screen-sm"},this.searchAndAssignParentAffiliateComponent())):"","yes"===i.a.details.isLandingPageEnabled?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("Landing Pages","Admin - Landing page label","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},this.landingPagesListComponent())):"","yes"===i.a.details.isLTCEnabled?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("Lifetime Customers","Admin - Lifetime customers label","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500 flex flex-wrap max-w-screen-sm"},this.searchLTCCustomerComponent(),this.LTCCustomersListComponent())):"")))),m("div",null,m("h2",{class:"bg-gray-50 leading-6 cursor-pointer"},m("a",{class:"flex items-center justify-between w-full text-left font-semibold py-2 px-4 text-base","aria-controls":"profile-section-2",onclick:this.toggleAccordion},m("span",{class:"pointer-events-none"},_x("Payout Details","payout details's referral details accordion title","affiliate-for-woocommerce")),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"pointer-events-none h-6 w-6 transform origin-center transition duration-300 ease-out"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})))),m("div",{id:"profile-section-2",class:"section-closed grid text-sm text-slate-600 overflow-hidden transition-all duration-300 ease-in-out opacity-0",style:"max-height: 0;"},m("table",{class:"overflow-hidden"},m("tbody",null,(null===i.a||void 0===i.a||null===(l=i.a.details)||void 0===l?void 0:l.payoutMethodTitle)?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4"},_x("Payout Method","Title for Payout method","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},i.a.details.payoutMethodTitle)):"",!0===(null===i.a||void 0===i.a||null===(c=i.a.details)||void 0===c||null===(u=c.paypalEmailData)||void 0===u?void 0:u.afwc_allow_paypal_email)||""!==(null===i.a||void 0===i.a||null===(f=i.a.details)||void 0===f||null===(p=f.paypalEmailData)||void 0===p?void 0:p.paypal_email)?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("PayPal Email Address","Admin - PayPal email address label","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},this.paypalEmailInputComponent())):"",(null===i.a||void 0===i.a||null===(g=i.a.details)||void 0===g||null===(h=g.automaticPayoutData)||void 0===h?void 0:h.is_enabled)?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4"},_x("Is Selected For Automatic Payout?","description if user is selected for automatic payout","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},m("span",null,(null===i.a||void 0===i.a||null===(v=i.a.details)||void 0===v||null===(y=v.automaticPayoutData)||void 0===y?void 0:y.is_selected)?_x("Yes","affiliate is selected for automatic payout","affiliate-for-woocommerce"):_x("No","affiliate is not selected for automatic payout","affiliate-for-woocommerce")),(null===i.a||void 0===i.a||null===(b=i.a.details)||void 0===b||null===(w=b.automaticPayoutData)||void 0===w?void 0:w.setting_link)?m("span",{class:"ml-4"},m("a",{href:i.a.details.automaticPayoutData.setting_link,target:"_blank",class:"text-indigo-600 hover:text-indigo-900 focus:outline-none focus:underline"},_x("Manage setting","Automatic Payout related setting link on affiliate profile tab","affiliate-for-affiliate"))):"")):"")))),(null===i.a||void 0===i.a||null===(x=i.a.details)||void 0===x?void 0:x.registrationFormData)&&!Object.values(i.a.details.registrationFormData).every((function(e){return""===e||Array.isArray(e)&&0===e.length}))?m("div",null,m("h2",{class:"bg-gray-50 leading-6 cursor-pointer"},m("a",{class:"flex items-center justify-between w-full text-left font-semibold py-2 px-4 text-base","aria-controls":"profile-section-3",onclick:this.toggleAccordion},m("span",{class:"pointer-events-none"},_x("Registration Form Details","Registration form details accordion title","affiliate-for-woocommerce")),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"pointer-events-none h-6 w-6 transform origin-center transition duration-300 ease-out"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})))),m("div",{id:"profile-section-3",class:"section-closed grid text-sm text-slate-600 overflow-hidden transition-all duration-300 ease-in-out opacity-0",style:"max-height: 0;"},m("table",{class:"overflow-hidden"},m("tbody",null,(null===(_=i.a.details.registrationFormData)||void 0===_?void 0:_.first_name)?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4"},_x("First Name","first name label at in affiliate profile tab","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},i.a.details.registrationFormData.first_name)):"",(null===(k=i.a.details.registrationFormData)||void 0===k?void 0:k.last_name)?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4"},_x("Last Name","last name label at in affiliate profile tab","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},i.a.details.registrationFormData.last_name)):"",(null===(P=i.a.details.registrationFormData)||void 0===P?void 0:P.user_url)?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4"},_x("Website","user website label at in affiliate profile tab","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},this.anchorTagComponent(i.a.details.registrationFormData.user_url))):"",(null===(S=i.a.details.registrationFormData)||void 0===S?void 0:S.contact)?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("Way To Contact","contact label at in affiliate profile tab","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},i.a.details.registrationFormData.contact)):"",(null===(O=i.a.details.registrationFormData)||void 0===O?void 0:O.skype)?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("Skype ID","skype id label at in affiliate profile tab","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},i.a.details.registrationFormData.skype)):"",(null===(A=i.a.details.registrationFormData)||void 0===A?void 0:A.description)?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("About Affiliate","affiliate description label at in affiliate profile tab","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},i.a.details.registrationFormData.description)):"",(null===(D=i.a.details.registrationFormData)||void 0===D?void 0:D.additional_data)&&"object"===d(null===(C=i.a.details.registrationFormData)||void 0===C?void 0:C.additional_data)?i.a.details.registrationFormData.additional_data.map((function(e){return m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},null==e?void 0:e.label),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},(null==e?void 0:e.has_url)?j.anchorTagComponent(null==e?void 0:e.value):null==e?void 0:e.value))})):"")))):""))))))}}])&&h(t.prototype,a),p&&h(t,p),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return P}));var i=a(16),r=a(8);function n(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"view",value:function(){return m("header",{class:"bg-white shadow"},m("div",{class:"max-w-7xl mx-auto py-8 sm:px-3 xl:px-8"},m("section",{class:"md:flex md:items-center md:justify-between"},m("div",{class:"flex sm:items-center text-gray-400"},m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},r.a.data.kpi.total_hits),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},__("Visitors","affiliate-for-woocommerce"))),m("svg",{class:"fill-current w-3 h-3 mx-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},r.a.data.kpi.total_orders),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},__("Orders","affiliate-for-woocommerce"))),m("svg",{class:"fill-current w-3 h-3 mx-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},r.a.data.kpi.conversion,"%"),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},__("Conversion Rate","affiliate-for-woocommerce")))))))}}])&&n(t.prototype,a),i&&n(t,i),e}(),s=a(6),l=a(12),c=a(4),u=a(10),d=a(1),f=a(13);function p(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:t.attrs.id||0},this.getStatuses=d.a.getCampaignStatus,this.displayLink=""}var t,a,i;return t=e,i=[{key:"displayLink",get:function(){return e._displayLink},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e._displayLink=t}}],(a=[{key:"oncreate",value:function(e){var t="campaign-editor-"+s.a.details.campaignId;wp.editor.remove(t);var a={tinymce:{wpautop:!1,toolbar1:"bold, italic, strikethrough, bullist, numlist, blockquote, hr, alignleft, aligncenter, alignright, link, unlink, wp_more, spellchecker, fullscreen, wp_adv",toolbar2:"formatselect, underline, alignjustify, forecolor, pastetext, removeformat, charmap, outdent, indent, undo, redo, wp_help",setup:function(e){e.on("init",(function(t){e.setContent(s.a.details.body||"")}))}},quicktags:!0,mediaButtons:!0,textarea_rows:40},i=document.getElementById(t);wp.editor.initialize(t,a),tinymce.execCommand("mceAddEditor",!0,t),i.value=s.a.details.body||"",this.initializeSelect2()}},{key:"onupdate",value:function(){this.initializeSelect2()}},{key:"updateCampaign",value:function(){var e=document.getElementById("campaign-title").value||"",t="campaign-editor-"+s.a.details.campaignId,a=document.getElementById(t);if(!e)return c.a.show({status:"error",message:_x("Please add a campaign title","error message when campaign title is missing","affiliate-for-woocommerce")});tinyMCE&&tinyMCE.triggerSave(),s.a.details.status=document.getElementById("campaign-status").value,s.a.details.slug=document.getElementById("campaign-slug").value,s.a.details.targetLink=document.getElementById("campaign-link").value,s.a.details.shortDescription=document.getElementById("campaign-short").value,s.a.details.body=wp.editor.getContent(t)||a.value,l.a.saveCampaign()}},{key:"updateDisplayLInk",value:function(){this.displayLink=f.a.affiliateDisplayLink(s.a.details.targetLink,s.a.details.slug,"admin")}},{key:"initializeSelect2",value:function(){var e=this,t=jQuery(".afwc-campaign-rule-search"),a={placeholder:t.attr("placeholder")||"",dropdownParent:jQuery(".afwc-campaign-rule-search-container"),minimumInputLength:3,escapeMarkup:function(e){return e},ajax:{url:d.a.getAFWParams("ajaxurl")||"",dataType:"json",delay:1e3,data:function(e){return{term:e.term||"",action:"afwc_campaign_controller",cmd:"search_rule_details",security:d.a.getAFWParams("security.campaign.searchRuleDetails")||""}},processResults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];return e&&jQuery.each(e,(function(e,a){var i=a.title,r=a.children,n=a.group,o=[];jQuery.each(r,(function(e,t){o.push({id:n+"-"+parseInt(e),text:t})})),t.push({text:i,children:o})})),{results:t}},error:function(e,t,a){return console.log(a+": "+e.responseText),{results:[]}},cache:!0}};t.select2(a),t.on("change.select2",(function(a){var i=t.val()||[];s.a.details.rules=i.length>0?e.formatRulesToSave(i):{}}))}},{key:"formatRulesToSave",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length)return{};var t={};return e.map((function(e){var a=e.split("-",2);if(a.length>0){var i=a[0],r=a[a.length-1];t[i]||(t[i]=new Array),t[i].push(parseInt(r))}})),t}},{key:"ruleSearchComponent",value:function(){var e=s.a.details.ruleMaps||{};return m("div",{class:"afwc-campaign-rule-search-container flex-1 w-full"},m("select",{id:"afwc_campaign_rule_search",class:"afwc-campaign-rule-search wc-enhanced-select w-full text-sm leading-5 text-gray-500 bg-transparent form-select w-full block",placeholder:_x("Search by affiliates or affiliate tags","placeholder for searching target affiliates for campaign visibility","affiliate-for-woocommerce"),multiple:"multiple",style:"width: 100%"},Object.keys(e).map((function(t){var a=e[t];return m("optgroup",{label:a.title||a.group||""},a.children?Object.keys(a.children).map((function(e){return m("option",{value:a.group+"-"+e,selected:"selected"},a.children[e]||e)})):"")}))))}},{key:"view",value:function(e){var t=this;return this.updateDisplayLInk(),m("aside",{class:"fixed inset-0 overflow-hidden",style:"z-index: 100099"},m("div",{class:"absolute inset-0 overflow-hidden"},m("div",{class:"absolute inset-0 bg-gray-500 transition-opacity opacity-75"}),m("section",{class:"absolute inset-y-0 right-0 pl-20 max-w-full flex"},m("div",{class:"w-screen max-w-5xl"},m("div",{class:"h-full flex flex-col space-y-6 bg-white shadow-xl overflow-y-scroll"},m("header",{class:"px-4 py-2 sticky top-0 bg-gray-100",style:"z-index:120001"},m("div",{class:"flex items-center justify-between space-x-3"},m("h2",{class:"text-lg leading-7 font-medium text-gray-900"},s.a.details.campaignId>0&&m("span",{class:"text-indigo-700"},"#",s.a.details.campaignId," "),m("span",null,_x("Campaign Detail","Heading of campaign create/edit tab","affiliate-for-woocommerce"))),m("div",{class:"flex items-center mt-2 text-right lg:mt-0 space-x-3"},this.getStatuses()?m("[",null,m("label",{for:"campaign-status",class:"hidden sr-only"},_x("Status","campaign status","affiliate-for-woocommerce")),m("select",{id:"campaign-status",class:"h-10 form-select pl-3 pr-10 py-2 text-base leading-6 border-gray-100 focus:outline-none focus:shadow-outline-blue  focus:border-blue-100 sm:text-sm sm:leading-5 text-gray-500","aria-label":_x("Campaign status","Title for campaign status","affiliate-for-woocommerce")},Object.keys(this.getStatuses()).map((function(e){return m("option",{value:e,selected:s.a.details.status==e?"selected":""},t.getStatuses(e)||"")})))):"",m("button",{type:"button",class:"inline-flex justify-center px-5 py-2 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-lg hover:bg-indigo-500 focus:outline-none focus:shadow-outline-indigo",onclick:function(){return t.updateCampaign()}},_x("Save","campaign save","affiliate-for-woocommerce")),m("button",{type:"button",class:"p-1 transition duration-150 ease-in-out border-transparent rounded-full focus:outline-none focus:bg-gray-100 hover:text-red-600 text-red-800","aria-label":_x("Delete campaign","Label for delete campaign button","affiliate-for-woocommerce"),onclick:function(){confirm(_x("Are you sure you want to permanently delete this campaign?","confirmation alert for deleting a campaign","affiliate-for-woocommerce"))&&l.a.deleteCampaign()}},m("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",class:"w-5 h-5"},m("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}))),m("button",{class:"text-gray-400 hover:text-gray-500 transition ease-in-out duration-150","aria-label":_x("Close panel","Label for campaign close panel button on admin side","affiliate-for-woocommerce"),onclick:function(){return s.a.removeCurrentCampaign()}},m("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})))))),m("div",{class:"relative flex-1 px-4 sm:px-6"},m("div",{class:"absolute inset-0 px-4 sm:px-6"},m("div",{class:"h-full space-y-6"},m("div",{class:"space-y-1"},m("div",{class:"flex flex-col space-y-2"},m("label",{for:"campaign-title",class:"text-base font-medium leading-5 text-gray-900"},_x("Name","campaign title","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},_x("A descriptive title for this campaign so affiliates can easily understand purpose of the campaign.","campaign title description","affiliate-for-woocommerce"))),m("div",{class:"relative rounded-md shadow-sm"},m("input",{id:"campaign-title",class:"form-input block w-full sm:text-sm sm:leading-5 transition ease-in-out duration-150",value:s.a.details.title||"",oninput:function(e){s.a.details.title=e.target.value,s.a.details.slug=e.target.value.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}}))),m("div",{class:"space-y-1"},m("div",{class:"flex flex-col space-y-2"},m("label",{for:"campaign-slug",class:"text-base font-medium leading-5 text-gray-900"},_x("Slug","campaign slug","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},_x("Short text in links for this campaign: ","campaign short text description","affiliate-for-woocommerce"),m("code",{class:"font-mono"},this.displayLink||""))),m("div",{class:"relative rounded-md shadow-sm"},m("input",{id:"campaign-slug",class:"form-input block w-full sm:text-sm sm:leading-5 transition ease-in-out duration-150",value:s.a.details.slug||"",oninput:function(e){return s.a.details.slug=e.target.value||""}}))),m("div",{class:"space-y-1"},m("div",{class:"flex flex-col space-y-2"},m("label",{for:"campaign-link",class:"text-base font-medium leading-5 text-gray-900"},_x("Destination Link","campaign url","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},_x("Want to take campaign visitors to a specific product / landing page? Or shop / home page? Enter it here.","campaign destination link description","affiliate-for-woocommerce"))),m("div",{class:"relative rounded-md shadow-sm"},m("input",{id:"campaign-link",class:"form-input block w-full sm:text-sm sm:leading-5 transition ease-in-out duration-150",value:s.a.details.targetLink||"",oninput:function(e){return s.a.details.targetLink=e.target.value||""}}))),m("div",{className:"space-y-1"},m("div",{className:"flex flex-col space-y-2"},m("label",{htmlFor:"afwc_campaign_rule_search",className:"text-base font-medium leading-5 text-gray-900"},_x("Visibility","Label for visibility in campaign editor","affiliate-for-woocommerce")),m("p",{className:"text-xs text-gray-500"},_x("Choose individual affiliates or affiliate tags you want to show this campaign to. Leave it blank to show it to all.","Description for visibility in campaign editor","affiliate-for-woocommerce"))),m("div",{className:"relative rounded-md shadow-sm"},this.ruleSearchComponent())),m("div",{class:"space-y-1"},m("div",{class:"flex flex-col space-y-2"},m("label",{for:"campaign-short",class:"text-base font-medium leading-5 text-gray-900"},_x("Short Description","campaign short description","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},_x("This will show along with campaign name before people see all the details. Summarize the campaign here.","campaign short description","affiliate-for-woocommerce"))),m("div",{class:"relative rounded-md shadow-sm"},m("textarea",{id:"campaign-short",class:"form-input block w-full sm:text-sm sm:leading-5 transition ease-in-out duration-150",rows:"3"},s.a.details.shortDescription||""))),m("div",{class:"space-y-1"},m("div",{class:"flex flex-col space-y-2"},m("label",{for:"campaign-editor-"+s.a.details.campaignId,class:"text-base font-medium leading-5 text-gray-900"},_x("Full Description","campaign description","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},_x("Use this editor to insert all the details, rules, creatives, swipes, videos, guidelines or anything else you want to present to affiliate partners. Format it well so that they can easily copy out for their own usage.","campaign full description","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},_x("If you prefer, create a .zip file with multiple assets. Upload it to your WordPress Media, and link the file from here. You can also link to any external resources as usual.","campaign full description","affiliate-for-woocommerce"))),m("div",{class:"relative pt-3"},m("textarea",{id:"campaign-editor-"+s.a.details.campaignId,class:"wp-editor-area",style:"height: 300px;",autocomplete:"off",row:"60",cols:"40"},s.a.details.body||"")))))))),c.a.flags.showNotification?m(u.a,null):null)))}}])&&p(t.prototype,a),i&&p(t,i),e}();function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:t.attrs.id||0},s.a.currentCampaignID=0}var t,a,i;return t=e,(a=[{key:"refreshModel",value:function(e){this.params.id=e,this.model=new s.a}},{key:"showCampaignDetails",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(parseInt(t)){if(parseInt(t)!==parseInt(s.a.currentCampaignID)&&r.a.data.campaigns){var a=(null===(e=r.a.data.campaigns.filter((function(e){return e.campaignId==t})))||void 0===e?void 0:e[0])||null;a?(s.a.currentCampaignID=t||0,this.refreshModel(t)):s.a.removeCurrentCampaign()}}else s.a.currentCampaignID=0}},{key:"maybeShowCampaignDetails",value:function(e){var t;(null==e||null===(t=e.attrs)||void 0===t?void 0:t.id)&&this.showCampaignDetails(e.attrs.id)}},{key:"view",value:function(e){return this.maybeShowCampaignDetails(e),m("section",null,m("h3",{class:"text-lg font-bold text-gray-600 sm:text-3xl leading-8"},_x("Campaigns","Campaigns screen headline","affiliate-for-woocommerce")),m("ul",{class:"text-gray-600 py-3 max-h-screen overflow-auto"},r.a.data.campaigns.map((function(e){return m("li",{class:"my-6 overflow-hidden text-xs text-gray-400 transition duration-150 ease-in-out bg-white rounded-lg shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50",onclick:function(){return e.campaignId?m.route.set("/campaigns/:id",{id:e.campaignId}):""}},m("a",{class:"block py-3 cursor-pointer hover:bg-white focus:outline-none focus:bg-white transition duration-150 ease-in-out"+(s.a.currentCampaignID==e.campaignId?" bg-white outline-none":"")},m("div",{class:"flex items-center pl-4 py-2"},m("div",{class:("Draft"===e.status?"text-gray-400":"text-gray-700")+" sm:truncate flex-1"},m("div",{class:"w-full"},m("span",{class:"text-lg leading-6"},e.title||"")),m("div",{class:"flex items-center w-full mt-1 space-x-4"},m("div",{class:"whitespace-no-wrap"},m("span",{class:"mr-2 text-gray-400"},"#",e.campaignId||0),m("span",{class:"Draft"===e.status?"text-gray-400":"text-green-400"},d.a.getCampaignStatus(e.status)||""," ")),m("span",{class:"mr-2 text-gray-400"},_x("Visibility:","Title for visibility of the campaign in the campaign list","affiliate-for-woocommerce")," ","object"===h(e.rules)&&Object.keys(e.rules).length>0?_x("Restricted","Visibility label where rules are applied in the campaigns","affiliate-for-woocommerce"):_x("All","Visibility label where none of any rule applied in the campaigns","affiliate-for-woocommerce")))),m("div",{class:"mx-2"},m("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},m("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"}))))))}))),0!==s.a.currentCampaignID?m(g,{id:s.a.currentCampaignID}):"")}}])&&v(t.prototype,a),i&&v(t,i),e}();function b(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}s.a.currentCampaignID=0;var w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"view",value:function(e){var t;return m("main",{class:"max-w-7xl mx-auto my-4 py-2 px-8 grid gap-8 grid-cols-3"},m("section",{class:"col-span-2 overflow-y-auto"},m(y,{id:(null==e||null===(t=e.attrs)||void 0===t?void 0:t.id)||0})),m("section",{class:"col-span-1 space-y-6 text-gray-500 pt-12 pr-8"},m("p",null,_x("Campaigns help you organize all your marketing assets, promotional materials, and instructions you need to provide to your affiliate partners.","description of campaigns feature and usage","affiliate-for-woocommerce")),m("p",null,_x("Your affiliates can view these campaigns under their My Account > Affiliates > Campaigns tab. This tab will be automatically hidden when there are no active campaigns.","description of campaigns feature and visibility for affiliates","affiliate-for-woocommerce")),m("p",null,m("a",{class:"cursor-pointer text-sm font-medium leading-6 text-indigo-600 hover:text-indigo-800 hover:underline",target:"_blank",href:afwcDashboardParams.afwDocLink+"how-to-create-affiliate-marketing-campaigns/"},_x("How to create affiliate marketing campaigns","documentation link to campaigns feature","affiliate-for-woocommerce"))),m("hr",null),m("p",null,_x("After activation, the plugin adds a few sample campaigns to help you quickly get started.","description of campaigns re-generate feature","affiliate-for-woocommerce")),m("p",null,_x("You can easily re-import these campaigns with just a click. Simply ","description of campaigns to re-import","affiliate-for-woocommerce"),m("a",{href:"",class:"cursor-pointer text-sm font-medium leading-6 text-indigo-600 hover:text-indigo-800 hover:underline",onclick:function(e){e.preventDefault(),l.a.regenerateSampleCampaigns()}},_x("re-generate sample campaigns","link to re-generate sample campaigns","affiliate-for-woocommerce")))))}}])&&b(t.prototype,a),i&&b(t,i),e}(),x=a(5);function _(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function k(e,t,a){return t&&_(e.prototype,t),a&&_(e,a),e}var P=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize(t.attrs)}return k(e,[{key:"initialize",value:function(e){this.urlParams=Object.keys(e).length?e:{start_date:new Date((new Date).setDate((new Date).getDate()-30)).toISOString().slice(0,10),end_date:(new Date).toISOString().slice(0,10)},this.model=new r.a(this.urlParams)}}]),k(e,[{key:"onupdate",value:function(e){this.urlParams!=e.attrs&&Object.keys(e.attrs).length&&this.initialize(e.attrs)}},{key:"view",value:function(e){var t;return m("div",null,m(i.a,{startDate:this.urlParams.start_date,endDate:this.urlParams.end_date}),r.a.data.campaigns.length>0?m("[",null,m(o,null),m(w,{id:(null==e||null===(t=e.attrs)||void 0===t?void 0:t.id)||0})):x.a.showLoader?"":m("header",{class:"bg-white shadow"},m("div",{class:"max-w-7xl mx-auto py-40 sm:px-3 xl:px-8 text-center text-gray-500"},m("p",{class:"text-xl font-medium leading-8"},_x("No campaigns yet.","description for no campaigns exist","affiliate-for-woocommerce")),m("div",{class:"text-lg mx-auto leading-8 max-w-md mt-6 space-y-4"},m("p",null,_x('Go ahead, click that "Add a Campaign" button in the top bar to create your first campaign.',"description of add campaign","affiliate-for-woocommerce")),m("p",null,_x("You can easily import sample campaigns with just a click - ","description of campaigns to re-import","affiliate-for-woocommerce"),m("a",{href:"",class:"cursor-pointer text-sm font-medium leading-6 text-indigo-600 hover:text-indigo-800 hover:underline",onclick:function(e){e.preventDefault(),l.a.regenerateSampleCampaigns()}},_x("Generate sample campaigns","link to generate sample campaigns","affiliate-for-woocommerce"))))),-1===s.a.currentCampaignID?m(g,{id:s.a.currentCampaignID}):""),c.a.flags.showNotification?m(u.a,null):null)}}]),e}()},function(e,t,a){e.exports=function(e){var t={};function a(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(i,r,function(t){return e[t]}.bind(null,r));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=90)}({17:function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;var i=a(18),r=function(){function e(){}return e.getFirstMatch=function(e,t){var a=t.match(e);return a&&a.length>0&&a[1]||""},e.getSecondMatch=function(e,t){var a=t.match(e);return a&&a.length>1&&a[2]||""},e.matchAndReturnConst=function(e,t,a){if(e.test(t))return a},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,a,i){void 0===i&&(i=!1);var r=e.getVersionPrecision(t),n=e.getVersionPrecision(a),o=Math.max(r,n),s=0,l=e.map([t,a],(function(t){var a=o-e.getVersionPrecision(t),i=t+new Array(a+1).join(".0");return e.map(i.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(i&&(s=o-Math.min(r,n)),o-=1;o>=s;){if(l[0][o]>l[1][o])return 1;if(l[0][o]===l[1][o]){if(o===s)return 0;o-=1}else if(l[0][o]<l[1][o])return-1}},e.map=function(e,t){var a,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(a=0;a<e.length;a+=1)i.push(t(e[a]));return i},e.find=function(e,t){var a,i;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(a=0,i=e.length;a<i;a+=1){var r=e[a];if(t(r,a))return r}},e.assign=function(e){for(var t,a,i=e,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[e].concat(n));var s=function(){var e=n[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){i[t]=e[t]}))};for(t=0,a=n.length;t<a;t+=1)s();return e},e.getBrowserAlias=function(e){return i.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return i.BROWSER_MAP[e]||""},e}();t.default=r,e.exports=t.default},18:function(e,t,a){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;var i,r=(i=a(91))&&i.__esModule?i:{default:i},n=a(18);function o(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(){}var t,a;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new r.default(e,t)},e.parse=function(e){return new r.default(e).getResult()},t=e,(a=[{key:"BROWSER_MAP",get:function(){return n.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return n.ENGINE_MAP}},{key:"OS_MAP",get:function(){return n.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return n.PLATFORMS_MAP}}])&&o(t,a),e}();t.default=s,e.exports=t.default},91:function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;var i=l(a(92)),r=l(a(93)),n=l(a(94)),o=l(a(95)),s=l(a(17));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(n.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,a={},i=0,r={},n=0;if(Object.keys(e).forEach((function(t){var o=e[t];"string"==typeof o?(r[t]=o,n+=1):"object"==typeof o&&(a[t]=o,i+=1)})),i>0){var o=Object.keys(a),l=s.default.find(o,(function(e){return t.isOS(e)}));if(l){var c=this.satisfies(a[l]);if(void 0!==c)return c}var u=s.default.find(o,(function(e){return t.isPlatform(e)}));if(u){var d=this.satisfies(a[u]);if(void 0!==d)return d}}if(n>0){var f=Object.keys(r),m=s.default.find(f,(function(e){return t.isBrowser(e,!0)}));if(void 0!==m)return this.compareVersion(r[m])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var a=this.getBrowserName().toLowerCase(),i=e.toLowerCase(),r=s.default.getBrowserTypeByAlias(i);return t&&r&&(i=r.toLowerCase()),i===a},t.compareVersion=function(e){var t=[0],a=e,i=!1,r=this.getBrowserVersion();if("string"==typeof r)return">"===e[0]||"<"===e[0]?(a=e.substr(1),"="===e[1]?(i=!0,a=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?a=e.substr(1):"~"===e[0]&&(i=!0,a=e.substr(1)),t.indexOf(s.default.compareVersions(r,a,i))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=c,e.exports=t.default},92:function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;var i,r=(i=a(17))&&i.__esModule?i:{default:i},n=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},a=r.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||r.default.getFirstMatch(n,e);return a&&(t.version=a),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},a=r.default.getFirstMatch(n,e)||r.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},a=r.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||r.default.getFirstMatch(n,e);return a&&(t.version=a),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},a=r.default.getFirstMatch(n,e)||r.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},a=r.default.getFirstMatch(n,e)||r.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},a=r.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||r.default.getFirstMatch(n,e);return a&&(t.version=a),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},a=r.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||r.default.getFirstMatch(n,e);return a&&(t.version=a),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},a=r.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||r.default.getFirstMatch(n,e);return a&&(t.version=a),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},a=r.default.getFirstMatch(n,e)||r.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},a=r.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(n,e);return a&&(t.version=a),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},a=r.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(n,e);return a&&(t.version=a),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},a=r.default.getFirstMatch(n,e)||r.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},a=r.default.getFirstMatch(n,e)||r.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},a=r.default.getFirstMatch(n,e)||r.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},a=r.default.getFirstMatch(n,e)||r.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},a=r.default.getFirstMatch(n,e)||r.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},a=r.default.getFirstMatch(n,e)||r.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},a=r.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(n,e);return a&&(t.version=a),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},a=r.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(n,e);return a&&(t.version=a),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},a=r.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},a=r.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},a=r.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},a=r.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},a=r.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},a=r.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return a&&(t.version=a),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},a=r.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},a=r.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},a=r.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},a=r.default.getFirstMatch(n,e)||r.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},a=r.default.getFirstMatch(n,e)||r.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},a=r.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},a=r.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(n,e);return a&&(t.version=a),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},a=r.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(n,e);return a&&(t.version=a),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},a=r.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},a=r.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},a=r.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},a=r.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(n,e);return a&&(t.version=a),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},a=r.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},a=r.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:function(e){var t=!e.test(/like android/i),a=e.test(/android/i);return t&&a},describe:function(e){var t={name:"Android Browser"},a=r.default.getFirstMatch(n,e);return a&&(t.version=a),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},a=r.default.getFirstMatch(n,e);return a&&(t.version=a),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},a=r.default.getFirstMatch(n,e);return a&&(t.version=a),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:r.default.getFirstMatch(t,e),version:r.default.getSecondMatch(t,e)}}}];t.default=o,e.exports=t.default},93:function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;var i,r=(i=a(17))&&i.__esModule?i:{default:i},n=a(18),o=[{test:[/Roku\/DVP/],describe:function(e){var t=r.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:n.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=r.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:n.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=r.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),a=r.default.getWindowsVersionName(t);return{name:n.OS_MAP.Windows,version:t,versionName:a}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:n.OS_MAP.iOS},a=r.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return a&&(t.version=a),t}},{test:[/macintosh/i],describe:function(e){var t=r.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),a=r.default.getMacOSVersionName(t),i={name:n.OS_MAP.MacOS,version:t};return a&&(i.versionName=a),i}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=r.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:n.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),a=e.test(/android/i);return t&&a},describe:function(e){var t=r.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),a=r.default.getAndroidVersionName(t),i={name:n.OS_MAP.Android,version:t};return a&&(i.versionName=a),i}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=r.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),a={name:n.OS_MAP.WebOS};return t&&t.length&&(a.version=t),a}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=r.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||r.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||r.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:n.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=r.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:n.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=r.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:n.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:n.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:n.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=r.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:n.OS_MAP.PlayStation4,version:t}}}];t.default=o,e.exports=t.default},94:function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;var i,r=(i=a(17))&&i.__esModule?i:{default:i},n=a(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=r.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",a={type:n.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(a.model=t),a}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:n.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:n.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:n.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:n.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:n.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:n.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),a=e.test(/like (ipod|iphone)/i);return t&&!a},describe:function(e){var t=r.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:n.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:n.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:n.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:n.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:n.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:n.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:n.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:n.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:n.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:n.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:n.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:n.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:n.PLATFORMS_MAP.tv}}}];t.default=o,e.exports=t.default},95:function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;var i,r=(i=a(17))&&i.__esModule?i:{default:i},n=a(18),o=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:n.ENGINE_MAP.Blink};var t=r.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:n.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:n.ENGINE_MAP.Trident},a=r.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:n.ENGINE_MAP.Presto},a=r.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:function(e){var t=e.test(/gecko/i),a=e.test(/like gecko/i);return t&&!a},describe:function(e){var t={name:n.ENGINE_MAP.Gecko},a=r.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:n.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:n.ENGINE_MAP.WebKit},a=r.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return a&&(t.version=a),t}}];t.default=o,e.exports=t.default}})},function(e,t,a){"use strict";a.d(t,"a",(function(){return k}));var i=a(1),r=a(5);function n(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize()}var t,a,o;return t=e,o=[{key:"initialize",value:function(){e.details={affiliateSetup:{affiliateRoles:[],enableAffiliate:"no",publishRegForm:"no"},basicSettings:{afwc_use_referral_coupons:"yes",afwc_allow_self_refer:"yes",afwc_allow_custom_affiliate_identifier:"yes",afwc_cookie_expiration:60,afwc_pname:"ref"},commissions:{amount:0,type:"Percentage"},emails:{}}}},{key:"updateAffiliates",value:function(){return new Promise((function(t,a){var n,o,s,l,c,u;r.a.showLoader=!0,r.a.msg=_x("Updating","Label for loader while updating the record","affiliate-for-woocommerce"),i.a.requestHandler({requestData:{cmd:"setup_affiliates",affiliate_roles:JSON.stringify((null==e||null===(n=e.details)||void 0===n||null===(o=n.affiliateSetup)||void 0===o?void 0:o.affiliateRoles)||[]),enable_affiliate:(null==e||null===(s=e.details)||void 0===s||null===(l=s.affiliateSetup)||void 0===l?void 0:l.enableAffiliate)||"",publish_registration_page:(null==e||null===(c=e.details)||void 0===c||null===(u=c.affiliateSetup)||void 0===u?void 0:u.publishRegForm)||"no",security:i.a.getAFWParams("security.onboarding.setupAffiliates")||"",dashboard:"afwc_onboarding_controller"},callback:function(e){r.a.showLoader=!1,e&&e.success?t():a()}})}))}},{key:"updateBasicSettings",value:function(){return new Promise((function(t,a){var n;r.a.showLoader=!0,r.a.msg=_x("Updating","Label for loader while updating the record","affiliate-for-woocommerce"),i.a.requestHandler({requestData:{cmd:"setup_basic_settings",settings:JSON.stringify(null==e||null===(n=e.details)||void 0===n?void 0:n.basicSettings),security:i.a.getAFWParams("security.onboarding.setupBasicSettings")||"",dashboard:"afwc_onboarding_controller"},callback:function(e){r.a.showLoader=!1,e&&e.success?t():a()}})}))}},{key:"updateCommissions",value:function(){return new Promise((function(t,a){var n,o,s,l;r.a.showLoader=!0,r.a.msg=_x("Updating","Label for loader while updating the record","affiliate-for-woocommerce"),i.a.requestHandler({requestData:{cmd:"setup_commissions",commission_amount:(null==e||null===(n=e.details)||void 0===n||null===(o=n.commissions)||void 0===o?void 0:o.amount)||0,commission_type:(null==e||null===(s=e.details)||void 0===s||null===(l=s.commissions)||void 0===l?void 0:l.type)||"Percentage",security:i.a.getAFWParams("security.onboarding.setupCommissions")||"",dashboard:"afwc_onboarding_controller"},callback:function(e){r.a.showLoader=!1,e&&e.success?t():a()}})}))}},{key:"updateEmails",value:function(){return new Promise((function(t,a){var n;r.a.showLoader=!0,r.a.msg=_x("Updating","Label for loader while updating the record","affiliate-for-woocommerce"),i.a.requestHandler({requestData:{cmd:"setup_emails",email_setup:JSON.stringify((null==e||null===(n=e.details)||void 0===n?void 0:n.emails)||{}),security:i.a.getAFWParams("security.onboarding.setupEmails")||"",dashboard:"afwc_onboarding_controller"},callback:function(e){r.a.showLoader=!1,e&&e.success?t():a()}})}))}},{key:"finishSteps",value:function(){return new Promise((function(){window.location.href=i.a.getAFWParams("dashboardLink")||""}))}},{key:"details",get:function(){return e._details},set:function(t){e._details=t}}],(a=null)&&n(t.prototype,a),o&&n(t,o),e}();function s(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}o.initialize();var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,r;return t=e,(a=[{key:"updateProps",value:function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";a&&i&&(null==o||null===(e=o.details)||void 0===e||null===(t=e.affiliateSetup)||void 0===t?void 0:t.hasOwnProperty(a))&&(o.details.affiliateSetup[a]=i)}},{key:"initializeSelect2",value:function(){var e=this,t=jQuery(".afwc-user-roles");t.length&&(t.select2(),t.on("select2:select",(function(){t.trigger("change"),e.updateProps("affiliateRoles",t.select2("val")||[])})))}},{key:"oncreate",value:function(){this.initializeSelect2()}},{key:"view",value:function(){var e,t=this,a=i.a.getAFWParams("userRoles")||{};return m("div",{class:"w-full"},m("div",{class:"mb-6"},m("h2",{class:"text-2xl font-bold leading-snug text-gray-800 sm:text-3xl"},_x("Choosing affiliates","Title for setting up affiliates","affiliate-for-woocommerce")),m("p",null,_x("Set up your affiliate program and grant access to affiliates.","Description for setting up affiliates","affiliate-for-woocommerce"))),m("form",null,m("div",{class:"space-y-8"},m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-3"},m("h3",{class:"text-lg font-medium text-gray-900"},_x("Registration form","Section title for registration form","affiliate-for-woocommerce")),m("div",{class:"space-x-2"},m("input",{id:"publish_registration_form",type:"checkbox",class:"w-4 h-4 text-indigo-600 transition duration-150 ease-in-out form-checkbox",onchange:function(e){var a;return t.updateProps("publishRegForm",(null==e||null===(a=e.target)||void 0===a?void 0:a.checked)?"yes":"no")}}),m("label",{for:"publish_registration_form",class:"text-sm space-x-1"},m("span",null,_x("Allow users to sign up as affiliates through the registration form.","Label for enabling registration form","affiliate-for-woocommerce")),m("span",null,"["),i.a.getAFWParams("regFormPageLink")?m("[",null,m("a",{href:i.a.getAFWParams("regFormPageLink"),target:"_blank",class:"cursor-pointer text-indigo-600 hover:underline"},_x("Review","Link for registration form page","affiliate-for-woocommerce")),m("span",null,"|")):"",m("a",{href:i.a.getAFWParams("regFormSettingLink")||"",target:"_blank",class:"cursor-pointer text-indigo-600 hover:underline"},_x("Edit","Link for default registration form setting","affiliate-for-woocommerce")),m("span",null,"]"))),m("div",{class:"text-sm"},_x("You can also customize the form using","Registration form description","affiliate-for-woocommerce"),m("a",{href:afwcDashboardParams.afwDocLink+"how-to-create-affiliate-registration-forms-with-contact-form-7/",target:"_blank",class:"cursor-pointer text-indigo-600 hover:underline"},_x(" Contact Form 7","Link for creating with Contact Form 7","affiliate-for-woocommerce")),_x(" or ","Link for creating with Contact Form 7","affiliate-for-woocommerce"),m("a",{href:afwcDashboardParams.afwDocLink+"how-to-create-affiliate-registration-forms-with-elementor-form-builder/",target:"_blank",class:"cursor-pointer text-indigo-600 hover:underline"},_x("Elementor","Link for creating with Elementor","affiliate-for-woocommerce")),_x(" form builder.","Registration form description","affiliate-for-woocommerce"))),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-3"},m("h3",{class:"text-lg font-medium text-gray-900 mb-4"},_x("Individual users","Section title for individual users","affiliate-for-woocommerce")),m("div",{class:"space-x-2"},m("input",{id:"enable_affiliate",type:"checkbox",class:"w-4 h-4 text-indigo-600 transition duration-150 ease-in-out form-checkbox",onchange:function(e){var a;return t.updateProps("enableAffiliate",(null==e||null===(a=e.target)||void 0===a?void 0:a.checked)?"yes":"no")}}),m("label",{for:"enable_affiliate",class:"text-sm"},_x("Enable this if you want to become an affiliate for testing purposes.","Label for enabling individual affiliate","affiliate-for-woocommerce"))),m("div",{class:"text-sm"},_x("You can set individual users as affiliates from their User Profile.","Description for enabling individual affiliates","affiliate-for-woocommerce"))),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-3"},m("h3",{class:"text-lg font-medium text-gray-900"},_x("User roles","Section title for user roles","affiliate-for-woocommerce")),m("div",{class:"text-sm"},_x("Select user roles to automatically make them your affiliates.","Description for selecting user roles","affiliate-for-woocommerce")),m("div",{class:"flex items-center gap-3 w-full"},m("select",{id:"affiliate_user_roles","data-placeholder":_x("Select user roles","Placeholder for selecting affiliate user roles","affiliate-for-woocommerce"),class:"afwc-user-roles py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent form-select w-full wc-enhanced-select","aria-label":_x("Affiliate user roles","Title for affiliate user roles","affiliate-for-woocommerce"),multiple:"multiple"},a&&(null===(e=Object.keys(a))||void 0===e?void 0:e.length)&&Object.keys(a).map((function(e){return m("option",{value:e},a[e]||"")}))))))))}}])&&s(t.prototype,a),r&&s(t,r),e}();function c(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"updateProps",value:function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";a&&(null==o||null===(e=o.details)||void 0===e||null===(t=e.basicSettings)||void 0===t?void 0:t.hasOwnProperty(a))&&(o.details.basicSettings[a]=i)}},{key:"view",value:function(){var e,t,a,i,r,n,s,l,c,u,d=this;return m("div",{class:"w-full"},m("div",{class:"mb-6"},m("h2",{class:"text-2xl font-bold leading-snug text-gray-800 sm:text-3xl"},_x("Program setup","Title for program setup","affiliate-for-woocommerce")),m("p",null,_x("Configure some basic options.","Description for setting up basic settings","affiliate-for-woocommerce"))),m("div",{class:"space-y-8"},m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-2"},m("div",{class:"flex flex-row items-center space-x-4"},m("input",{id:"afwc_use_referral_coupons",class:"w-4 h-4 text-indigo-600 transition duration-150 ease-in-out form-checkbox",type:"checkbox",checked:"yes"===(null==o||null===(e=o.details)||void 0===e||null===(t=e.basicSettings)||void 0===t?void 0:t.afwc_use_referral_coupons),onchange:function(e){return d.updateProps("afwc_use_referral_coupons",e.target.checked?"yes":"no")}}),m("label",{for:"afwc_use_referral_coupons",class:"text-sm font-semibold"},_x("Enable use of referral coupons","Label for enabling referral coupons","affiliate-for-woocommerce"))),m("p",{class:"text-sm"},_x("Use coupons for referral - along with affiliate links.","Description for enabling referral coupons","affiliate-for-woocommerce"))),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-2"},m("div",{class:"flex flex-row items-center space-x-4"},m("input",{id:"afwc_allow_self_refer",class:"w-4 h-4 text-indigo-600 transition duration-150 ease-in-out form-checkbox",type:"checkbox",checked:"yes"===(null==o||null===(a=o.details)||void 0===a||null===(i=a.basicSettings)||void 0===i?void 0:i.afwc_allow_self_refer),onchange:function(e){return d.updateProps("afwc_allow_self_refer",e.target.checked?"yes":"no")}}),m("label",{for:"afwc_allow_self_refer",class:"text-sm font-semibold"},_x("Enable affiliate self-refer","Label for affiliate self-refer","affiliate-for-woocommerce"))),m("p",{class:"text-sm"},_x("Disable this to prevent affiliates from earning commissions on their own referral link/coupon.","Affiliate self-refer description","affiliate-for-woocommerce"))),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-2"},m("div",{class:"flex flex-row items-center space-x-4"},m("input",{id:"afwc_allow_custom_affiliate_identifier",class:"w-4 h-4 text-indigo-600 transition duration-150 ease-in-out form-checkbox",type:"checkbox",checked:"yes"===(null==o||null===(r=o.details)||void 0===r||null===(n=r.basicSettings)||void 0===n?void 0:n.afwc_allow_custom_affiliate_identifier),onchange:function(e){var t;return d.updateProps("afwc_allow_custom_affiliate_identifier",(null==e||null===(t=e.target)||void 0===t?void 0:t.checked)?"yes":"no")}}),m("label",{for:"afwc_allow_custom_affiliate_identifier",class:"text-sm font-semibold"},_x("Enable personalize affiliate identifier","Label for personalize affiliate identifier","affiliate-for-woocommerce"))),m("p",{class:"text-sm"},_x("Allow affiliates to use other referral identifiers instead of {user_id}.","Personalize affiliate identifier description","affiliate-for-woocommerce"))),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-2"},m("div",{class:"flex flex-row items-center space-x-4"},m("label",{for:"afwc_cookie_expiration",class:"text-sm font-semibold"},_x("Cookie duration (in days):","Label for cookie duration","affiliate-for-woocommerce")),m("input",{id:"afwc_cookie_expiration",class:"form-input sm:text-sm sm:leading-5",type:"number",autocomplete:"off",min:"0",value:(null==o||null===(s=o.details)||void 0===s||null===(l=s.basicSettings)||void 0===l?void 0:l.afwc_cookie_expiration)||"0",oninput:function(e){var t;return d.updateProps("afwc_cookie_expiration",parseInt(null==e||null===(t=e.target)||void 0===t?void 0:t.value)||0)}})),m("p",{class:"text-sm"},_x("Set '0' for 'session-only' referrals and '36500' for 100-years / lifetime referrals. If a purchase is made within this time frame from the first referred visit, the affiliate will be credited for the sale.","Cookie duration description","affiliate-for-woocommerce"))),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-2"},m("div",{class:"flex flex-row items-center space-x-4"},m("label",{for:"afwc_pname",class:"text-sm font-semibold"},_x("Tracking param name:","Label for tracking param name","affiliate-for-woocommerce")),m("input",{id:"afwc_pname",class:"form-input sm:text-sm sm:leading-5",type:"text",autocomplete:"off",value:(null==o||null===(c=o.details)||void 0===c||null===(u=c.basicSettings)||void 0===u?void 0:u.afwc_pname)||"",oninput:function(e){var t;return d.updateProps("afwc_pname",(null==e||null===(t=e.target)||void 0===t?void 0:t.value)||"")}})),m("p",{class:"text-sm"},_x("Specify the tracking parameter for affiliate referral links.","Tracking param name description","affiliate-for-woocommerce"))),m("p",{class:"text-sm p-3"},m("span",{class:"font-semibold"},_x("Note: ","Label for My Account setup note","affiliate-for-woocommerce")),m("span",null,_x("The affiliate's 'My Account' is already set up. It can be changed later from the settings (by creating a custom page).","My Account setup note","affiliate-for-woocommerce")))))}}])&&c(t.prototype,a),i&&c(t,i),e}();function d(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,r;return t=e,(a=[{key:"updateProps",value:function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";a&&i&&(null==o||null===(e=o.details)||void 0===e||null===(t=e.commissions)||void 0===t?void 0:t.hasOwnProperty(a))&&(o.details.commissions[a]=i)}},{key:"view",value:function(){var e,t,a=this;return m("div",{class:"w-full"},m("div",{class:"mb-6"},m("h2",{class:"text-2xl font-bold leading-snug text-gray-800 sm:text-3xl"},_x("Commission plan","Title for setting up storewide commission","affiliate-for-woocommerce")),m("p",null,_x("Set up a default commission rate for affiliates.","description for setting up default commission plan","affiliate-for-woocommerce"))),m("div",{class:"space-y-8"},m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-3"},m("h3",{class:"text-lg font-medium text-gray-900"},_x("Storewide default commission","Title for setting up storewide commission","affiliate-for-woocommerce")),m("div",{class:"space-y-4"},m("div",{class:"flex flex-row mt-4 items-center space-x-4"},m("label",{for:"commission",class:"text-sm"},_x("Commission:","Label for commission","affiliate-for-woocommerce")),m("div",{class:"relative rounded-md shadow-sm"},m("input",{id:"commission",class:"block w-full pl-2 pr-36 form-input sm:text-sm sm:leading-5",type:"number",autocomplete:"off",placeholder:"20.00",oninput:function(e){var t,i;return a.updateProps("amount",(null===(t=parseFloat(null==e||null===(i=e.target)||void 0===i?void 0:i.value))||void 0===t?void 0:t.toFixed(2))||"0.00")}}),m("div",{class:"absolute inset-y-0 right-0 flex items-center"},m("select",{"aria-label":_x("Commission Type","Commission plan type","affiliate-for-woocommerce"),class:"h-full py-0 pl-2 pr-8 text-gray-500 bg-transparent border-transparent form-select sm:text-sm sm:leading-5 w-36",id:"commission_type",onchange:function(e){var t;return a.updateProps("type",(null==e||null===(t=e.target)||void 0===t?void 0:t.value)||"Percentage")}},m("option",{selected:"Percentage"===(null==o||null===(e=o.details)||void 0===e?void 0:e.commissions.type)?"selected":"",value:"Percentage"},_x("Percentage (%)","Commission plan type: percentage","affiliate-for-woocommerce")),m("option",{selected:"Flat"===(null==o||null===(t=o.details)||void 0===t?void 0:t.commissions.type)?"selected":"",value:"Flat"},i.a.getAFWParams("storeCurrencyCode")?sprintf(_x("Flat (%s)","Commission plan type: flat with store currency code","affiliate-for-woocommerce"),i.a.getAFWParams("storeCurrencyCode")):_x("Flat","Commission plan type: flat","affiliate-for-woocommerce")))))),m("p",{class:"text-sm"},_x("You can create an unlimited number of customized plans based on affiliates, products, and referral medium under Affiliate dashboard > Plans.","commission setup description","affiliate-for-woocommerce"))))))}}])&&d(t.prototype,a),r&&d(t,r),e}();function p(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"updateProps",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&a&&(null==o||null===(e=o.details)||void 0===e?void 0:e.emails)&&(o.details.emails[t]=a)}},{key:"getEmails",value:function(){return{afwc_affiliate_pending_request:{title:_x("Affiliate - Pending Request","Label for affiliate pending request email","affiliate-for-woocommerce"),description:_x("This email will be sent to an affiliate after the registration form is submitted, and their request to join your affiliate program is in 'Pending' status.","Label for affiliate pending request email","affiliate-for-woocommerce")},afwc_commission_paid:{title:_x("Affiliate - Commission Paid","Label for affiliate commission paid email","affiliate-for-woocommerce"),description:_x("This email will be sent to an affiliate when their commission/payout is processed from the affiliate dashboard.","Description for affiliate commission paid email","affiliate-for-woocommerce")},afwc_new_conversion:{title:_x("Affiliate - New Conversion Received","Label for affiliate new conversion received email","affiliate-for-woocommerce"),description:_x("This email will be sent to an affiliate when an order is placed using their referral link/coupon, i.e., on a new conversion.","Description for affiliate new conversion received email","affiliate-for-woocommerce")},afwc_new_registration:{title:_x("Affiliate Manager - New Registration Received","Label for affiliate manager new registration received email","affiliate-for-woocommerce"),description:_x("This email will be sent to an affiliate manager when a new affiliate registration request is received or when an affiliate joins automatically.","Description for affiliate manager new registration received email","affiliate-for-woocommerce")},afwc_welcome:{title:_x("Affiliate - Welcome Email","Label for affiliate welcome email","affiliate-for-woocommerce"),description:_x("This email will be sent to an affiliate after their request to join is approved or if they automatically become an affiliate.","Description for affiliate welcome email","affiliate-for-woocommerce")}}}},{key:"view",value:function(){var e,t=this,a=this.getEmails()||{};return m("div",{class:"w-full"},m("div",{class:"mb-6"},m("h2",{class:"text-2xl font-bold leading-snug text-gray-800 sm:text-3xl"},_x("Manage emails","Title for email manage step","affiliate-for-woocommerce")),m("p",null,_x("The plugin provides these and some more emails. You can enable/disable them as needed.","Description for email notifications","affiliate-for-woocommerce"))),m("ul",{class:"list-none space-y-6"},a&&(null===(e=Object.keys(a))||void 0===e?void 0:e.length)&&Object.keys(a).map((function(e){var i;return m("li",{key:e,class:"bg-gray-50 p-3 rounded shadow-sm space-y-3"},m("div",{class:"flex items-center space-x-2"},m("input",{id:e,type:"checkbox",checked:"no"!==(null==o||null===(i=o.details)||void 0===i?void 0:i.emails[e]),class:"w-5 h-5 mr-2 text-indigo-600 transition duration-150 ease-in-out form-checkbox",onchange:function(a){return t.updateProps(e,a.target.checked?"yes":"no")}}),m("label",{for:e,class:"text-gray-800 font-medium text-base"},a[e].title||"")),m("p",{class:"text-sm text-gray-500"},a[e].description||""))}))),m("p",{class:"text-sm p-3 mt-3"},_x("You can always customize the above emails under WooCommerce > Settings > Emails.","Description for email notifications","affiliate-for-woocommerce")))}}])&&p(t.prototype,a),i&&p(t,i),e}();function h(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,r;return t=e,(a=[{key:"view",value:function(){return m("div",{class:"w-full"},m("div",{class:"mb-6 space-y-4"},m("h2",{class:"text-2xl font-bold leading-snug text-gray-800 sm:text-3xl"},_x("You're all set up and good to go!","Title for Getting started step","affiliate-for-woocommerce")),m("p",{class:"text-base"},_x("Affiliate For WooCommerce is ready to run your affiliate program. You can always visit the plugin’s settings page to modify the settings.","Description for Getting started step","affiliate-for-woocommerce"))),m("div",{class:"w-full px-4 py-4 bg-gray-100 rounded-lg shadow-sm"},m("ul",{class:"list-disc list-inside"},m("li",null,m("a",{href:i.a.getAFWParams("settingsLink")||"",target:"_blank",class:"cursor-pointer text-base font-medium text-indigo-600 hover:underline"},_x("Visit the settings page","Visit dashboard label","affiliate-for-woocommerce"))),m("li",null,m("a",{href:afwcDashboardParams.afwDocLink,target:"_blank",class:"cursor-pointer text-base font-medium text-indigo-600 hover:underline"},_x("Explore the documentation","Explore documentation label","affiliate-for-woocommerce"))))))}}])&&h(t.prototype,a),r&&h(t,r),e}();function y(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,r;return t=e,(a=[{key:"view",value:function(){return m("div",{class:"p-6 border rounded-lg bg-white shadow mx-auto max-w-xl text-center"},m("h2",{class:"font-bold text-3xl mx-auto max-w-md mb-4 leading-10"},_x("Thank you for choosing us!","Welcome message on onboarding","affiliate-for-woocommerce")),m("p",{class:"mb-8 text-sm font-base"},_x("Let's kickstart your affiliate program! Click the button below, and we'll walk you through the initial setup. It only takes a couple of minutes. And don't worry, you can modify these settings any time.","text for onboarding welcome page","affiliate-for-woocommerce")),m("div",{class:"flex flex-col items-center"},m("button",{class:"mb-4 px-4 py-2 text-white text-sm bg-indigo-600 hover:bg-indigo-500 font-medium rounded-md transition duration-150 ease-in-out focus:outline-none",onclick:function(){return k.started=!0}},_x("Get started","Start button label","affiliate-for-woocommerce")),m("a",{class:"cursor-pointer text-indigo-600 hover:underline",href:i.a.getAFWParams("dashboardLink")||""},_x("Skip setup and go to Dashboard","Skip button label","affiliate-for-woocommerce"),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 inline-block ml-2"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"})))))}}])&&y(t.prototype,a),r&&y(t,r),e}();function w(e,t,a,i,r,n,o){try{var s=e[n](o),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function x(e){return function(){var t=this,a=arguments;return new Promise((function(i,r){var n=e.apply(t,a);function o(e){w(n,i,r,o,s,"next",e)}function s(e){w(n,i,r,o,s,"throw",e)}o(void 0)}))}}function _(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.started=!1,this.currentStep=1,this.steps=[{id:1,update:o.updateAffiliates,label:_x("Affiliate setup","Heading for affiliate setup step","affiliate-for-woocommerce")},{id:2,update:o.updateBasicSettings,label:_x("Basic settings","Heading for basic setting steps","affiliate-for-woocommerce")},{id:3,update:o.updateCommissions,label:_x("Commissions","Heading for commission setup step","affiliate-for-woocommerce")},{id:4,update:o.updateEmails,label:_x("Emails","Heading for email setup step","affiliate-for-woocommerce")},{id:5,update:o.finishSteps,label:_x("Getting started","Heading for getting started step","affiliate-for-woocommerce")}],this.finishStep=this.steps.length,this.hideFooter()}var t,a,n;return t=e,n=[{key:"started",get:function(){return e._started},set:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e._started=Boolean(t)}}],(a=[{key:"hideFooter",value:function(){var e=document.getElementById("wpfooter");e&&(e.style.visibility="hidden")}},{key:"headers",value:function(){var e=this;return m("ol",{class:"flex justify-center items-center w-full p-6 space-x-2 text-sm font-medium text-center text-gray-500 bg-white border mb-5 border-gray-200 rounded-lg shadow-sm sm:text-base dark:bg-gray-800 sm:p-4 sm:space-x-4"},this.steps&&this.steps.map((function(t){return m("li",{key:t.id,class:"flex items-center ".concat(e.currentStep===t.id?"text-indigo-600":"")},t.label,t.id!==e.steps.length&&m("svg",{class:"w-3 h-3 ml-2 sm:ml-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 12 10"},m("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m7 9 4-4-4-4M1 9l4-4-4-4"})))})))}},{key:"bodyContent",value:function(){switch(this.currentStep){case 1:return m(l,null);case 2:return m(u,null);case 3:return m(f,null);case 4:return m(g,null);case 5:return m(v,null)}}},{key:"body",value:function(){var e=this;return m("div",{class:"p-6 border rounded-lg bg-white shadow"},this.bodyContent(),m("div",{class:"flex justify-end mt-4"},this.finishStep>this.currentStep&&m("a",{class:"px-4 py-2 cursor-pointer text-indigo-600 hover:underline",onclick:function(){return e.currentStep++}},_x("Skip","Skip button label","affiliate-for-woocommerce")),m("button",{class:"px-4 py-2 mr-2 text-white bg-indigo-600 hover:bg-indigo-500 font-medium transition duration-150 ease-in-out border border-transparent rounded-md focus:outline-none",onclick:x(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(a=e.steps.find((function(t){return t.id===e.currentStep})))||void 0===a?void 0:a.update();case 2:e.finishStep!==e.currentStep&&e.currentStep++;case 3:case"end":return t.stop()}}),t)})))},this.finishStep===this.currentStep?_x("Finish and Go to Dashboard","Finish button label","affiliate-for-woocommerce"):_x("Save & Next","Save button label","affiliate-for-woocommerce"))))}},{key:"branding",value:function(){return m("div",{class:"flex justify-center items-center w-full p-6 space-x-2 "},m("div",{class:"py-2 px-4 rounded inline-flex items-center"},i.a.getAFWParams("assetsPath")?m("img",{src:i.a.getAFWParams("assetsPath")+"images/afwc-icon-160.png",alt:_x("Affiliate For WooCommerce logo","Plugin icon alt text in onboarding","affiliate-for-woocommerce"),class:"w-10 h-10 mr-4 rounded-md overflow-hidden shadow-md"}):"",m("h1",{class:"font-medium text-2xl"},_x("Affiliate For WooCommerce","Plugin name in onboarding","affiliate-for-woocommerce"))))}},{key:"view",value:function(){return m("div",{class:"afwc-onboarding flex flex-col items-center mt-2"},this.branding(),m("div",{class:"w-full max-w-3xl"},e.started?m("[",null," ",this.headers()," ",this.body()," "):m(b,null)),r.a.showLoader?m(r.a,{overlay:!0}):"")}},{key:"currentStep",get:function(){return parseInt(this._currentStep)},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._currentStep=parseInt(e)}}])&&_(t.prototype,a),n&&_(t,n),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return M}));var i=a(16),r=a(7),n=a(3),o=a(4),s=a(1);function l(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],i=!0,r=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){r=!0,n=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw n}}return a}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return d(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function f(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize(t)}var t,a,i;return t=e,(a=[{key:"oncreate",value:function(){this.intializeSelect2()}},{key:"onupdate",value:function(e){var t;this.index=null==e||null===(t=e.attrs)||void 0===t?void 0:t.index,this.intializeSelect2()}},{key:"getDetails",value:function(){return{type:this.type,operator:this.operator,value:this.value,key:this.key,meta:this.meta}}},{key:"refreshValues",value:function(){var e,t,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.value="",this.type=i,this.possibleOperators=(null===n.a||void 0===n.a||null===(e=n.a.allRules[this.type])||void 0===e?void 0:e.possibleOperators)||{},this.options=(null===n.a||void 0===n.a||null===(t=n.a.allRules[this.type])||void 0===t?void 0:t.options)||{},this.operator=(null==this||null===(a=this.possibleOperators[0])||void 0===a?void 0:a.op)||"",this.intializeSelect2(),jQuery("#"+this.key).val(this.value).trigger("change"),this.informParent()}},{key:"getInputPlaceholder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="";if(""===e)return t;var a=s.a.getAFWParams("plan_dashboard_data")||{},i=a.plan_rule_data;for(var r in i)for(var n in i[r]){var o;e===n&&i[r][n]&&(t=(null===(o=i[r][n])||void 0===o?void 0:o.placeholder)||"")}return t}},{key:"intializeSelect2",value:function(){var e,t=this,a=this.type||"",i=this.options&&Object.keys(this.options).length>0,r=jQuery("#"+this.key),n=(null===(e=this.possibleOperators[0])||void 0===e?void 0:e.type)||"";r.parent().find(".select2").remove();var o=r.parent().find(".afwc-rule-value-select option");if(o&&o.length)for(var u=new Set,d=0;d<o.length;d++){var f=o[d];u.has(f.value)?f.remove():u.add(f.value)}if(n&&"single"!==n){"multi"!==n&&r.removeAttr("multiple");var p,g={placeholder:this.getInputPlaceholder(a)||_x("Search for a value","placeholder","affiliate-for-woocommerce"),dropdownParent:jQuery("#afwc-commission-details"),escapeMarkup:function(e){return e}};i?(r.html(""),Object.entries(this.options).map((function(e){var a=c(e,2),i=a[0],n=a[1];r.append(new Option(n,i,!0,t.value.includes(i)))})),(null==this||null===(p=this.value)||void 0===p?void 0:p.length)||(this.value="select"===n?Object.keys(this.options)[0]:"")):(g.ajax={url:ajaxurl,dataType:"json",delay:1e3,data:function(e){return{term:e.term||"",type:a||"",action:"afwc_json_search_rule_values",security:s.a.getAFWParams("security.commissions.searchPlan")||""}},processResults:function(e){var t=[];return e&&jQuery.each(e,(function(e,a){t.push({id:e,text:a})})),{results:t}},cache:!0},g.minimumInputLength="affiliate_tag"===a?1:3),r.select2(g),r.off("change").on("change",(function(e){t.value="multi"===n?l(new Set(r.val())):r.val(),t.meta.ruleTitles={},r.select2("data").map((function(e){var a=e.id,i=e.text;a&&(t.meta.ruleTitles[a]=i)})),t.informParent(),m.redraw()}))}}},{key:"renderFieldSelect",value:function(e){var t=this,a=(s.a.getAFWParams("plan_dashboard_data")||{}).plan_rule_data,i=this.type||"";return m("select",{class:"afwc-rule-select h-10 py-1 pl-3 pr-8 text-sm font-medium leading-5 capitalize text-gray-700 bg-transparent form-select",onchange:function(e){t.refreshValues(e.target.value)}},Object.keys(a).map((function(e){return m("optgroup",{label:a[e]._meta&&a[e]._meta.title||e},Object.keys(a[e]).map((function(t){return"_meta"!==t?m("option",{value:t,selected:i===t?"selected":""},a[e][t].title||t):""})))})))}},{key:"renderOperatorSelect",value:function(e){var t=this,a=this.operator||"";return m("select",{class:"h-10 py-1 pl-3 w-24 min-w-24 pr-8 text-sm leading-5 text-gray-500 bg-transparent form-select",onchange:function(e){t.listenOpChange(e)}},this.possibleOperators.map((function(e){return m("option",{value:e.op,selected:a===e.op?"selected":""},e.label)})))}},{key:"listenOpChange",value:function(e){var t=this;this.operator=e.target.value;var a=this.possibleOperators.filter((function(e){return t.operator==e.op}));this._operator=a.length>0?a[0]:{},this.informParent()}},{key:"informParent",value:function(){this.callbackToParent(this.getDetails(),"update",this.index)}},{key:"deleteRule",value:function(){this.callbackToParent(null,"delete",this.index)}},{key:"renderValues",value:function(){var e,t,a,i=this,r=void 0!==this.meta.ruleTitles&&(this.meta.ruleTitles.length>0||Object.keys(this.meta.ruleTitles).length>0)?this.meta.ruleTitles:this.type in n.a.idNameMaps&&n.a.idNameMaps[this.type]||{};switch((null===(e=this.possibleOperators[0])||void 0===e?void 0:e.type)||"single"){case"multi":return m("select",{id:this.key,class:"afwc-rule-value-select max-w-full py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent form-select w-full block","data-action":"afwc_json_search_rule_values",multiple:"multiple"},parseInt(null==this||null===(t=this.value)||void 0===t?void 0:t.length)>0?this.value.map((function(e){return r[e]?m("option",{value:e,selected:"selected"},r[e]):""})):"");case"select":return m("select",{id:this.key,class:"h-10 afwc-rule-value-select max-w-full py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent form-select w-full block"},parseInt(null==this||null===(a=this.value)||void 0===a?void 0:a.length)>0?m("option",{value:this.value,selected:"selected"},r[this.value]):"");default:return m("input",{class:"h-10 w-full max-w-full py-1 text-sm leading-5 text-gray-700 form-input",value:this.value,placeholder:this.getInputPlaceholder(this.type)||"",oninput:function(e){i.value=e.target.value,i.informParent()}})}}},{key:"addConditionRow",value:function(e){var t=this;return m("div",{class:"flex items-center gap-2 w-full"},this.renderFieldSelect(e),this.renderOperatorSelect(e),m("div",{class:"flex-1 relative"},this.renderValues(e)),m("div",{class:"flex-shrink-0"},m("button",{type:"button",onclick:function(){return t.deleteRule()},class:(this.isOnlyOne?"invisible":"")+" flex items-center justify-center p-1 text-xs leading-5 text-gray-300 transition duration-150 ease-in-out border border-transparent rounded-md hover:text-red-600 hover:border-red-600 focus:outline-none focus:shadow-outline-red focus:border-red-600"},m("svg",{fill:"none",stroke:"currentColor",class:"w-5 h-5"},m("svg",{id:"icon-remove-condition","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},m("path",{d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))))))}},{key:"initialize",value:function(e){var t,a=this;this.ruleRow=e.attrs.ruleRow,this.type=e.attrs.ruleRow.type,this.index=e.attrs.index,this.key=e.attrs.key,this.operator=e.attrs.ruleRow.operator,this.value=e.attrs.ruleRow.value||[],this.callbackToParent=e.attrs.callbackToParent,this.possibleOperators=(null===n.a||void 0===n.a||null===(t=n.a.allRules[this.type])||void 0===t?void 0:t.possibleOperators)||[],this.options=n.a.allRules[this.type].options||{},this.isOnlyOne=e.attrs.isOnlyOne;var i=this.possibleOperators.length>0?this.possibleOperators.filter((function(e){return a.operator==e.op})):[];this._operator=i.length>0?i[0]:{},this.select_id=Math.random().toString(36).substring(7),this.meta=e.attrs.ruleRow.meta||{ruleTitles:{}}}},{key:"view",value:function(e){return this.initialize(e),this.isOnlyOne=e.attrs.isOnlyOne,m("[",null,this.addConditionRow(this.ruleRow))}}])&&f(t.prototype,a),i&&f(t,i),e}();function g(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var h=function(){function e(t){var a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callbackToParent=t.attrs.callbackToParent,this.index=t.attrs.index,this.rules=this.filterRules((null==t||null===(a=t.attrs)||void 0===a||null===(i=a.ruleGroup)||void 0===i?void 0:i.rules)||[]),this.key=t.attrs.key,this.rules=this.rules.map((function(e){return e.key=Math.random().toString(36).slice(7),e})),this.ruleGroupCondition=t.attrs.ruleGroup.condition}var t,a,i;return t=e,(a=[{key:"updateData",value:function(e,t,a){"update"==t?this.rules[a]=e:"delete"==t&&this.rules.splice(a,1),this.informParent()}},{key:"onupdate",value:function(e){this.index=e.attrs.index}},{key:"addNewRule",value:function(){var e=JSON.parse(JSON.stringify(n.a.ruleRow));e.key=Math.random().toString(36).slice(7),this.rules.push(e),this.informParent()}},{key:"getDetails",value:function(){return{condition:this.ruleGroupCondition,rules:this.rules,key:this.key}}},{key:"informParent",value:function(){this.callbackToParent(this.getDetails(),"update",this.index)}},{key:"addNewRuleGroup",value:function(){this.callbackToParent(null,"add",null)}},{key:"deleteRuleGroup",value:function(){this.callbackToParent(null,"delete",this.index)}},{key:"filterRules",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e||!(null==e?void 0:e.length))return[];var t=this.getActiveRules();return t&&(null==t?void 0:t.length)?e.filter((function(e){return t.includes(e.type)})):e}},{key:"getActiveRules",value:function(){var e=(s.a.getAFWParams("plan_dashboard_data")||{}).plan_rule_data,t=[];if(e)for(var a in e)for(var i in e[a])t.push(i);return t}},{key:"view",value:function(e){var t=this;return m("div",{class:"px-4 pt-3 pb-2 mb-6 space-y-3 bg-gray-100 border-gray-200 rounded-md"},m("div",{class:"flex items-center gap-2 text-xs text-gray-400"}," ",m("span",null,__('This group is a "pass" when',"affiliate-for-woocommerce")),m("div",{class:"flex items-center"},m("select",{"aria-label":"match-type",class:"h-10 py-0.5 pl-3 pr-8 font-medium text-gray-700 bg-transparent form-select text-xs",onchange:function(e){t.ruleGroupCondition=e.target.value,t.informParent()}},m("option",{value:"AND",selected:"AND"===this.ruleGroupCondition?"selected":""},__("all","affiliate-for-woocommerce")),m("option",{value:"OR",selected:"OR"===this.ruleGroupCondition?"selected":""},__("at least one","affiliate-for-woocommerce"))))," ",m("span",null," ",__("of the following rules are true.","affiliate-for-woocommerce")," ")," "),this.rules.map((function(e,a){return m(p,{key:e.key,isOnlyOne:1===t.rules.length,index:a,callbackToParent:t.updateData.bind(t),ruleRow:e})})),m("div",{class:"flex items-center gap-6 pt-1"},m("button",{type:"button",class:"flex items-center gap-1 justify-center px-1 py-0.5 text-xs leading-5 text-gray-400 transition duration-150 ease-in-out border border-transparent rounded-md hover:text-green-600 hover:border-green-600 focus:outline-none focus:shadow-outline-green focus:border-green-600",onclick:function(){t.addNewRule()}},m("svg",{fill:"none",stroke:"currentColor",class:"w-5 h-5"},m("svg",{id:"icon-add-condition","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},m("path",{d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})))," ",__("Add a rule","affiliate-for-woocommerce")," ")," ",m("span",{class:"flex-1"}),m("button",{type:"button",class:"flex items-center gap-1 justify-center px-1 py-0.5 text-xs leading-5 text-gray-400 transition duration-150 ease-in-out border border-transparent rounded-md hover:text-indigo-600 hover:border-indigo-600 focus:outline-none focus:shadow-outline-indigo focus:border-indigo-600",onclick:function(){t.addNewRuleGroup()}},m("svg",{fill:"none",stroke:"currentColor",class:"w-5 h-5"},m("svg",{id:"icon-add-group","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})))," ",__("Add another group","affiliate-for-woocommerce")," "),e.attrs.isOnlyOne?"":m("button",{type:"button",class:"flex items-center gap-1 justify-center px-1 py-0.5 text-xs leading-5 text-gray-400 transition duration-150 ease-in-out border border-transparent rounded-md hover:text-red-600 hover:border-red-600 focus:outline-none focus:shadow-outline-red focus:border-red-600",onclick:function(){t.deleteRuleGroup()}},m("svg",{fill:"none",stroke:"currentColor",class:"w-5 h-5"},m("svg",{id:"icon-remove-group","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"}))),__("Remove this group","affiliate-for-woocommerce"))))}}])&&g(t.prototype,a),i&&g(t,i),e}();function v(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"renderDistribution",value:function(){for(var e=[],t=0;t<=parseInt(n.a.details.no_of_tiers||0)-2;t++)e.push(n.a.details.distribution[t]||"");n.a.details.distribution=e;var a=1,i="Flat"===n.a.details.type?s.a.getAFWParams("storeCurrencyCode"):"%",r=n.a.details.no_of_tiers-2;return m("[",null,m("div",{class:"odd-tier my-2 inline-block w-1/2"},m("label",{class:"align-baseline font-medium"},_x("Tier 1","Label for Tier 1 distribution","affiliate-for-woocommerce"),":"),m("input",{class:"ml-3 my-2 mr-1 w-1/2 text-base font-small leading-4 text-gray-700 form-input cursor-not-allowed",type:"number",name:"commission_tier",value:n.a.details.amount,readonly:!0,style:"background-color: #f0f0f1;"}),m("span",{class:"text-gray-400"},i)),Object.keys(n.a.details.distribution).map((function(e,t){return m("div",{class:(t%2==0?"even-tier":"odd-tier")+" my-2 inline-block w-1/2"},m("label",{class:"align-baseline font-medium"},sprintf(_x("Tier %d","Label for parent distribution","affiliate-for-woocommerce"),++a),":"),m("input",{oninput:function(e){n.a.details.distribution[t]=e.target.value||""},class:(0==t%2&&r===t&&8===t?"ml-1":"ml-3")+" my-2 mr-1 w-1/2 text-base font-small leading-4 text-gray-700 form-input",type:"number",name:"commission_tier",value:n.a.details.distribution[t]}),m("span",{class:"text-gray-400"},i))})),m("div",{class:"my-3 text-gray-700"},_x("Total commissions: ","Title for total commission across tiers","affiliate-for-woocommerce"),m("span",{class:"font-medium"},this.distributionSum()," ",i)))}},{key:"distributionSum",value:function(){for(var e=n.a.details.amount?parseFloat(n.a.details.amount):0,t=0,a=Object.values(n.a.details.distribution);t<a.length;t++){var i=a[t];e+=isNaN(parseFloat(i))?0:parseFloat(i)}return s.a.formatNumber(e||0)}},{key:"view",value:function(){var e=this;return m("div",{class:"mt-3"},m("div",{class:"text-gray-700"},m("label",{class:"font-medium my-3 py-2"},_x("Multi-level commission? How many tiers?","Label for setting number of tier for multi-tier commission","affiliate-for-woocommerce")),m("input",{class:"w-2/5 text-gray-700 form-input my-2 sm:text-sm sm:leading-5",type:"number",min:"1",max:"10",oninput:function(t){n.a.details.no_of_tiers=t.target.value||"",e.renderDistribution()},id:"no_of_tiers",value:n.a.details.no_of_tiers||""})),parseInt(n.a.details.no_of_tiers||0)>1?m("[",null,m("div",{class:"my-3 text-gray-700"},_x("Tier-wise commission distribution","Title for multi-tier commission and distribution","affiliate-for-woocommerce")),this.renderDistribution()):" ")}}])&&v(t.prototype,a),i&&v(t,i),e}();function b(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.planCondition=n.a.details.rules.condition?n.a.details.rules.condition:"AND",this.ruleGroups=n.a.details.rules.rules?n.a.details.rules.rules:[n.a.ruleGroup],this.id=n.a.details.id,this.name=n.a.details.name,this.type=n.a.details.type||"Percentage",this.amount=n.a.details.amount,this.status=n.a.details.status||"Active",this.apply_to=n.a.details.apply_to||"all",this.action_for_remaining=n.a.details.action_for_remaining||"continue",this.ruleGroups=this.ruleGroups.map((function(e){return e.key=Math.random().toString(36).slice(7),e})),this.getStatuses=s.a.getCommissionPlansStatus}var t,a,i;return t=e,(a=[{key:"addNewRuleGroup",value:function(){var e=JSON.parse(JSON.stringify(n.a.ruleGroup));e.key=Math.random().toString(36).slice(7),this.ruleGroups.push(e)}},{key:"updateData",value:function(e,t,a){"update"==t?this.ruleGroups[a]=e:"add"==t?this.addNewRuleGroup():"delete"==t&&this.ruleGroups.splice(a,1)}},{key:"checkEmptyRule",value:function(){return this.ruleGroups.filter((function(e){return e.rules.filter((function(e){return void 0===e.value||0===e.value.length})).length>0})).length>0}},{key:"amountErrorMessageContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case"empty":return null===t?_x("Empty commission amount is not allowed","error message when no commission amount is set in the commission plan","affiliate-for-woocommerce"):sprintf(_x("The commission amount cannot be empty for Tier %d","error message when the commission amount is empty for any tier in the commission plan","affiliate-for-woocommerce"),t+2);case"negative":return null===t?_x("Negative commission amount is not allowed","error message when negative commission amount is set in the commission plan","affiliate-for-woocommerce"):sprintf(_x("The commission amount cannot be negative for Tier %d","error message when the commission amount is negative for any tier in the commission plan","affiliate-for-woocommerce"),t+2);case"percentage":return null===t?_x("The commission percentage cannot be greater than 100","error message when the commission percentage is greater than 100 in the commission plan","affiliate-for-woocommerce"):sprintf(_x("The commission percentage cannot be greater than 100 for Tier %d","error message when the commission percentage is greater than 100 for any tier in the commission plan","affiliate-for-woocommerce"),t+2);default:return""}}},{key:"validateCommissionAmount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return isNaN(parseFloat(e))?this.amountErrorMessageContainer("empty",a):-1===Math.sign(e)?this.amountErrorMessageContainer("negative",a):"Percentage"===t&&parseFloat(e)>100?this.amountErrorMessageContainer("percentage",a):null}},{key:"validateCommission",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0===e.name||void 0===e.amount||void 0===e.type||void 0===e.distribution)return o.a.show({status:"error",message:_x("Something went wrong. The commission data was not found correctly.","error message when commission data missing details","affiliate-for-woocommerce")}),!1;if(!e.name)return o.a.show({status:"error",message:_x("Please add a commission title","error message when commission title is empty in the commission plan","affiliate-for-woocommerce")}),!1;if(this.checkEmptyRule()&&parseInt(this.id)!==parseInt(s.a.getAFWParams("default_plan_id")||0))return o.a.show({status:"error",message:_x("Empty rule values are not allowed","error message when there are no rules in the commission plan","affiliate-for-woocommerce")}),!1;var t=this.validateCommissionAmount(e.amount,e.type,null);if(t)return o.a.show({status:"error",message:t}),!1;if(Array.isArray(e.distribution)&&e.distribution.length>0)for(var a=0;a<e.distribution.length;a++){var i=this.validateCommissionAmount(e.distribution[a],e.type,a);if(i)return o.a.show({status:"error",message:i}),!1}return!0}},{key:"updateCommission",value:function(){var e=this.getDetails();this.validateCommission(e)&&(e.rules.rules=e.rules.rules.map((function(e){return e.rules=e.rules.map((function(e){return delete e.key,e})),delete e.key,e})),n.a.details=e,n.a.saveCommission())}},{key:"getDetails",value:function(){var e={};return e.rules={condition:this.planCondition,rules:this.ruleGroups},e.name=n.a.details.name,e.amount=n.a.details.amount,e.type=n.a.details.type,e.status=n.a.details.status,e.apply_to=n.a.details.apply_to,e.action_for_remaining=n.a.details.action_for_remaining,e.no_of_tiers=n.a.details.no_of_tiers,e.distribution=n.a.details.distribution,e.id=n.a.details.id,e}},{key:"view",value:function(e){var t=this;return m("aside",{id:"afwc-commission-details",style:"z-index: 100099;",class:"fixed inset-x-0 bottom-0 lg:inset-0 lg:flex lg:items-center lg:justify-end"},m("div",{class:"fixed inset-0 transition-opacity"},m("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})),m("section",{class:"w-full h-full max-w-7xl max-h-full mt-12 overflow-scroll transition-all transform bg-gray-50 lg:ml-1/6 lg:mt-0"},m("div",{class:"sticky top-0 z-10 w-full bg-gray-100"},m("nav",{class:"px-4 py-2 xl:px-4 lg:py-2"},m("div",{class:"flex items-center justify-between"},m("div",{class:"flex items-center flex-1 gap-2"},m("label",{for:"name",class:"text-base font-medium text-gray-700"},n.a.details.id>0&&m("span",{class:"text-indigo-700"},"#",n.a.details.id," "),m("span",null,_x("Name","Commission plan name/title","affiliate-for-woocommerce"))),m("input",{id:"name",class:"flex-1 h-10 text-xl leading-7 text-gray-700 form-input",placeholder:_x("Enter a name for this commission plan","Commission plan name/title placeholder","affiliate-for-woocommerce"),value:n.a.details.name||"",oninput:function(e){n.a.details.name=e.target.value}})),m("div",{class:"flex items-center mt-2 text-right lg:mt-0"},m("div",{class:"flex items-center gap-4 ml-4 lg:ml-2"},this.getStatuses()?m("[",null,m("label",{for:"commission-status",class:"hidden sr-only"},_x("Status","Commission status label","affiliate-for-woocommerce")),m("select",{id:"commission-status",disabled:parseInt(n.a.details.id)===parseInt(s.a.getAFWParams("default_plan_id")||0)?"disabled":"",class:"h-10 form-select pl-3 pr-10 py-2 text-base leading-6 border-gray-100 focus:outline-none focus:shadow-outline-blue focus:border-blue-100 sm:text-sm sm:leading-5 text-gray-500","aria-label":_x("Commission status","Commission status dropdown","affiliate-for-woocommerce"),onchange:function(e){n.a.details.status=e.target.value}},Object.keys(this.getStatuses()).map((function(e){return m("option",{value:e,selected:n.a.details.status==e?"selected":""},t.getStatuses(e)||"")})))):"",m("span",{class:"rounded-md"},m("button",{onclick:function(){return t.updateCommission()},type:"button",class:"inline-flex justify-center px-5 py-2 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-500 focus:outline-none focus:shadow-outline-indigo"},_x("Save","Button label to save commission plan","affiliate-for-woocommerce"))),parseInt(n.a.details.id)===parseInt(s.a.getAFWParams("default_plan_id")||0)?"":m("button",{onclick:function(){confirm(_x("Are you sure you want to permanently delete this plan?","confirmation alert for deleting a commission plan","affiliate-for-woocommerce"))&&n.a.deleteCommission()},type:"button",class:"p-1 transition duration-150 ease-in-out border-transparent rounded-full focus:outline-none focus:bg-gray-100 hover:text-red-600 text-red-800"},m("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",class:"w-5 h-5"},m("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}))),m("button",{onclick:function(){n.a.currentCommissionID=0},class:"p-1 text-gray-400 transition duration-150 ease-in-out border-transparent rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 focus:bg-gray-100"},m("svg",{class:"w-6 h-6",stroke:"currentColor","stroke-width":"2",fill:"none",viewBox:"0 0 24 24"},m("path",{d:"M6 18L18 6M6 6l12 12"})))))))),m("div",{class:"grid grid-cols-12 gap-8 p-8 text-gray-600"},m("div",{class:"col-span-4 text-sm leading-5"},m("div",{class:"pb-1 mb-3 border-b-2 border-gray-300 text-base font-medium text-gray-700"},_x("Commission","Title for commission amount and type","affiliate-for-woocommerce")),m("div",{class:"relative rounded-md shadow-sm mb-3"},m("input",{id:"commission",class:"block w-full pl-2 pr-36 form-input sm:text-sm sm:leading-5",type:"number",autocomplete:"off",placeholder:"20.00",value:n.a.details.amount,oninput:function(e){n.a.details.amount=e.target.value}}),m("div",{class:"absolute inset-y-0 right-0 flex items-center"},m("select",{"aria-label":_x("Commission Type","Commission plan type","affiliate-for-woocommerce"),class:"h-full py-0 pl-2 pr-8 text-gray-500 bg-transparent border-transparent form-select sm:text-sm sm:leading-5 w-36",id:"commission_type",onchange:function(e){n.a.details.type=e.target.value}},m("option",{value:"Percentage",selected:"Percentage"==n.a.details.type?"selected":""},_x("Percentage (%)","Commission plan type: percentage","affiliate-for-woocommerce")),m("option",{value:"Flat",selected:"Flat"==n.a.details.type?"selected":""},s.a.getAFWParams("storeCurrencyCode")?sprintf(_x("Flat (%s)","Commission plan type: flat with store currency code","affiliate-for-woocommerce"),s.a.getAFWParams("storeCurrencyCode")):_x("Flat","Commission plan type: flat","affiliate-for-woocommerce"))))),s.a.getAFWParams("isMultiTierEnabled")?m(y,null):""),m("div",{class:"col-span-8 text-sm leading-5 text-gray-500"},parseInt(n.a.details.id)!==parseInt(s.a.getAFWParams("default_plan_id")||0)?m("[",null,m("div",{class:"pb-1 mb-3 border-b-2 border-gray-300 text-base font-medium text-gray-700"},_x("Rules","Title for commission rules","affiliate-for-woocommerce")),m("div",{class:"px-4 py-3 mb-6 space-y-3 rounded-md"},m("div",{class:"flex items-baseline gap-2 mb-3 -mt-1"},m("div",{class:"mb-3"},_x("When","Title for main rule condition","affiliate-for-woocommerce")),m("div",{class:"inline-flex items-center gap-2 text-sm text-gray-500"},m("div",{class:"flex items-center"},m("select",{"aria-label":"match-type",class:"h-10 py-1 pl-3 pr-8 font-medium text-gray-700 bg-transparent form-select sm:text-sm sm:leading-5",onchange:function(e){t.planCondition=e.target.value}},m("option",{value:"AND",selected:"AND"==this.planCondition?"selected":""},__("all","affiliate-for-woocommerce")),m("option",{value:"OR",selected:"OR"==this.planCondition?"selected":""},__("at least one","affiliate-for-woocommerce"))))," ",m("span",null,_x("rule groups pass","Message for main rule condition","affiliate-for-woocommerce")))),this.ruleGroups.map((function(e,a){return m(h,{key:e.key,index:a,isOnlyOne:1===t.ruleGroups.length,callbackToParent:t.updateData.bind(t),ruleGroup:e})})))):"",parseInt(n.a.details.id)!==parseInt(s.a.getAFWParams("default_plan_id")||0)?m("[",null,m("div",{class:"pb-1 mb-3 border-b-2 border-gray-300 text-base font-medium text-gray-700"},_x("Actions","Title for commission actions","affiliate-for-woocommerce")),m("div",{class:"mb-6"},m("div",{class:"px-4 py-3 space-y-3"},m("div",{class:"px-4 py-3 bg-gray-100 border-gray-200 rounded-md"},m("div",{class:"mb-2 font-medium text-gray-700"},_x("Apply to","Title for commission action - apply to","affiliate-for-woocommerce")),m("div",{class:"space-y-3 text-gray-500"},Object.keys(afwcDashboardParams.plan_dashboard_data.apply_to).map((function(e,t){return m("div",{class:"flex items-center"},m("label",null,m("input",{type:"radio",class:"mr-2 text-indigo-600 transition duration-150 ease-in-out form-radio",name:"apply_to",value:e,onchange:function(e){n.a.details.apply_to=e.target.value},checked:n.a.details.apply_to===e?"checked":""}),afwcDashboardParams.plan_dashboard_data.apply_to[e]))}))))),m("div",{class:"px-4 py-3 mb-6 space-y-3"},m("div",{class:"px-4 py-3 bg-gray-100 border-gray-200 rounded-md"},m("div",{class:"mb-2 font-medium text-gray-700"},_x("And then, for remaining products in the order...","Title for commission action on the remaining products","affiliate-for-woocommerce")),m("div",{class:"space-y-3 text-gray-500"},Object.keys(afwcDashboardParams.plan_dashboard_data.action_for_remaining).map((function(e,t){return m("div",{class:"flex items-center"},m("label",null,m("input",{type:"radio",class:"mr-2 text-indigo-600 transition duration-150 ease-in-out form-radio",name:"action_for_remaining",value:e,onchange:function(e){n.a.details.action_for_remaining=e.target.value},checked:n.a.details.action_for_remaining===e?"checked":""}),afwcDashboardParams.plan_dashboard_data.action_for_remaining[e]))}))))))):""))))}}])&&b(t.prototype,a),i&&b(t,i),e}(),x=a(10);function _(e,t,a,i,r,n,o){try{var s=e[n](o),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function k(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var P=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:t.attrs.id||0},this.currentDraggingItem=null,this.currentOrderString=null,this.showSaveBtn=null,this.defaultPlanId=parseInt(s.a.getAFWParams("default_plan_id")||0)}var t,a,i,l,c;return t=e,(a=[{key:"refreshModel",value:function(e){this.params.id=e,this.model=new n.a}},{key:"dragStart",value:function(e,t){parseInt(t.id)!==this.defaultPlanId?(this.currentDraggingItem=t,this.currentOrderString||(this.currentOrderString=JSON.stringify(r.a.data.planOrder)),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",null)):e.preventDefault()}},{key:"drop",value:function(e,t){e.preventDefault();var a=parseInt(t.id);if(a!==parseInt(this.currentDraggingItem.id)){var i=r.a.data.planOrder.indexOf(parseInt(this.currentDraggingItem.id)),n=r.a.data.planOrder.indexOf(a);r.a.data.planOrder.splice(n,0,r.a.data.planOrder.splice(i,1)[0]),r.a.reOrder(),this.currentOrderString!=JSON.stringify(r.a.data.planOrder)?this.showSaveBtn=!0:this.showSaveBtn=!1}}},{key:"dragOver",value:function(e){e.preventDefault()}},{key:"savePlanOrder",value:(l=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.a.data.planOrder&&0!==r.a.data.planOrder.length){e.next=2;break}return e.abrupt("return");case 2:return r.a.data.planOrder=r.a.data.planOrder.filter((function(e){return Object.values(r.a.data.commissions).some((function(t){return parseInt(t.id)===parseInt(e)}))})),e.next=5,r.a.savePlanOrder();case 5:this.showSaveBtn=!1,o.a.show({status:"success",message:_x("Plan order saved successfully","success message after saving commission plan order","affiliate-for-woocommerce")}),this.currentOrderString=JSON.stringify(r.a.data.planOrder);case 8:case"end":return e.stop()}}),e,this)})),c=function(){var e=this,t=arguments;return new Promise((function(a,i){var r=l.apply(e,t);function n(e){_(r,a,i,n,o,"next",e)}function o(e){_(r,a,i,n,o,"throw",e)}n(void 0)}))},function(){return c.apply(this,arguments)})},{key:"view",value:function(){var e=this;return m("section",null,m("h3",{class:"text-lg font-bold text-gray-600 sm:text-3xl leading-8"},_x("Commission Plans","Commission plans screen headline","affiliate-for-woocommerce")),m("div",{class:"text-right px-2"},m("a",{class:(this.showSaveBtn?"":"invisible")+" text-sm font-medium leading-6 text-indigo-600 hover:text-indigo-800",href:"#",onclick:function(t){t.preventDefault(),e.savePlanOrder()}},_x("Save Order","Label to save commission plan order once sorted","affiliate-for-woocommerce"))),m("ul",{class:"text-gray-600 py-2 max-h-screen overflow-auto"},r.a.data.commissions.map((function(t){return m("li",{"data-id":t.id,class:"my-6 overflow-hidden text-xs text-gray-400 transition duration-150 ease-in-out bg-white rounded-lg shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50",onclick:function(){n.a.currentCommissionID=t.id,e.refreshModel(n.a.currentCommissionID)},draggable:parseInt(t.id)!==e.defaultPlanId,ondragstart:function(a){e.dragStart(a,t)},ondrop:function(a){return e.drop(a,t)},ondragover:function(t){e.dragOver(t)}},m("a",{class:"block py-3 cursor-pointer hover:bg-white focus:outline-none focus:bg-white transition duration-150 ease-in-out"+(n.a.currentCommissionID==t.id?" bg-white outline-none":"")},m("div",{class:"flex pl-4 py-2"},m("div",{class:"mx-2 mt-1 w-4 h-4"},parseInt(t.id)!==e.defaultPlanId&&m("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},m("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"}))),m("div",{class:("Draft"===t.status?"text-gray-400":"text-gray-700")+" sm:truncate flex-1"},m("div",{class:"w-full"},m("span",{class:"text-lg leading-6"},t.name||"")),m("div",{class:"flex items-center w-full mt-1 space-x-4"},m("div",{class:"whitespace-no-wrap"},m("span",{class:"mr-2 text-gray-400"},"#",t.id||0),m("span",{class:"Draft"===t.status?"text-gray-400":"text-green-400"},s.a.getCampaignStatus(t.status)||""," ")))),m("div",{class:"mx-2 self-center"},m("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},m("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"}))))))}))),0!==n.a.currentCommissionID?m(w,{id:n.a.currentCommissionID}):"",o.a.flags.showNotification?m(x.a,null):null)}}])&&k(t.prototype,a),i&&k(t,i),e}();function S(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.a.currentCommissionID=0;var O=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"view",value:function(e){return m("main",{class:"max-w-7xl mx-auto my-4 py-2 px-8 grid gap-8 grid-cols-3"},m("section",{class:"col-span-2 overflow-y-auto"},m(P,null)),m("section",{class:"col-span-1 space-y-6 text-gray-500 pt-20 pr-8"},m("p",null,__("While calculating affiliate commission, plans are validated one after the other, starting from the top. Drag and Drop to reorder and prioritize plans. Click on Save Order to save.","affiliate-for-woocommerce")),m("p",null,_x("Note: The storewide default commission plan is not sortable. It will be validated at the end - after all the other plans.","not about storewide default commission plan","affiliate-for-woocommerce")),m("p",null,_x("View the steps to","text to view documentation link","affiliate-for-woocommerce"),m("a",{class:"cursor-pointer px-1 text-sm font-medium leading-6 text-indigo-600 hover:text-indigo-800",target:"_blank",href:afwcDashboardParams.afwDocLink+"how-to-create-affiliate-commission-plans/"},_x("create commission plans","documentation link to commissions plan feature","affiliate-for-woocommerce")),_x("and","and text","affiliate-for-woocommerce"),m("a",{class:"cursor-pointer px-1 text-sm font-medium leading-6 text-indigo-600 hover:text-indigo-800",target:"_blank",href:afwcDashboardParams.afwDocLink+"how-to-set-up-a-multilevel-referral-multi-tier-affiliate-program/"},_x("setup a multi-level/multi-tier affiliate program","documentation link to multi-tier affiliate program","affiliate-for-woocommerce"))),s.a.getAFWParams("subscriptionDescForPlan")?m("[",null,m("hr",null),m("p",null,s.a.getAFWParams("subscriptionDescForPlan"))):""))}}])&&S(t.prototype,a),i&&S(t,i),e}(),A=a(5),D=a(19);function C(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function j(e,t,a){return t&&C(e.prototype,t),a&&C(e,a),e}var M=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize(t.attrs)}return j(e,[{key:"initialize",value:function(e){this.urlParams=Object.keys(e).length?e:{start_date:new Date((new Date).setDate((new Date).getDate()-30)).toISOString().slice(0,10),end_date:(new Date).toISOString().slice(0,10)},this.model=new r.a(this.urlParams)}}]),j(e,[{key:"onupdate",value:function(e){this.urlParams!=e.attrs&&Object.keys(e.attrs).length&&this.initialize(e.attrs)}},{key:"view",value:function(){return m("div",null,m(i.a,{startDate:this.urlParams.start_date,endDate:this.urlParams.end_date}),r.a.data.commissions.length>0?m("[",null,m(D.a,{type:"setting_deprecated"}),m(O,null)):A.a.showLoader?"":m("header",{class:"bg-white shadow"},m("div",{class:"max-w-7xl mx-auto py-40 sm:px-3 xl:px-8 text-center text-gray-500"},m("p",{class:"text-xl font-medium leading-8"},__("No commission plans yet.","affiliate-for-woocommerce")),m("div",{class:"text-lg mx-auto leading-8 max-w-md mt-6 space-y-4"},m("p",null,__('Go ahead, click that "Add a Plan" button in the top bar to create your first commission.',"affiliate-for-woocommerce")))),-1===n.a.currentCommissionID?m(w,{id:n.a.currentCommissionID}):""),o.a.flags.showNotification?m(x.a,null):null)}}]),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return C}));var i=a(16),r=a(4),n=a(10),o=a(1);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e),this.params=t||{}}var t,a,i;return t=e,(a=[{key:"fetch",value:function(){var e,t,a=(null===(e=this.params)||void 0===e?void 0:e.currentPage)&&1<(parseInt(null===(t=this.params)||void 0===t?void 0:t.currentPage)||0);a||v.triggerLoader("details",!0),o.a.requestHandler({requestData:{dashboard:"afwc_pending_payout_controller",cmd:"pending_payouts_details",security:o.a.getAFWParams("security.pendingPayouts.fetchData")||"",page:this.params.currentPage||1},callback:function(e){var t,i=e.ACK,r=e.data;"Success"===i&&((null==r?void 0:r.details)&&r.details.length>0&&(v.details=a?v.details.concat(r.details):r.details),v.details.isAutomaticPayoutEnabled=r.is_automatic_payouts_enabled||"no"),a||v.triggerLoader("details",!1),v.loadMore=null==r||null===(t=r.meta)||void 0===t?void 0:t.load_more}})}}])&&l(t.prototype,a),i&&l(t,i),e}();function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function p(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function h(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),this.params=t||{}}var t,a,i;return t=e,i=[{key:"initialize",value:function(){e.details=[],e.loadMore=!1,e.loader={details:!0,snooze:!0}}},{key:"doSnooze",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Array.isArray(t)||(t=[t]),t.length&&(e.triggerLoader("snooze"),o.a.requestHandler({requestData:{dashboard:"afwc_pending_payout_controller",cmd:"snooze_scheduled_payouts",affiliates:JSON.stringify(t),security:o.a.getAFWParams("security.pendingPayouts.snoozeScheduledPayouts")||""},callback:function(a){var i=a.success,n=void 0!==i&&i,o=a.data,s=void 0===o?{}:o;if(n){var l=p(e.details);(null==s?void 0:s.scheduled_date)&&l.map((function(e,a){t.includes(e.affiliate_id)&&(l[a]=d(d({},l[a]),{},{scheduled_date:s.scheduled_date||""}))})),e.details=l,e.details.isAutomaticPayoutEnabled=s.is_automatic_payouts_enabled||"no",r.a.show({status:"success",message:_x("Automatic payout snoozed successfully till next period.","Notification message for successful payout snoozed","affiliate-for-woocommerce")})}else r.a.show({status:"error",message:(null==s?void 0:s.message)||_x("Could not schedule automatic payout till the next period.","Notification message for failed payout snoozed","affiliate-for-woocommerce")});e.triggerLoader("snooze",!1)}}))}},{key:"triggerLoader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&(e.loader[t]=a)}},{key:"isLoading",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!t&&t in e.loader&&e.loader[t]}}],(a=null)&&h(t.prototype,a),i&&h(t,i),e}();function y(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}v.initialize();var b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"view",value:function(e){var t,a,i=(null==e||null===(t=e.attrs)||void 0===t?void 0:t.doSnooze)||function(){return""};return 0<((null==v||null===(a=v.details)||void 0===a?void 0:a.length)||0)?m("table",{class:"min-w-full"},m("thead",null,m("tr",null,m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Name","Pending Payout table row title for affiliate name","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-right text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Total unpaid commissions","Pending Payout table row title for unpaid commissions","affiliate-for-woocommerce")),"yes"===v.details.isAutomaticPayoutEnabled?m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-right text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Total scheduled commissions","Pending Payout table row title for scheduled commissions","affiliate-for-woocommerce")):"")),m("tbody",{class:"bg-white"},null==v?void 0:v.details.map((function(e){return m("tr",{key:e.affiliate_id||Math.floor(100*Math.random())},m("td",{class:"px-6 py-3 text-sm font-medium leading-5 text-gray-600 whitespace-no-wrap border-b border-gray-200"},m("p",null,e.affiliate_name||""),m("p",null,"(",e.affiliate_email||"",")")),m("td",{class:"px-6 py-3 text-sm font-medium text-right leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 numeric"},afwcDashboardParams.currencySymbol,e.unpaid_amount||0),"yes"===v.details.isAutomaticPayoutEnabled?m("td",{class:"px-6 py-3 text-sm leading-5 font-medium text-right text-gray-500 whitespace-no-wrap border-b border-gray-200 numeric"},m("p",{class:"font-medium"},afwcDashboardParams.currencySymbol,e.scheduled_amount||0),e.scheduled_date?m("[",null,m("a",{class:"text-indigo-600 hover:text-indigo-900 focus:outline-none focus:underline cursor-pointer",onclick:function(){return i(e.affiliate_id||0)}},_x("Snooze","Link to snooze the scheduled payout date","affiliate-for-woocommerce")),m("p",null,"(",e.scheduled_date||"",")")):""):"")})))):m("p",{class:"py-8 text-sm text-center text-gray-500"},_x("No outstanding payouts.","empty pending payout message","affiliate-for-woocommerce"))}}])&&y(t.prototype,a),i&&y(t,i),e}();function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,i=O(e);if(t){var r=O(this).constructor;a=Reflect.construct(i,arguments,r)}else a=i.apply(this,arguments);return S(this,a)}}function S(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(n,e);var t,a,i,r=P(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x(this,n),r.call(this,e)}return t=n,(a=[{key:"oninit",value:function(){this.doInit()}},{key:"onupdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.doUpdate(e)}},{key:"loadData",value:function(){new c(null==this?void 0:this.params).fetch()}},{key:"view",value:function(){var e=this;return m("main",{class:"max-w-7xl mx-auto my-4 py-2 px-8"},m("h3",{class:"text-lg font-bold text-gray-600 sm:text-3xl leading-8 mb-2"},_x("Pending Payouts","Pending Payout screen headline","affiliate-for-woocommerce")),m("section",{class:"space-y-6 text-gray-500 py-3"},m("p",null,_x("Pending Payouts shows a list of affiliates and their unpaid commissions.","description of pending payouts dashboard feature and usage","affiliate-for-woocommerce")),m("p",null,_x("If automatic payouts are enabled, the Total Scheduled Commissions column will show the commissions your affiliates will receive.","description of pending payouts dashboard feature and a new column based on automatic payouts","affiliate-for-woocommerce")),m("p",null,_x("Commissions in the Total Scheduled Commissions are calculated based on a few settings: Refund period, Minimum affiliate commission for payout, Maximum commission to pay an affiliate and Automatic payouts include affiliates.","description of pending payouts dashboard for automatic payouts","affiliate-for-woocommerce"))),m("section",{class:"rounded-lg bg-white shadow mt-10"},v.isLoading("details")?this.showPlaceholder():m(b,{data:v.details,doSnooze:v.doSnooze}),(null==v?void 0:v.loadMore)&&(null==v?void 0:v.details.length)>0&&0==v.details.length%parseInt(o.a.getAFWParams("dashboard_pending_payout_batch_limit")||10)?m("div",{class:"my-3"},m("div",{class:"pb-2 text-right border-b border-gray-200 text-center"},m("a",{class:"py-2 px-4 text-sm font-medium text-indigo-400 uppercase cursor-pointer",onclick:function(){e.loadMore()}},_x("Load More","Load more link for pending payouts","affiliate-for-woocommerce")))):""))}}])&&_(t.prototype,a),i&&_(t,i),n}(a(11).a);function D(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var C=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,o;return t=e,(a=[{key:"view",value:function(){var e;return m("div",null,m(i.a,null),m(A,null),(null===r.a||void 0===r.a||null===(e=r.a.flags)||void 0===e?void 0:e.showNotification)?m(n.a,null):null)}}])&&D(t.prototype,a),o&&D(t,o),e}()},function(e,t,a){a(31),e.exports=a(32)},function(e,t,a){var i=function(e){"use strict";var t=Object.prototype,a=t.hasOwnProperty,i=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,a){return e[t]=a}}function c(e,t,a,r){var n=t&&t.prototype instanceof f?t:f,o=Object.create(n.prototype),s=new S(r||[]);return i(o,"_invoke",{value:x(e,a,s)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function f(){}function m(){}function p(){}var g={};l(g,n,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(O([])));v&&v!==t&&a.call(v,n)&&(g=v);var y=p.prototype=f.prototype=Object.create(g);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;i(this,"_invoke",{value:function(i,n){function o(){return new t((function(r,o){!function i(r,n,o,s){var l=u(e[r],e,n);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(l.arg)}(i,n,r,o)}))}return r=r?r.then(o,o):o()}})}function x(e,t,a){var i="suspendedStart";return function(r,n){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw n;return{value:void 0,done:!0}}for(a.method=r,a.arg=n;;){var o=a.delegate;if(o){var s=_(o,a);if(s){if(s===d)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===i)throw i="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i="executing";var l=u(e,t,a);if("normal"===l.type){if(i=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(i="completed",a.method="throw",a.arg=l.arg)}}}function _(e,t){var a=t.method,i=e.iterator[a];if(void 0===i)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var r=u(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var n=r.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(null!=e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(a.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}throw new TypeError(typeof e+" is not iterable")}return m.prototype=p,i(y,"constructor",{value:p,configurable:!0}),i(p,"constructor",{value:m,configurable:!0}),m.displayName=l(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(w.prototype),l(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,a,i,r,n){void 0===n&&(n=Promise);var o=new w(c(t,a,i,r),n);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(y),l(y,s,"Generator"),l(y,n,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var i in t)a.push(i);return a.reverse(),function e(){for(;a.length;){var i=a.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(a,i){return o.type="throw",o.arg=e,t.next=a,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r],o=n.completion;if("root"===n.tryLoc)return i("end");if(n.tryLoc<=this.prev){var s=a.call(n,"catchLoc"),l=a.call(n,"finallyLoc");if(s&&l){if(this.prev<n.catchLoc)return i(n.catchLoc,!0);if(this.prev<n.finallyLoc)return i(n.finallyLoc)}else if(s){if(this.prev<n.catchLoc)return i(n.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return i(n.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=e,o.arg=t,n?(this.method="next",this.next=n.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),P(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var i=a.completion;if("throw"===i.type){var r=i.arg;P(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:O(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}(e.exports);try{regeneratorRuntime=i}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},function(e,t,a){"use strict";a.r(t),function(e){a(34);var t=a(23),i=a(25),r=a(28),n=a(27),o=a(29);e.__=wp.i18n.__,e._x=wp.i18n._x,e._nx=wp.i18n._nx,e.sprintf=wp.i18n.sprintf;var s=document.getElementById("afw-admin-dashboard");m.route(s,"/dashboard",{"/dashboard":{view:function(e){return[m(t.a,e.attrs)]}},"/dashboard/:id":{view:function(e){return[m(t.a,e.attrs)]}},"/dashboard/filter/:filterValue":{view:function(e){return[m(t.a,e.attrs)]}},"/dashboard/:id/filter/:filterValue":{view:function(e){return[m(t.a,e.attrs)]}},"/campaigns":{view:function(e){return[m(i.a,e.attrs)]}},"/campaigns/:id":{view:function(e){return[m(i.a,e.attrs)]}},"/plans":{view:function(e){return[m(r.a,e.attrs)]}},"/onboarding":{view:function(e){return[m(n.a,e.attrs)]}},"/pending-payouts":{view:function(e){return[m(o.a,e.attrs)]}}})}.call(this,a(33))},function(e,t){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(e){"object"==typeof window&&(a=window)}e.exports=a},function(e,t,a){}]);